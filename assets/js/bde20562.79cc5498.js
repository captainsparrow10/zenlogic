"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[81],{7932:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"microservicios/inventory-service/api-stock","title":"Stock API","description":"API REST para consulta y gesti\xf3n de stock de inventario con soporte para consultas multi-criterio, alertas y reservas.","source":"@site/docs/02-microservicios/inventory-service/08-api-stock.md","sourceDirName":"02-microservicios/inventory-service","slug":"/microservicios/inventory-service/api-stock","permalink":"/zenlogic/microservicios/inventory-service/api-stock","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/inventory-service/08-api-stock.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"docs","previous":{"title":"Modelo de Datos","permalink":"/zenlogic/microservicios/inventory-service/modelo-datos"},"next":{"title":"Movements API","permalink":"/zenlogic/microservicios/inventory-service/api-movements"}}');var i=s(4848),d=s(8453);const t={sidebar_position:8},c="Stock API",a={},l=[{value:"Endpoints",id:"endpoints",level:2},{value:"Consultar Stock",id:"consultar-stock",level:3},{value:"Consultar Stock por Variante",id:"consultar-stock-por-variante",level:3},{value:"Actualizar Niveles de Stock",id:"actualizar-niveles-de-stock",level:3},{value:"Reservar Stock",id:"reservar-stock",level:3},{value:"Liberar Reserva",id:"liberar-reserva",level:3},{value:"Consultar Alertas de Stock Bajo",id:"consultar-alertas-de-stock-bajo",level:3},{value:"Validar Disponibilidad",id:"validar-disponibilidad",level:3},{value:"Permisos Requeridos",id:"permisos-requeridos",level:2},{value:"Eventos Publicados",id:"eventos-publicados",level:2},{value:"Ejemplos de Uso",id:"ejemplos-de-uso",level:2},{value:"Consultar Stock Multi-Bodega",id:"consultar-stock-multi-bodega",level:3},{value:"Reservar Stock para Orden",id:"reservar-stock-para-orden",level:3},{value:"Validar Disponibilidad",id:"validar-disponibilidad-1",level:3},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"stock-api",children:"Stock API"})}),"\n",(0,i.jsx)(n.p,{children:"API REST para consulta y gesti\xf3n de stock de inventario con soporte para consultas multi-criterio, alertas y reservas."}),"\n",(0,i.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"consultar-stock",children:"Consultar Stock"}),"\n",(0,i.jsx)(n.p,{children:"Obtiene el stock actual de una variante en bodegas espec\xedficas."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /api/v1/stock\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"variant_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"S\xed"}),(0,i.jsx)(n.td,{children:"ID de la variante"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"warehouse_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filtrar por bodega espec\xedfica"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"local_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filtrar por local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"location_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filtrar por ubicaci\xf3n espec\xedfica"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"include_reserved"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Incluir cantidad reservada (default: true)"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer <token>\nX-Organization-ID: <org_id>\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "edges": [\n      {\n        "cursor": "c3RvY2tfMTIz",\n        "node": {\n          "stock_id": "stock_123",\n          "variant_id": "var_456",\n          "warehouse_id": "wh_789",\n          "warehouse": {\n            "warehouse_id": "wh_789",\n            "name": "Bodega Principal",\n            "code": "WH-001",\n            "warehouse_type": "main"\n          },\n          "location_id": "loc_101",\n          "location": {\n            "location_id": "loc_101",\n            "name": "Pasillo A - Estante 5",\n            "code": "WH01-A05-R03"\n          },\n          "quantities": {\n            "total": 150,\n            "available": 120,\n            "reserved": 25,\n            "damaged": 3,\n            "in_transit": 2\n          },\n          "stock_levels": {\n            "min_stock": 20,\n            "max_stock": 200,\n            "reorder_point": 30,\n            "safety_stock": 10\n          },\n          "stock_strategy": "FIFO",\n          "stock_status": "in_stock",\n          "alert_level": "normal",\n          "last_movement_at": "2025-11-23T10:30:00Z",\n          "created_at": "2025-01-15T08:00:00Z",\n          "updated_at": "2025-11-23T10:30:00Z"\n        }\n      }\n    ],\n    "pageInfo": {\n      "hasNextPage": false,\n      "hasPreviousPage": false,\n      "totalCount": 1\n    }\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/stock",\n  "requestId": "req_abc123"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"stock_status Values:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"in_stock"}),": Stock disponible mayor que m\xednimo"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"low_stock"}),": Stock disponible menor o igual al m\xednimo"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"out_of_stock"}),": Stock disponible = 0"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"alert_level Values:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"normal"}),": Stock > reorder_point"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"warning"}),": Stock menor o igual a reorder_point pero mayor a min_stock"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"critical"}),": Stock menor o igual a min_stock"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - ",(0,i.jsx)(n.code,{children:"VARIANT_NOT_FOUND"}),": Variante no existe"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - ",(0,i.jsx)(n.code,{children:"WAREHOUSE_NOT_FOUND"}),": Bodega no existe"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"403"})," - ",(0,i.jsx)(n.code,{children:"LOCAL_ACCESS_DENIED"}),": Sin acceso a este local"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"consultar-stock-por-variante",children:"Consultar Stock por Variante"}),"\n",(0,i.jsx)(n.p,{children:"Obtiene resumen de stock de una variante en todas las bodegas."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /api/v1/stock/variant/{variantId}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"variantId"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"ID de la variante"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"local_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filtrar por local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"warehouse_type"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filtrar por tipo de bodega"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"active_only"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Solo bodegas activas (default: true)"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "variant_id": "var_456",\n    "summary": {\n      "total_warehouses": 3,\n      "total_quantity": 450,\n      "available_quantity": 385,\n      "reserved_quantity": 55,\n      "damaged_quantity": 8,\n      "in_transit_quantity": 2,\n      "stock_status": "in_stock"\n    },\n    "by_warehouse": [\n      {\n        "warehouse_id": "wh_789",\n        "warehouse_name": "Bodega Principal",\n        "warehouse_code": "WH-001",\n        "warehouse_type": "main",\n        "quantities": {\n          "total": 300,\n          "available": 260,\n          "reserved": 35,\n          "damaged": 5,\n          "in_transit": 0\n        },\n        "stock_status": "in_stock"\n      },\n      {\n        "warehouse_id": "wh_790",\n        "warehouse_name": "Bodega Sucursal Centro",\n        "warehouse_code": "WH-002",\n        "warehouse_type": "branch",\n        "quantities": {\n          "total": 150,\n          "available": 125,\n          "reserved": 20,\n          "damaged": 3,\n          "in_transit": 2\n        },\n        "stock_status": "low_stock"\n      }\n    ]\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/stock/variant/var_456",\n  "requestId": "req_abc456"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"actualizar-niveles-de-stock",children:"Actualizar Niveles de Stock"}),"\n",(0,i.jsx)(n.p,{children:"Actualiza min_stock, max_stock y configuraciones de alerta."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"PATCH /api/v1/stock/{stockId}/levels\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"stockId"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"ID del stock"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "min_stock": 25,\n  "max_stock": 250,\n  "reorder_point": 40,\n  "safety_stock": 15,\n  "stock_strategy": "FIFO"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Campos:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Campo"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"min_stock"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Stock m\xednimo"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"max_stock"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Stock m\xe1ximo"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"reorder_point"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Punto de reorden"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"safety_stock"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Stock de seguridad"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"stock_strategy"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"FIFO, LIFO, FEFO"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"min_stock"})," menor o igual a ",(0,i.jsx)(n.code,{children:"max_stock"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"reorder_point"})," mayor a ",(0,i.jsx)(n.code,{children:"min_stock"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"safety_stock"})," menor a ",(0,i.jsx)(n.code,{children:"min_stock"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "stock_id": "stock_123",\n    "variant_id": "var_456",\n    "warehouse_id": "wh_789",\n    "quantities": {\n      "total": 150,\n      "available": 120,\n      "reserved": 25,\n      "damaged": 3,\n      "in_transit": 2\n    },\n    "stock_levels": {\n      "min_stock": 25,\n      "max_stock": 250,\n      "reorder_point": 40,\n      "safety_stock": 15\n    },\n    "stock_strategy": "FIFO",\n    "updated_at": "2025-11-23T15:05:00Z"\n  },\n  "timestamp": "2025-11-23T15:05:00Z",\n  "path": "/api/v1/stock/stock_123/levels",\n  "requestId": "req_abc789"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - ",(0,i.jsx)(n.code,{children:"STOCK_NOT_FOUND"}),": Stock no existe"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"400"})," - ",(0,i.jsx)(n.code,{children:"INVALID_STOCK_LEVELS"}),": Niveles inv\xe1lidos"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"403"})," - ",(0,i.jsx)(n.code,{children:"INSUFFICIENT_PERMISSIONS"}),": Sin permisos para modificar"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"reservar-stock",children:"Reservar Stock"}),"\n",(0,i.jsx)(n.p,{children:"Crea una reserva de stock para una orden."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"POST /api/v1/stock/reserve\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "order_id": "order_789",\n  "items": [\n    {\n      "variant_id": "var_456",\n      "warehouse_id": "wh_789",\n      "quantity": 10,\n      "expires_in_minutes": 30\n    },\n    {\n      "variant_id": "var_457",\n      "warehouse_id": "wh_789",\n      "quantity": 5,\n      "expires_in_minutes": 30\n    }\n  ],\n  "reservation_type": "order"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Campos:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Campo"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"order_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"S\xed"}),(0,i.jsx)(n.td,{children:"ID de la orden"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"items"})}),(0,i.jsx)(n.td,{children:"array"}),(0,i.jsx)(n.td,{children:"S\xed"}),(0,i.jsx)(n.td,{children:"Items a reservar"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"items[].variant_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"S\xed"}),(0,i.jsx)(n.td,{children:"ID de variante"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"items[].warehouse_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"S\xed"}),(0,i.jsx)(n.td,{children:"ID de bodega"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"items[].quantity"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"S\xed"}),(0,i.jsx)(n.td,{children:"Cantidad a reservar"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"items[].expires_in_minutes"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Minutos hasta expiraci\xf3n (default: 30)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"reservation_type"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"order, quote (default: order)"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta Exitosa (201 Created):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 201,\n  "data": {\n    "reservation_id": "res_123",\n    "order_id": "order_789",\n    "status": "active",\n    "items": [\n      {\n        "reservation_item_id": "resitem_456",\n        "variant_id": "var_456",\n        "warehouse_id": "wh_789",\n        "quantity": 10,\n        "stock_before": 120,\n        "stock_after": 110,\n        "reserved_at": "2025-11-23T15:00:00Z",\n        "expires_at": "2025-11-23T15:30:00Z"\n      },\n      {\n        "reservation_item_id": "resitem_457",\n        "variant_id": "var_457",\n        "warehouse_id": "wh_789",\n        "quantity": 5,\n        "stock_before": 85,\n        "stock_after": 80,\n        "reserved_at": "2025-11-23T15:00:00Z",\n        "expires_at": "2025-11-23T15:30:00Z"\n      }\n    ],\n    "created_at": "2025-11-23T15:00:00Z"\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/stock/reserve",\n  "requestId": "req_res123"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"400"})," - ",(0,i.jsx)(n.code,{children:"INSUFFICIENT_STOCK"}),": Stock insuficiente para reservar"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - ",(0,i.jsx)(n.code,{children:"VARIANT_NOT_FOUND"}),": Variante no existe"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - ",(0,i.jsx)(n.code,{children:"WAREHOUSE_NOT_FOUND"}),": Bodega no existe"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"409"})," - ",(0,i.jsx)(n.code,{children:"RESERVATION_EXISTS"}),": Ya existe reserva para esta orden"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Evento Publicado:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.stock.reserved",\n  "data": {\n    "reservation_id": "res_123",\n    "order_id": "order_789",\n    "items": [...],\n    "expires_at": "2025-11-23T15:30:00Z"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"liberar-reserva",children:"Liberar Reserva"}),"\n",(0,i.jsx)(n.p,{children:"Libera una reserva de stock existente."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"POST /api/v1/stock/reserve/{reservationId}/release\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"reservationId"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"ID de la reserva"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "reason": "order_cancelled",\n  "notes": "Cliente cancel\xf3 la orden"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "reservation_id": "res_123",\n    "order_id": "order_789",\n    "status": "cancelled",\n    "items_released": 2,\n    "released_at": "2025-11-23T15:10:00Z"\n  },\n  "timestamp": "2025-11-23T15:10:00Z",\n  "path": "/api/v1/stock/reserve/res_123/release",\n  "requestId": "req_rel123"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - ",(0,i.jsx)(n.code,{children:"RESERVATION_NOT_FOUND"}),": Reserva no existe"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"409"})," - ",(0,i.jsx)(n.code,{children:"RESERVATION_ALREADY_FULFILLED"}),": Reserva ya fue cumplida"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"409"})," - ",(0,i.jsx)(n.code,{children:"RESERVATION_EXPIRED"}),": Reserva ya expir\xf3"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Evento Publicado:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.stock.released",\n  "data": {\n    "reservation_id": "res_123",\n    "order_id": "order_789",\n    "reason": "order_cancelled"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"consultar-alertas-de-stock-bajo",children:"Consultar Alertas de Stock Bajo"}),"\n",(0,i.jsx)(n.p,{children:"Obtiene lista de productos con stock bajo el nivel m\xednimo."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /api/v1/stock/alerts\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"warehouse_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filtrar por bodega"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"local_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filtrar por local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alert_level"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"warning, critical"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cursor"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Cursor de paginaci\xf3n"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Resultados por p\xe1gina (max: 100)"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "edges": [\n      {\n        "cursor": "YWxlcnRfMTIz",\n        "node": {\n          "stock_id": "stock_456",\n          "variant_id": "var_789",\n          "variant": {\n            "sku": "PROD-001-RED",\n            "name": "Producto Ejemplo - Rojo"\n          },\n          "warehouse_id": "wh_123",\n          "warehouse": {\n            "name": "Bodega Principal",\n            "code": "WH-001"\n          },\n          "quantities": {\n            "available": 15,\n            "reserved": 5,\n            "total": 20\n          },\n          "stock_levels": {\n            "min_stock": 20,\n            "reorder_point": 30\n          },\n          "quantity_needed": 15,\n          "alert_level": "critical",\n          "days_of_stock": 3,\n          "last_movement_at": "2025-11-22T14:20:00Z"\n        }\n      }\n    ],\n    "pageInfo": {\n      "hasNextPage": true,\n      "totalCount": 45\n    }\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/stock/alerts",\n  "requestId": "req_alerts123"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Campos Calculados:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"quantity_needed"}),": ",(0,i.jsx)(n.code,{children:"min_stock - available_quantity"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"days_of_stock"}),": D\xedas estimados basado en velocidad de venta promedio"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"alert_level"}),': "warning" (menor o igual a reorder_point) o "critical" (menor o igual a min_stock)']}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"validar-disponibilidad",children:"Validar Disponibilidad"}),"\n",(0,i.jsx)(n.p,{children:"Valida si hay stock disponible para una lista de items sin crear reserva."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"POST /api/v1/stock/check-availability\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "items": [\n    {\n      "variant_id": "var_456",\n      "warehouse_id": "wh_789",\n      "quantity": 25\n    },\n    {\n      "variant_id": "var_457",\n      "warehouse_id": "wh_789",\n      "quantity": 10\n    }\n  ],\n  "allow_partial": false\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "is_available": true,\n    "items": [\n      {\n        "variant_id": "var_456",\n        "warehouse_id": "wh_789",\n        "requested_quantity": 25,\n        "available_quantity": 120,\n        "is_available": true,\n        "can_fulfill": true\n      },\n      {\n        "variant_id": "var_457",\n        "warehouse_id": "wh_789",\n        "requested_quantity": 10,\n        "available_quantity": 85,\n        "is_available": true,\n        "can_fulfill": true\n      }\n    ],\n    "all_available": true,\n    "partially_available": false\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/stock/check-availability",\n  "requestId": "req_check123"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuesta con Stock Insuficiente:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "is_available": false,\n    "items": [\n      {\n        "variant_id": "var_456",\n        "warehouse_id": "wh_789",\n        "requested_quantity": 150,\n        "available_quantity": 120,\n        "is_available": false,\n        "can_fulfill": false,\n        "shortage": 30\n      }\n    ],\n    "all_available": false,\n    "partially_available": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"permisos-requeridos",children:"Permisos Requeridos"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Endpoint"}),(0,i.jsx)(n.th,{children:"Permiso Requerido"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GET /stock"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inventory.stock.read"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GET /stock/variant/{id}"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inventory.stock.read"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PATCH /stock/{id}/levels"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inventory.stock.manage"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"POST /stock/reserve"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inventory.stock.reserve"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"POST /stock/reserve/{id}/release"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inventory.stock.reserve"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GET /stock/alerts"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inventory.stock.read"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"POST /stock/check-availability"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inventory.stock.read"})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"eventos-publicados",children:"Eventos Publicados"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inventory.stock.updated"})," - Stock actualizado"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inventory.stock.reserved"})," - Stock reservado"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inventory.stock.released"})," - Reserva liberada"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inventory.stock.low_level"})," - Stock bajo m\xednimo"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inventory.stock.depleted"})," - Stock agotado"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ejemplos-de-uso",children:"Ejemplos de Uso"}),"\n",(0,i.jsx)(n.h3,{id:"consultar-stock-multi-bodega",children:"Consultar Stock Multi-Bodega"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.example.com/api/v1/stock/variant/var_456?local_id=local_123" \\\n  -H "Authorization: Bearer <token>" \\\n  -H "X-Organization-ID: org_789"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"reservar-stock-para-orden",children:"Reservar Stock para Orden"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.example.com/api/v1/stock/reserve" \\\n  -H "Authorization: Bearer <token>" \\\n  -H "X-Organization-ID: org_789" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "order_id": "order_456",\n    "items": [\n      {\n        "variant_id": "var_789",\n        "warehouse_id": "wh_123",\n        "quantity": 10,\n        "expires_in_minutes": 30\n      }\n    ]\n  }\'\n'})}),"\n",(0,i.jsx)(n.h3,{id:"validar-disponibilidad-1",children:"Validar Disponibilidad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.example.com/api/v1/stock/check-availability" \\\n  -H "Authorization: Bearer <token>" \\\n  -H "X-Organization-ID: org_789" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "items": [\n      {"variant_id": "var_456", "warehouse_id": "wh_789", "quantity": 25}\n    ]\n  }\'\n'})}),"\n",(0,i.jsx)(n.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./api-movements",children:"API: Movements"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./api-warehouses",children:"API: Warehouses"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./api-transfers",children:"API: Transfers"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./errores-comunes",children:"Errores Comunes"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var r=s(6540);const i={},d=r.createContext(i);function t(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);