"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[9577],{8453:(e,n,c)=>{c.d(n,{R:()=>r,x:()=>o});var l=c(6540);const s={},i=l.createContext(s);function r(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(i.Provider,{value:n},e.children)}},9594:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"microservicios/catalog-service/api-collections","title":"Collections API","description":"API REST para la gesti\xf3n de colecciones jer\xe1rquicas de productos en el Catalog Service.","source":"@site/docs/02-microservicios/catalog-service/19-api-collections.md","sourceDirName":"02-microservicios/catalog-service","slug":"/microservicios/catalog-service/api-collections","permalink":"/zenlogic/microservicios/catalog-service/api-collections","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/catalog-service/19-api-collections.md","tags":[],"version":"current","sidebarPosition":19,"frontMatter":{},"sidebar":"docs","previous":{"title":"Brands API","permalink":"/zenlogic/microservicios/catalog-service/api-brands"},"next":{"title":"Tags API","permalink":"/zenlogic/microservicios/catalog-service/api-tags"}}');var s=c(4848),i=c(8453);const r={},o="Collections API",t={},d=[{value:"Endpoints",id:"endpoints",level:2},{value:"Listar Colecciones",id:"listar-colecciones",level:3},{value:"Obtener Colecci\xf3n por ID",id:"obtener-colecci\xf3n-por-id",level:3},{value:"Crear Colecci\xf3n",id:"crear-colecci\xf3n",level:3},{value:"Actualizar Colecci\xf3n",id:"actualizar-colecci\xf3n",level:3},{value:"Eliminar Colecci\xf3n",id:"eliminar-colecci\xf3n",level:3},{value:"Obtener \xc1rbol de Colecciones",id:"obtener-\xe1rbol-de-colecciones",level:3},{value:"A\xf1adir Productos a Colecci\xf3n",id:"a\xf1adir-productos-a-colecci\xf3n",level:3},{value:"Remover Productos de Colecci\xf3n",id:"remover-productos-de-colecci\xf3n",level:3},{value:"Eventos Publicados",id:"eventos-publicados",level:2},{value:"collection.created",id:"collectioncreated",level:3},{value:"collection.updated",id:"collectionupdated",level:3},{value:"collection.deleted",id:"collectiondeleted",level:3},{value:"collection.products.added",id:"collectionproductsadded",level:3},{value:"Permisos Requeridos",id:"permisos-requeridos",level:2},{value:"Cach\xe9",id:"cach\xe9",level:2},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Ejemplos de Uso",id:"ejemplos-de-uso",level:2},{value:"Listar colecciones ra\xedz",id:"listar-colecciones-ra\xedz",level:3},{value:"Obtener \xe1rbol completo de colecciones",id:"obtener-\xe1rbol-completo-de-colecciones",level:3},{value:"Crear sub-colecci\xf3n",id:"crear-sub-colecci\xf3n",level:3},{value:"A\xf1adir productos a colecci\xf3n",id:"a\xf1adir-productos-a-colecci\xf3n-1",level:3},{value:"Eliminar colecci\xf3n reasignando productos",id:"eliminar-colecci\xf3n-reasignando-productos",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"collections-api",children:"Collections API"})}),"\n",(0,s.jsx)(n.p,{children:"API REST para la gesti\xf3n de colecciones jer\xe1rquicas de productos en el Catalog Service."}),"\n",(0,s.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,s.jsx)(n.h3,{id:"listar-colecciones",children:"Listar Colecciones"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/v1/collections\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Requerido"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"first"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"N\xfamero de elementos a retornar (default: 20, max: 100)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"after"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Cursor para paginaci\xf3n hacia adelante"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"last"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"N\xfamero de elementos anteriores a retornar"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"before"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Cursor para paginaci\xf3n hacia atr\xe1s"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"search"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"B\xfasqueda por nombre o descripci\xf3n"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"parent_id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Filtrar por colecci\xf3n padre (null para ra\xedz)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"is_active"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Filtrar por estado activo/inactivo"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "edges": [\n      {\n        "cursor": "Y29sbGVjdGlvbl8xMjM=",\n        "node": {\n          "collection_id": "coll_123",\n          "organization_id": "org_456",\n          "parent_id": null,\n          "name": "Electronics",\n          "slug": "electronics",\n          "description": "Electronic devices and accessories",\n          "image_url": "https://cdn.example.com/collections/electronics.jpg",\n          "sort_order": 1,\n          "is_active": true,\n          "metadata": {\n            "featured": true,\n            "show_in_menu": true\n          },\n          "products_count": 156,\n          "children_count": 3,\n          "created_at": "2025-01-10T10:00:00Z",\n          "updated_at": "2025-11-20T14:30:00Z"\n        }\n      },\n      {\n        "cursor": "Y29sbGVjdGlvbl8xMjQ=",\n        "node": {\n          "collection_id": "coll_124",\n          "organization_id": "org_456",\n          "parent_id": "coll_123",\n          "name": "Smartphones",\n          "slug": "smartphones",\n          "description": "Latest smartphones and mobile devices",\n          "image_url": "https://cdn.example.com/collections/smartphones.jpg",\n          "sort_order": 1,\n          "is_active": true,\n          "metadata": {\n            "featured": true,\n            "show_in_menu": true,\n            "banner_text": "New arrivals"\n          },\n          "products_count": 45,\n          "children_count": 0,\n          "created_at": "2025-01-10T11:00:00Z",\n          "updated_at": "2025-11-20T15:00:00Z"\n        }\n      }\n    ],\n    "pageInfo": {\n      "hasNextPage": true,\n      "hasPreviousPage": false,\n      "startCursor": "Y29sbGVjdGlvbl8xMjM=",\n      "endCursor": "Y29sbGVjdGlvbl8xNDU=",\n      "totalCount": 42\n    }\n  },\n  "timestamp": "2025-11-23T10:40:00Z",\n  "path": "/api/v1/collections",\n  "requestId": "req_collections_list_abc123"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"obtener-colecci\xf3n-por-id",children:"Obtener Colecci\xf3n por ID"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/v1/collections/{collectionId}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"collectionId"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ID \xfanico de la colecci\xf3n"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"include_children"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"Incluir sub-colecciones (default: false)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"include_products"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"Incluir productos de la colecci\xf3n (default: false)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "collection_id": "coll_123",\n    "organization_id": "org_456",\n    "parent_id": null,\n    "name": "Electronics",\n    "slug": "electronics",\n    "description": "Electronic devices and accessories",\n    "image_url": "https://cdn.example.com/collections/electronics.jpg",\n    "sort_order": 1,\n    "is_active": true,\n    "metadata": {\n      "featured": true,\n      "show_in_menu": true\n    },\n    "products_count": 156,\n    "children_count": 3,\n    "children": [\n      {\n        "collection_id": "coll_124",\n        "name": "Smartphones",\n        "slug": "smartphones",\n        "products_count": 45\n      },\n      {\n        "collection_id": "coll_125",\n        "name": "Laptops",\n        "slug": "laptops",\n        "products_count": 67\n      }\n    ],\n    "created_at": "2025-01-10T10:00:00Z",\n    "updated_at": "2025-11-20T14:30:00Z"\n  },\n  "timestamp": "2025-11-23T10:41:00Z",\n  "path": "/api/v1/collections/coll_123",\n  "requestId": "req_collection_get_xyz789"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Error (404 Not Found):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 404,\n  "error": {\n    "code": "COLLECTION_NOT_FOUND",\n    "message": "Collection with ID \'coll_123\' not found",\n    "details": {\n      "collection_id": "coll_123"\n    }\n  },\n  "timestamp": "2025-11-23T10:41:00Z",\n  "path": "/api/v1/collections/coll_123",\n  "requestId": "req_collection_get_xyz789"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"crear-colecci\xf3n",children:"Crear Colecci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"POST /api/v1/collections\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "parent_id": "coll_123",\n  "name": "Tablets",\n  "slug": "tablets",\n  "description": "Tablets and iPad devices",\n  "image_url": "https://cdn.example.com/collections/tablets.jpg",\n  "sort_order": 2,\n  "is_active": true,\n  "metadata": {\n    "featured": false,\n    "show_in_menu": true\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": Requerido, string (1-100 caracteres), \xfanico por organizaci\xf3n y parent_id"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"slug"}),": Requerido, string (1-100 caracteres), formato slug, \xfanico por organizaci\xf3n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"parent_id"}),": Opcional, string (debe existir en la organizaci\xf3n)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"description"}),": Opcional, string (max 500 caracteres)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"image_url"}),": Opcional, string (URL v\xe1lida)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sort_order"}),": Opcional, integer (default: 0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"is_active"}),": Opcional, boolean (default: true)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"metadata"}),": Opcional, objeto JSON"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (201 Created):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 201,\n  "data": {\n    "collection_id": "coll_126",\n    "organization_id": "org_456",\n    "parent_id": "coll_123",\n    "name": "Tablets",\n    "slug": "tablets",\n    "description": "Tablets and iPad devices",\n    "image_url": "https://cdn.example.com/collections/tablets.jpg",\n    "sort_order": 2,\n    "is_active": true,\n    "metadata": {\n      "featured": false,\n      "show_in_menu": true\n    },\n    "products_count": 0,\n    "children_count": 0,\n    "created_at": "2025-11-23T10:42:00Z",\n    "updated_at": "2025-11-23T10:42:00Z"\n  },\n  "timestamp": "2025-11-23T10:42:00Z",\n  "path": "/api/v1/collections",\n  "requestId": "req_collection_create_def456"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Error (409 Conflict):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "COLLECTION_SLUG_EXISTS",\n    "message": "Collection with slug \'tablets\' already exists in this organization",\n    "details": {\n      "slug": "tablets",\n      "existing_collection_id": "coll_111"\n    }\n  },\n  "timestamp": "2025-11-23T10:42:00Z",\n  "path": "/api/v1/collections",\n  "requestId": "req_collection_create_def456"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Error (400 Bad Request - Circular Reference):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 400,\n  "error": {\n    "code": "CIRCULAR_COLLECTION_REFERENCE",\n    "message": "Cannot set parent_id that would create a circular reference",\n    "details": {\n      "collection_id": "coll_123",\n      "parent_id": "coll_126"\n    }\n  },\n  "timestamp": "2025-11-23T10:42:00Z",\n  "path": "/api/v1/collections",\n  "requestId": "req_collection_create_def456"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"actualizar-colecci\xf3n",children:"Actualizar Colecci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"PUT /api/v1/collections/{collectionId}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"collectionId"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ID \xfanico de la colecci\xf3n"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Tablets & iPads",\n  "description": "All tablet devices including iPads",\n  "sort_order": 1,\n  "is_active": true,\n  "metadata": {\n    "featured": true,\n    "show_in_menu": true,\n    "promo_banner": "20% off on selected tablets"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Todos los campos son opcionales"}),"\n",(0,s.jsxs)(n.li,{children:["Si se actualiza ",(0,s.jsx)(n.code,{children:"parent_id"}),", validar que no cree referencia circular"]}),"\n",(0,s.jsxs)(n.li,{children:["Si se env\xeda ",(0,s.jsx)(n.code,{children:"name"})," o ",(0,s.jsx)(n.code,{children:"slug"}),", debe ser \xfanico"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "collection_id": "coll_126",\n    "organization_id": "org_456",\n    "parent_id": "coll_123",\n    "name": "Tablets & iPads",\n    "slug": "tablets",\n    "description": "All tablet devices including iPads",\n    "image_url": "https://cdn.example.com/collections/tablets.jpg",\n    "sort_order": 1,\n    "is_active": true,\n    "metadata": {\n      "featured": true,\n      "show_in_menu": true,\n      "promo_banner": "20% off on selected tablets"\n    },\n    "products_count": 0,\n    "children_count": 0,\n    "created_at": "2025-11-23T10:42:00Z",\n    "updated_at": "2025-11-23T10:45:00Z"\n  },\n  "timestamp": "2025-11-23T10:45:00Z",\n  "path": "/api/v1/collections/coll_126",\n  "requestId": "req_collection_update_ghi789"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"eliminar-colecci\xf3n",children:"Eliminar Colecci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"DELETE /api/v1/collections/{collectionId}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"collectionId"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ID \xfanico de la colecci\xf3n"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"force"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"Forzar eliminaci\xf3n aunque tenga productos o sub-colecciones"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"reassign_to"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ID de colecci\xf3n a la que reasignar productos/sub-colecciones"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (204 No Content):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"HTTP/1.1 204 No Content\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Error (409 Conflict - Has Products):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "COLLECTION_HAS_PRODUCTS",\n    "message": "Cannot delete collection with associated products",\n    "details": {\n      "collection_id": "coll_126",\n      "products_count": 23,\n      "suggestion": "Use reassign_to parameter to move products to another collection"\n    }\n  },\n  "timestamp": "2025-11-23T10:46:00Z",\n  "path": "/api/v1/collections/coll_126",\n  "requestId": "req_collection_delete_jkl012"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Error (409 Conflict - Has Children):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "COLLECTION_HAS_CHILDREN",\n    "message": "Cannot delete collection with sub-collections",\n    "details": {\n      "collection_id": "coll_123",\n      "children_count": 3,\n      "suggestion": "Delete or reassign child collections first"\n    }\n  },\n  "timestamp": "2025-11-23T10:46:00Z",\n  "path": "/api/v1/collections/coll_123",\n  "requestId": "req_collection_delete_jkl012"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"obtener-\xe1rbol-de-colecciones",children:"Obtener \xc1rbol de Colecciones"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/v1/collections/tree\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"max_depth"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"Profundidad m\xe1xima del \xe1rbol (default: 3)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"include_counts"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"Incluir conteos de productos (default: true)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": [\n    {\n      "collection_id": "coll_123",\n      "name": "Electronics",\n      "slug": "electronics",\n      "products_count": 156,\n      "children": [\n        {\n          "collection_id": "coll_124",\n          "name": "Smartphones",\n          "slug": "smartphones",\n          "products_count": 45,\n          "children": []\n        },\n        {\n          "collection_id": "coll_125",\n          "name": "Laptops",\n          "slug": "laptops",\n          "products_count": 67,\n          "children": [\n            {\n              "collection_id": "coll_127",\n              "name": "Gaming Laptops",\n              "slug": "gaming-laptops",\n              "products_count": 23,\n              "children": []\n            }\n          ]\n        }\n      ]\n    },\n    {\n      "collection_id": "coll_200",\n      "name": "Clothing",\n      "slug": "clothing",\n      "products_count": 342,\n      "children": []\n    }\n  ],\n  "timestamp": "2025-11-23T10:47:00Z",\n  "path": "/api/v1/collections/tree",\n  "requestId": "req_collections_tree_mno345"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"a\xf1adir-productos-a-colecci\xf3n",children:"A\xf1adir Productos a Colecci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"POST /api/v1/collections/{collectionId}/products\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"collectionId"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ID \xfanico de la colecci\xf3n"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "product_ids": [\n    "prod_123",\n    "prod_124",\n    "prod_125"\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "collection_id": "coll_126",\n    "products_added": 3,\n    "products_count": 26\n  },\n  "timestamp": "2025-11-23T10:48:00Z",\n  "path": "/api/v1/collections/coll_126/products",\n  "requestId": "req_collection_add_products_pqr678"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"remover-productos-de-colecci\xf3n",children:"Remover Productos de Colecci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"DELETE /api/v1/collections/{collectionId}/products\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"collectionId"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ID \xfanico de la colecci\xf3n"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "product_ids": [\n    "prod_123",\n    "prod_124"\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "collection_id": "coll_126",\n    "products_removed": 2,\n    "products_count": 24\n  },\n  "timestamp": "2025-11-23T10:49:00Z",\n  "path": "/api/v1/collections/coll_126/products",\n  "requestId": "req_collection_remove_products_stu901"\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"eventos-publicados",children:"Eventos Publicados"}),"\n",(0,s.jsx)(n.h3,{id:"collectioncreated",children:"collection.created"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_collection_created_abc123",\n  "event_type": "collection.created",\n  "timestamp": "2025-11-23T10:42:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "collection_id": "coll_126",\n    "organization_id": "org_456",\n    "parent_id": "coll_123",\n    "name": "Tablets",\n    "slug": "tablets",\n    "is_active": true\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_collection_create_def456"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"collectionupdated",children:"collection.updated"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_collection_updated_def456",\n  "event_type": "collection.updated",\n  "timestamp": "2025-11-23T10:45:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "collection_id": "coll_126",\n    "organization_id": "org_456",\n    "changes": {\n      "name": {\n        "old": "Tablets",\n        "new": "Tablets & iPads"\n      }\n    }\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_collection_update_ghi789"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"collectiondeleted",children:"collection.deleted"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_collection_deleted_ghi789",\n  "event_type": "collection.deleted",\n  "timestamp": "2025-11-23T10:46:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "collection_id": "coll_126",\n    "organization_id": "org_456"\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_collection_delete_jkl012"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"collectionproductsadded",children:"collection.products.added"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_collection_products_added_jkl012",\n  "event_type": "collection.products.added",\n  "timestamp": "2025-11-23T10:48:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "collection_id": "coll_126",\n    "organization_id": "org_456",\n    "product_ids": ["prod_123", "prod_124", "prod_125"],\n    "products_count": 26\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_collection_add_products_pqr678"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"permisos-requeridos",children:"Permisos Requeridos"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Endpoint"}),(0,s.jsx)(n.th,{children:"Permiso"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GET /api/v1/collections"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.read"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GET /api/v1/collections/{id}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.read"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GET /api/v1/collections/tree"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.read"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POST /api/v1/collections"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.create"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PUT /api/v1/collections/{id}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.update"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DELETE /api/v1/collections/{id}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.delete"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POST /api/v1/collections/{id}/products"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.update"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DELETE /api/v1/collections/{id}/products"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"catalog.collections.update"})})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"cach\xe9",children:"Cach\xe9"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lista de colecciones"}),": TTL 5 minutos"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Colecci\xf3n individual"}),": TTL 15 minutos"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\xc1rbol de colecciones"}),": TTL 10 minutos"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Invalidaci\xf3n"}),": Al crear, actualizar o eliminar colecciones"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Cache Keys:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"collections:list:{organization_id}:{hash(query_params)}\ncollections:detail:{collection_id}\ncollections:tree:{organization_id}:{max_depth}\ncollections:by_slug:{organization_id}:{slug}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lectura"}),": 100 requests/minuto por usuario"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Escritura"}),": 20 requests/minuto por usuario"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ejemplos-de-uso",children:"Ejemplos de Uso"}),"\n",(0,s.jsx)(n.h3,{id:"listar-colecciones-ra\xedz",children:"Listar colecciones ra\xedz"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.zenlogic.com/api/v1/collections?parent_id=null&first=20" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"obtener-\xe1rbol-completo-de-colecciones",children:"Obtener \xe1rbol completo de colecciones"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.zenlogic.com/api/v1/collections/tree?max_depth=5" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"crear-sub-colecci\xf3n",children:"Crear sub-colecci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.zenlogic.com/api/v1/collections" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "parent_id": "coll_123",\n    "name": "Smart Watches",\n    "slug": "smart-watches",\n    "is_active": true\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"a\xf1adir-productos-a-colecci\xf3n-1",children:"A\xf1adir productos a colecci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.zenlogic.com/api/v1/collections/coll_126/products" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "product_ids": ["prod_123", "prod_124", "prod_125"]\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"eliminar-colecci\xf3n-reasignando-productos",children:"Eliminar colecci\xf3n reasignando productos"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X DELETE "https://api.zenlogic.com/api/v1/collections/coll_126?reassign_to=coll_123" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);