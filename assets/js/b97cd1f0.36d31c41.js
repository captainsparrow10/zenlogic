"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[7513],{1777:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>v,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"microservicios/inventory-service/eventos-publicados","title":"Eventos Publicados","description":"Eventos que el Inventory Service publica a RabbitMQ para notificar cambios a otros servicios.","source":"@site/docs/02-microservicios/inventory-service/14-eventos-publicados.md","sourceDirName":"02-microservicios/inventory-service","slug":"/microservicios/inventory-service/eventos-publicados","permalink":"/zenlogic/microservicios/inventory-service/eventos-publicados","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/inventory-service/14-eventos-publicados.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14},"sidebar":"docs","previous":{"title":"Locations API","permalink":"/zenlogic/microservicios/inventory-service/api-locations"},"next":{"title":"Eventos Consumidos","permalink":"/zenlogic/microservicios/inventory-service/eventos-consumidos"}}');var s=r(4848),i=r(8453);const a={sidebar_position:14},d="Eventos Publicados",o={},c=[{value:"Configuraci\xf3n",id:"configuraci\xf3n",level:2},{value:"Stock Events",id:"stock-events",level:2},{value:"inventory.stock.updated",id:"inventorystockupdated",level:3},{value:"inventory.stock.reserved",id:"inventorystockreserved",level:3},{value:"inventory.stock.released",id:"inventorystockreleased",level:3},{value:"inventory.stock.low_level",id:"inventorystocklow_level",level:3},{value:"inventory.stock.depleted",id:"inventorystockdepleted",level:3},{value:"Movement Events",id:"movement-events",level:2},{value:"inventory.movement.created",id:"inventorymovementcreated",level:3},{value:"inventory.movement.in",id:"inventorymovementin",level:3},{value:"inventory.movement.out",id:"inventorymovementout",level:3},{value:"Warehouse Events",id:"warehouse-events",level:2},{value:"inventory.warehouse.created",id:"inventorywarehousecreated",level:3},{value:"inventory.warehouse.updated",id:"inventorywarehouseupdated",level:3},{value:"inventory.warehouse.deactivated",id:"inventorywarehousedeactivated",level:3},{value:"Transfer Events",id:"transfer-events",level:2},{value:"inventory.transfer.created",id:"inventorytransfercreated",level:3},{value:"inventory.transfer.approved",id:"inventorytransferapproved",level:3},{value:"inventory.transfer.in_transit",id:"inventorytransferin_transit",level:3},{value:"inventory.transfer.received",id:"inventorytransferreceived",level:3},{value:"inventory.transfer.cancelled",id:"inventorytransfercancelled",level:3},{value:"Adjustment Events",id:"adjustment-events",level:2},{value:"inventory.adjustment.created",id:"inventoryadjustmentcreated",level:3},{value:"inventory.adjustment.approved",id:"inventoryadjustmentapproved",level:3},{value:"inventory.adjustment.rejected",id:"inventoryadjustmentrejected",level:3},{value:"inventory.adjustment.applied",id:"inventoryadjustmentapplied",level:3},{value:"Resumen de Eventos",id:"resumen-de-eventos",level:2},{value:"Configuraci\xf3n de Consumidores",id:"configuraci\xf3n-de-consumidores",level:2},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"eventos-publicados",children:"Eventos Publicados"})}),"\n",(0,s.jsx)(n.p,{children:"Eventos que el Inventory Service publica a RabbitMQ para notificar cambios a otros servicios."}),"\n",(0,s.jsx)(n.h2,{id:"configuraci\xf3n",children:"Configuraci\xf3n"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Exchange:"})," ",(0,s.jsx)(n.code,{children:"inventory_events"}),"\n",(0,s.jsx)(n.strong,{children:"Exchange Type:"})," ",(0,s.jsx)(n.code,{children:"topic"}),"\n",(0,s.jsx)(n.strong,{children:"Routing Key Pattern:"})," ",(0,s.jsx)(n.code,{children:"inventory.{entity}.{action}"})]}),"\n",(0,s.jsx)(n.h2,{id:"stock-events",children:"Stock Events"}),"\n",(0,s.jsx)(n.h3,{id:"inventorystockupdated",children:"inventory.stock.updated"}),"\n",(0,s.jsx)(n.p,{children:"Publicado cuando el stock de una variante cambia."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.stock.updated",\n  "version": "1.0",\n  "timestamp": "2025-11-23T15:00:00Z",\n  "organization_id": "org_123",\n  "data": {\n    "stock_id": "stock_456",\n    "variant_id": "var_789",\n    "warehouse_id": "wh_101",\n    "quantities": {\n      "total": 150,\n      "available": 120,\n      "reserved": 25,\n      "damaged": 5\n    },\n    "previous_quantities": {\n      "total": 145,\n      "available": 115,\n      "reserved": 25,\n      "damaged": 5\n    },\n    "change_type": "in",\n    "movement_id": "mov_123"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Consumidores:"})," Catalog Service, Order Service, Analytics"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorystockreserved",children:"inventory.stock.reserved"}),"\n",(0,s.jsx)(n.p,{children:"Stock reservado para una orden."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.stock.reserved",\n  "data": {\n    "reservation_id": "res_123",\n    "order_id": "order_456",\n    "items": [\n      {\n        "variant_id": "var_789",\n        "warehouse_id": "wh_101",\n        "quantity": 10,\n        "stock_before": 120,\n        "stock_after": 110\n      }\n    ],\n    "expires_at": "2025-11-23T15:30:00Z"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Consumidores:"})," Order Service"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorystockreleased",children:"inventory.stock.released"}),"\n",(0,s.jsx)(n.p,{children:"Reserva de stock liberada."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.stock.released",\n  "data": {\n    "reservation_id": "res_123",\n    "order_id": "order_456",\n    "reason": "order_cancelled",\n    "items_released": 2,\n    "total_quantity_released": 15\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorystocklow_level",children:"inventory.stock.low_level"}),"\n",(0,s.jsx)(n.p,{children:"Stock alcanz\xf3 nivel m\xednimo."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.stock.low_level",\n  "data": {\n    "stock_id": "stock_456",\n    "variant_id": "var_789",\n    "warehouse_id": "wh_101",\n    "available_quantity": 15,\n    "min_stock": 20,\n    "reorder_point": 30,\n    "shortage": 5,\n    "alert_level": "critical"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Consumidores:"})," Notification Service, Purchasing Service"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorystockdepleted",children:"inventory.stock.depleted"}),"\n",(0,s.jsx)(n.p,{children:"Stock agotado completamente."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.stock.depleted",\n  "data": {\n    "stock_id": "stock_456",\n    "variant_id": "var_789",\n    "warehouse_id": "wh_101",\n    "last_movement_at": "2025-11-23T14:00:00Z"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"movement-events",children:"Movement Events"}),"\n",(0,s.jsx)(n.h3,{id:"inventorymovementcreated",children:"inventory.movement.created"}),"\n",(0,s.jsx)(n.p,{children:"Movimiento de inventario registrado."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.movement.created",\n  "data": {\n    "movement_id": "mov_123",\n    "stock_id": "stock_456",\n    "variant_id": "var_789",\n    "warehouse_id": "wh_101",\n    "type": "in",\n    "reason": "purchase",\n    "quantity_change": 50,\n    "reference_id": "po_789",\n    "reference_type": "purchase_order"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorymovementin",children:"inventory.movement.in"}),"\n",(0,s.jsx)(n.p,{children:"Entrada de mercanc\xeda."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.movement.in",\n  "data": {\n    "movement_id": "mov_123",\n    "variant_id": "var_789",\n    "warehouse_id": "wh_101",\n    "quantity": 50,\n    "lot_number": "LOT-2025-001",\n    "expiry_date": "2026-12-31"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorymovementout",children:"inventory.movement.out"}),"\n",(0,s.jsx)(n.p,{children:"Salida de mercanc\xeda."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.movement.out",\n  "data": {\n    "movement_id": "mov_456",\n    "variant_id": "var_789",\n    "warehouse_id": "wh_101",\n    "quantity": -25,\n    "reason": "sale",\n    "order_id": "order_456"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"warehouse-events",children:"Warehouse Events"}),"\n",(0,s.jsx)(n.h3,{id:"inventorywarehousecreated",children:"inventory.warehouse.created"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.warehouse.created",\n  "data": {\n    "warehouse_id": "wh_new789",\n    "name": "Bodega Sucursal Este",\n    "code": "WH-005",\n    "local_id": "local_789",\n    "warehouse_type": "branch"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorywarehouseupdated",children:"inventory.warehouse.updated"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.warehouse.updated",\n  "data": {\n    "warehouse_id": "wh_123",\n    "changes": {\n      "name": "Bodega Principal - Actualizada",\n      "max_capacity": 12000\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorywarehousedeactivated",children:"inventory.warehouse.deactivated"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.warehouse.deactivated",\n  "data": {\n    "warehouse_id": "wh_123",\n    "reason": "Mantenimiento programado",\n    "deactivated_by": "user_789"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"transfer-events",children:"Transfer Events"}),"\n",(0,s.jsx)(n.h3,{id:"inventorytransfercreated",children:"inventory.transfer.created"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.created",\n  "data": {\n    "transfer_id": "trans_123",\n    "from_warehouse_id": "wh_001",\n    "to_warehouse_id": "wh_002",\n    "items_count": 5,\n    "total_quantity": 150,\n    "status": "pending"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorytransferapproved",children:"inventory.transfer.approved"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.approved",\n  "data": {\n    "transfer_id": "trans_123",\n    "approved_by": "user_789",\n    "approval_date": "2025-11-23T14:00:00Z"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorytransferin_transit",children:"inventory.transfer.in_transit"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.in_transit",\n  "data": {\n    "transfer_id": "trans_123",\n    "shipped_date": "2025-11-24T08:00:00Z",\n    "items_shipped": 5,\n    "total_quantity_sent": 145\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorytransferreceived",children:"inventory.transfer.received"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.received",\n  "data": {\n    "transfer_id": "trans_123",\n    "received_date": "2025-11-25T10:00:00Z",\n    "items_received": 5,\n    "total_quantity_received": 140,\n    "has_discrepancies": true,\n    "discrepancies": [\n      {\n        "variant_id": "var_457",\n        "sent": 95,\n        "received": 90,\n        "difference": -5\n      }\n    ]\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventorytransfercancelled",children:"inventory.transfer.cancelled"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.cancelled",\n  "data": {\n    "transfer_id": "trans_123",\n    "reason": "Stock insuficiente en origen",\n    "cancelled_by": "user_456"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"adjustment-events",children:"Adjustment Events"}),"\n",(0,s.jsx)(n.h3,{id:"inventoryadjustmentcreated",children:"inventory.adjustment.created"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.adjustment.created",\n  "data": {\n    "adjustment_id": "adj_123",\n    "stock_id": "stock_456",\n    "variant_id": "var_789",\n    "adjustment_type": "negative",\n    "quantity_change": -5,\n    "reason": "damaged",\n    "status": "pending"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventoryadjustmentapproved",children:"inventory.adjustment.approved"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.adjustment.approved",\n  "data": {\n    "adjustment_id": "adj_123",\n    "approved_by": "user_789",\n    "approval_date": "2025-11-23T14:00:00Z",\n    "will_auto_apply": true\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventoryadjustmentrejected",children:"inventory.adjustment.rejected"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.adjustment.rejected",\n  "data": {\n    "adjustment_id": "adj_123",\n    "rejected_by": "user_789",\n    "rejection_reason": "Falta evidencia"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"inventoryadjustmentapplied",children:"inventory.adjustment.applied"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.adjustment.applied",\n  "data": {\n    "adjustment_id": "adj_123",\n    "stock_id": "stock_456",\n    "quantity_before": 150,\n    "quantity_after": 145,\n    "movement_id": "mov_789"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"resumen-de-eventos",children:"Resumen de Eventos"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Categor\xeda"}),(0,s.jsx)(n.th,{children:"Total"}),(0,s.jsx)(n.th,{children:"Eventos"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Stock"}),(0,s.jsx)(n.td,{children:"5"}),(0,s.jsx)(n.td,{children:"updated, reserved, released, low_level, depleted"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Movements"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"created, in, out"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Warehouses"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"created, updated, deactivated"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Transfers"}),(0,s.jsx)(n.td,{children:"5"}),(0,s.jsx)(n.td,{children:"created, approved, in_transit, received, cancelled"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Adjustments"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"created, approved, rejected, applied"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Total"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"20"})}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"configuraci\xf3n-de-consumidores",children:"Configuraci\xf3n de Consumidores"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Ejemplo de suscripci\xf3n a eventos\nqueue_bindings = {\n    'catalog_inventory_queue': [\n        'inventory.stock.updated',\n        'inventory.stock.low_level',\n        'inventory.stock.depleted'\n    ],\n    'order_inventory_queue': [\n        'inventory.stock.reserved',\n        'inventory.stock.released',\n        'inventory.stock.updated'\n    ],\n    'notification_queue': [\n        'inventory.stock.low_level',\n        'inventory.stock.depleted',\n        'inventory.transfer.received'\n    ]\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./eventos-consumidos",children:"Eventos Consumidos"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./integraciones",children:"Integraciones"})}),"\n"]})]})}function v(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>d});var t=r(6540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);