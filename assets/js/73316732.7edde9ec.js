"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[7519],{6888:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"anexos/convenciones","title":"Convenciones de C\xf3digo","description":"Est\xe1ndares y convenciones de c\xf3digo utilizadas en zenLogic ERP.","source":"@site/docs/06-anexos/01-convenciones.md","sourceDirName":"06-anexos","slug":"/anexos/convenciones","permalink":"/zenlogic/anexos/convenciones","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/06-anexos/01-convenciones.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docs","previous":{"title":"Glosario de T\xe9rminos","permalink":"/zenlogic/anexos/glosario"},"next":{"title":"Referencias Externas","permalink":"/zenlogic/anexos/referencias"}}');var a=s(4848),i=s(8453);const t={sidebar_position:2},o="Convenciones de C\xf3digo",d={},c=[{value:"Lenguaje y Estilo",id:"lenguaje-y-estilo",level:2},{value:"Python",id:"python",level:3},{value:"Formateo",id:"formateo",level:3},{value:"Type Hints",id:"type-hints",level:3},{value:"Estructura de Archivos",id:"estructura-de-archivos",level:2},{value:"Nombres de Archivos",id:"nombres-de-archivos",level:3},{value:"Organizaci\xf3n de Imports",id:"organizaci\xf3n-de-imports",level:3},{value:"Estructura de M\xf3dulos",id:"estructura-de-m\xf3dulos",level:3},{value:"Naming Conventions",id:"naming-conventions",level:2},{value:"Variables y Funciones",id:"variables-y-funciones",level:3},{value:"Clases",id:"clases",level:3},{value:"Constantes",id:"constantes",level:3},{value:"Variables Privadas",id:"variables-privadas",level:3},{value:"Base de Datos",id:"base-de-datos",level:2},{value:"Nombres de Tablas",id:"nombres-de-tablas",level:3},{value:"Nombres de Columnas",id:"nombres-de-columnas",level:3},{value:"Constraints",id:"constraints",level:3},{value:"\xcdndices",id:"\xedndices",level:3},{value:"APIs REST",id:"apis-rest",level:2},{value:"Endpoints",id:"endpoints",level:3},{value:"Request/Response",id:"requestresponse",level:3},{value:"Status Codes",id:"status-codes",level:3},{value:"Eventos",id:"eventos",level:2},{value:"Routing Keys",id:"routing-keys",level:3},{value:"Event Payload",id:"event-payload",level:3},{value:"Testing",id:"testing",level:2},{value:"Nombres de Tests",id:"nombres-de-tests",level:3},{value:"Fixtures",id:"fixtures",level:3},{value:"Documentaci\xf3n",id:"documentaci\xf3n",level:2},{value:"Docstrings",id:"docstrings",level:3},{value:"Comentarios",id:"comentarios",level:3},{value:"Git",id:"git",level:2},{value:"Commits",id:"commits",level:3},{value:"Branches",id:"branches",level:3},{value:"Seguridad",id:"seguridad",level:2},{value:"Secretos",id:"secretos",level:3},{value:"SQL Injection",id:"sql-injection",level:3},{value:"Performance",id:"performance",level:2},{value:"N+1 Queries",id:"n1-queries",level:3},{value:"Cache Keys",id:"cache-keys",level:3},{value:"Logging",id:"logging",level:2},{value:"Niveles",id:"niveles",level:3},{value:"Structured Logging",id:"structured-logging",level:3},{value:"Referencias",id:"referencias",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"convenciones-de-c\xf3digo",children:"Convenciones de C\xf3digo"})}),"\n",(0,a.jsx)(n.p,{children:"Est\xe1ndares y convenciones de c\xf3digo utilizadas en zenLogic ERP."}),"\n",(0,a.jsx)(n.h2,{id:"lenguaje-y-estilo",children:"Lenguaje y Estilo"}),"\n",(0,a.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,a.jsxs)(n.p,{children:["Seguimos ",(0,a.jsx)(n.strong,{children:"PEP 8"})," con las siguientes especificaciones:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Nombres descriptivos, snake_case\nasync def get_user_permissions(user_id: str) -> set[str]:\n    """Obtener permisos de usuario."""\n    pass\n\n# \u274c MAL: Nombres gen\xe9ricos, camelCase\nasync def getPerms(id: str) -> set:\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"formateo",children:"Formateo"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Usamos Black para formateo autom\xe1tico\nblack app/ --line-length 100\n\n# isort para imports\nisort app/ --profile black\n\n# flake8 para linting\nflake8 app/ --max-line-length 100\n"})}),"\n",(0,a.jsx)(n.h3,{id:"type-hints",children:"Type Hints"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 SIEMPRE usar type hints\nfrom typing import Optional, List, Dict\nfrom uuid import UUID\n\nasync def create_product(\n    product_data: ProductCreate,\n    user_id: UUID,\n    db: AsyncSession\n) -> Product:\n    """Crear producto."""\n    pass\n\n# \u274c Evitar c\xf3digo sin tipos\nasync def create_product(product_data, user_id, db):\n    pass\n'})}),"\n",(0,a.jsx)(n.h2,{id:"estructura-de-archivos",children:"Estructura de Archivos"}),"\n",(0,a.jsx)(n.h3,{id:"nombres-de-archivos",children:"Nombres de Archivos"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u2705 BIEN: snake_case\nuser_service.py\nproduct_repository.py\nauth_dependencies.py\n\n# \u274c MAL: camelCase o PascalCase\nUserService.py\nproductRepository.py\n"})}),"\n",(0,a.jsx)(n.h3,{id:"organizaci\xf3n-de-imports",children:"Organizaci\xf3n de Imports"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# 1. Standard library\nimport asyncio\nimport json\nfrom datetime import datetime\nfrom typing import Optional\nfrom uuid import UUID, uuid4\n\n# 2. Third-party\nfrom fastapi import APIRouter, Depends, HTTPException\nfrom sqlalchemy import select\nfrom pydantic import BaseModel\n\n# 3. Local\nfrom app.config import settings\nfrom app.database import get_db\nfrom app.models.user import User\nfrom app.schemas.user import UserCreate, UserResponse\n"})}),"\n",(0,a.jsx)(n.h3,{id:"estructura-de-m\xf3dulos",children:"Estructura de M\xf3dulos"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"app/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 main.py                 # Entry point\n\u251c\u2500\u2500 config.py              # Configuraci\xf3n\n\u251c\u2500\u2500 database.py            # DB setup\n\u2502\n\u251c\u2500\u2500 api/                   # Routers\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 deps.py           # Dependencies compartidas\n\u2502   \u2514\u2500\u2500 v1/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 users.py\n\u2502       \u2514\u2500\u2500 products.py\n\u2502\n\u251c\u2500\u2500 models/                # SQLAlchemy models\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2514\u2500\u2500 product.py\n\u2502\n\u251c\u2500\u2500 schemas/               # Pydantic schemas\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2514\u2500\u2500 product.py\n\u2502\n\u251c\u2500\u2500 services/              # Business logic\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 user_service.py\n\u2502   \u2514\u2500\u2500 product_service.py\n\u2502\n\u251c\u2500\u2500 repositories/          # Data access\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 user_repository.py\n\u2502   \u2514\u2500\u2500 product_repository.py\n\u2502\n\u251c\u2500\u2500 events/                # Event handling\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 publisher.py\n\u2502   \u2514\u2500\u2500 consumer.py\n\u2502\n\u2514\u2500\u2500 utils/                 # Utilidades\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 helpers.py\n"})}),"\n",(0,a.jsx)(n.h2,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,a.jsx)(n.h3,{id:"variables-y-funciones",children:"Variables y Funciones"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 snake_case para variables y funciones\nuser_id = "123"\norganization_name = "Acme Corp"\n\nasync def get_product_by_sku(sku: str) -> Optional[Product]:\n    pass\n\n# \u274c camelCase\nuserId = "123"\norganizationName = "Acme Corp"\n\nasync def getProductBySku(sku: str):\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"clases",children:"Clases"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# \u2705 PascalCase para clases\nclass UserService:\n    pass\n\nclass ProductRepository:\n    pass\n\nclass AuthDependency:\n    pass\n\n# \u274c snake_case o camelCase\nclass user_service:\n    pass\n\nclass productRepository:\n    pass\n"})}),"\n",(0,a.jsx)(n.h3,{id:"constantes",children:"Constantes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 UPPER_SNAKE_CASE para constantes\nMAX_PAGE_SIZE = 100\nDEFAULT_CACHE_TTL = 300\nJWT_ALGORITHM = "RS256"\n\n# \u274c Otros formatos\nmaxPageSize = 100\ndefault_cache_ttl = 300\n'})}),"\n",(0,a.jsx)(n.h3,{id:"variables-privadas",children:"Variables Privadas"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"class UserService:\n    def __init__(self):\n        # \u2705 Prefijo _ para variables privadas\n        self._cache = {}\n        self._db = None\n\n    # \u2705 Prefijo _ para m\xe9todos privados\n    async def _validate_permissions(self, user_id: str):\n        pass\n\n    # \u2705 M\xe9todos p\xfablicos sin prefijo\n    async def get_user(self, user_id: str):\n        pass\n"})}),"\n",(0,a.jsx)(n.h2,{id:"base-de-datos",children:"Base de Datos"}),"\n",(0,a.jsx)(n.h3,{id:"nombres-de-tablas",children:"Nombres de Tablas"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"-- \u2705 BIEN: plural, snake_case\nCREATE TABLE users (...);\nCREATE TABLE products (...);\nCREATE TABLE product_variants (...);\n\n-- \u274c MAL: singular o camelCase\nCREATE TABLE user (...);\nCREATE TABLE Product (...);\nCREATE TABLE productVariant (...);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"nombres-de-columnas",children:"Nombres de Columnas"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"-- \u2705 BIEN: snake_case, descriptivo\nCREATE TABLE products (\n    id UUID PRIMARY KEY,\n    organization_id UUID NOT NULL,\n    created_at TIMESTAMP DEFAULT NOW(),\n    base_price DECIMAL(10, 2)\n);\n\n-- \u274c MAL: camelCase o abreviado\nCREATE TABLE products (\n    id UUID PRIMARY KEY,\n    orgId UUID NOT NULL,\n    createdAt TIMESTAMP,\n    price DECIMAL(10, 2)\n);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"constraints",children:"Constraints"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"-- \u2705 BIEN: Nombres descriptivos\nALTER TABLE products\n    ADD CONSTRAINT fk_products_organization\n    FOREIGN KEY (organization_id)\n    REFERENCES organizations(id);\n\nALTER TABLE products\n    ADD CONSTRAINT uq_products_org_sku\n    UNIQUE (organization_id, sku);\n\n-- \u274c MAL: Nombres auto-generados\nALTER TABLE products\n    ADD CONSTRAINT fk_123\n    FOREIGN KEY (organization_id)\n    REFERENCES organizations(id);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\xedndices",children:"\xcdndices"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"-- \u2705 BIEN: idx_{tabla}_{columnas}\nCREATE INDEX idx_products_organization_id ON products(organization_id);\nCREATE INDEX idx_products_sku ON products(sku);\nCREATE INDEX idx_products_org_sku ON products(organization_id, sku);\n\n-- \u274c MAL: Nombres gen\xe9ricos\nCREATE INDEX index1 ON products(organization_id);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"apis-rest",children:"APIs REST"}),"\n",(0,a.jsx)(n.h3,{id:"endpoints",children:"Endpoints"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# \u2705 BIEN: Nombres descriptivos, plurales\nGET    /api/v1/products              # Listar\nGET    /api/v1/products/{id}         # Obtener uno\nPOST   /api/v1/products              # Crear\nPUT    /api/v1/products/{id}         # Actualizar completo\nPATCH  /api/v1/products/{id}         # Actualizar parcial\nDELETE /api/v1/products/{id}         # Eliminar\n\n# Sub-recursos\nGET    /api/v1/products/{id}/variants\nPOST   /api/v1/products/{id}/variants\n\n# \u274c MAL: Verbos en URL\nPOST /api/v1/create-product\nGET  /api/v1/get-product/{id}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"requestresponse",children:"Request/Response"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Schemas expl\xedcitos\nclass ProductCreate(BaseModel):\n    name: str\n    sku: str\n    base_price: Decimal\n    description: Optional[str] = None\n\nclass ProductResponse(BaseModel):\n    id: UUID\n    name: str\n    sku: str\n    base_price: Decimal\n    organization_id: UUID\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\n@router.post("/products", response_model=ProductResponse, status_code=201)\nasync def create_product(\n    product: ProductCreate,\n    current_user: User = Depends(get_current_user),\n    db: AsyncSession = Depends(get_db)\n) -> ProductResponse:\n    """Crear nuevo producto."""\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"status-codes",children:"Status Codes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 Usar status codes apropiados\nfrom fastapi import status\n\n# 200 OK - Request exitoso\nreturn product\n\n# 201 Created - Recurso creado\nreturn JSONResponse(content=product, status_code=status.HTTP_201_CREATED)\n\n# 204 No Content - Eliminaci\xf3n exitosa\nreturn Response(status_code=status.HTTP_204_NO_CONTENT)\n\n# 400 Bad Request - Input inv\xe1lido\nraise HTTPException(\n    status_code=status.HTTP_400_BAD_REQUEST,\n    detail="Invalid SKU format"\n)\n\n# 401 Unauthorized - No autenticado\nraise HTTPException(\n    status_code=status.HTTP_401_UNAUTHORIZED,\n    detail="Invalid credentials"\n)\n\n# 403 Forbidden - No autorizado\nraise HTTPException(\n    status_code=status.HTTP_403_FORBIDDEN,\n    detail="Insufficient permissions"\n)\n\n# 404 Not Found - Recurso no existe\nraise HTTPException(\n    status_code=status.HTTP_404_NOT_FOUND,\n    detail="Product not found"\n)\n\n# 409 Conflict - Conflicto (ej: SKU duplicado)\nraise HTTPException(\n    status_code=status.HTTP_409_CONFLICT,\n    detail="SKU already exists"\n)\n\n# 500 Internal Server Error - Error del servidor\nraise HTTPException(\n    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,\n    detail="Internal error"\n)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"eventos",children:"Eventos"}),"\n",(0,a.jsx)(n.h3,{id:"routing-keys",children:"Routing Keys"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 Formato: {service}.{entity}.{action}\n"auth.user.created"\n"auth.user.updated"\n"auth.user.deactivated"\n"auth.local.created"\n"catalog.product.created"\n"catalog.product.updated"\n"catalog.variant.created"\n\n# \u274c Formatos inconsistentes\n"user_created"\n"AuthUserCreated"\n"create-user"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"event-payload",children:"Event Payload"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 Estructura consistente\nevent = {\n    "event_id": str(uuid4()),\n    "event_type": "catalog.product.created",\n    "timestamp": datetime.utcnow().isoformat(),\n    "service": "catalog-service",\n    "version": "1.0",\n    "payload": {\n        "product_id": "...",\n        "organization_id": "...",\n        "name": "...",\n        "sku": "..."\n    },\n    "metadata": {\n        "user_id": "...",\n        "correlation_id": "..."\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,a.jsx)(n.h3,{id:"nombres-de-tests",children:"Nombres de Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# \u2705 BIEN: test_{funci\xf3n}_{escenario}_{resultado_esperado}\ndef test_create_product_with_valid_data_returns_201():\n    pass\n\ndef test_create_product_with_duplicate_sku_raises_conflict():\n    pass\n\ndef test_get_product_with_invalid_id_returns_404():\n    pass\n\n# \u274c MAL: Nombres gen\xe9ricos\ndef test_product():\n    pass\n\ndef test_1():\n    pass\n"})}),"\n",(0,a.jsx)(n.h3,{id:"fixtures",children:"Fixtures"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Fixtures reutilizables y descriptivos\n@pytest.fixture\nasync def db_session():\n    """Sesi\xf3n de DB para testing."""\n    pass\n\n@pytest.fixture\nasync def test_organization():\n    """Organizaci\xf3n de prueba."""\n    pass\n\n@pytest.fixture\nasync def test_user(test_organization):\n    """Usuario de prueba con rol admin."""\n    pass\n'})}),"\n",(0,a.jsx)(n.h2,{id:"documentaci\xf3n",children:"Documentaci\xf3n"}),"\n",(0,a.jsx)(n.h3,{id:"docstrings",children:"Docstrings"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Google-style docstrings\nasync def create_product(\n    product_data: ProductCreate,\n    user_id: UUID,\n    db: AsyncSession\n) -> Product:\n    """\n    Crear un nuevo producto.\n\n    Args:\n        product_data: Datos del producto a crear\n        user_id: ID del usuario que crea el producto\n        db: Sesi\xf3n de base de datos\n\n    Returns:\n        Producto creado con ID asignado\n\n    Raises:\n        HTTPException: Si el SKU ya existe\n        ValueError: Si los datos son inv\xe1lidos\n    """\n    pass\n\n# \u274c MAL: Sin docstring o incompleto\nasync def create_product(product_data, user_id, db):\n    """Crear producto."""\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"comentarios",children:"Comentarios"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Comentarios \xfatiles que explican el "por qu\xe9"\n# Usamos RLS en lugar de filtros manuales para garantizar\n# aislamiento de tenants incluso si hay bugs en queries\nawait db.execute(\n    text("SET LOCAL app.current_tenant = :tid"),\n    {"tid": str(organization_id)}\n)\n\n# \u274c MAL: Comentarios obvios que explican el "qu\xe9"\n# Configurar el tenant\nawait db.execute(...)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"git",children:"Git"}),"\n",(0,a.jsx)(n.h3,{id:"commits",children:"Commits"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u2705 BIEN: Mensajes descriptivos en imperativo\ngit commit -m "Add product creation endpoint"\ngit commit -m "Fix SKU validation for special characters"\ngit commit -m "Refactor user service to use repository pattern"\n\n# \u274c MAL: Mensajes gen\xe9ricos\ngit commit -m "changes"\ngit commit -m "fix bug"\ngit commit -m "update"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"branches",children:"Branches"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u2705 BIEN: Formato {tipo}/{descripci\xf3n}\nfeature/user-authentication\nbugfix/sku-validation\nhotfix/cache-invalidation\nrefactor/repository-pattern\n\n# \u274c MAL: Nombres gen\xe9ricos\ndev\ntest\nbranch1\n"})}),"\n",(0,a.jsx)(n.h2,{id:"seguridad",children:"Seguridad"}),"\n",(0,a.jsx)(n.h3,{id:"secretos",children:"Secretos"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Usar variables de entorno\nfrom app.config import settings\n\nDATABASE_URL = settings.database_url\nJWT_SECRET = settings.jwt_secret_key\n\n# \u274c MAL: Hardcodear secretos\nDATABASE_URL = "postgresql://user:password@localhost/db"\nJWT_SECRET = "my-secret-key-123"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"sql-injection",children:"SQL Injection"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Usar par\xe1metros\nresult = await db.execute(\n    select(Product).where(Product.sku == sku)\n)\n\n# Con raw SQL, usar par\xe1metros\nresult = await db.execute(\n    text("SELECT * FROM products WHERE sku = :sku"),\n    {"sku": sku}\n)\n\n# \u274c MAL: Concatenar strings\nquery = f"SELECT * FROM products WHERE sku = \'{sku}\'"\nresult = await db.execute(text(query))\n'})}),"\n",(0,a.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,a.jsx)(n.h3,{id:"n1-queries",children:"N+1 Queries"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# \u2705 BIEN: Usar joinedload\nfrom sqlalchemy.orm import selectinload\n\nresult = await db.execute(\n    select(Product)\n    .options(selectinload(Product.variants))\n    .where(Product.organization_id == org_id)\n)\n\n# \u274c MAL: Lazy loading en loop\nproducts = await db.execute(select(Product))\nfor product in products:\n    # Esto genera N queries adicionales\n    variants = await product.variants\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cache-keys",children:"Cache Keys"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Namespace claro y consistente\ncache_key = f"product:{product_id}"\ncache_key = f"org:{org_id}:locals"\ncache_key = f"permissions:{user_id}"\n\n# \u274c MAL: Keys sin namespace\ncache_key = product_id\ncache_key = f"{org_id}_locals"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,a.jsx)(n.h3,{id:"niveles",children:"Niveles"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import logging\n\nlogger = logging.getLogger(__name__)\n\n# DEBUG: Informaci\xf3n detallada para debugging\nlogger.debug(f"Processing product: {product_id}")\n\n# INFO: Eventos normales de negocio\nlogger.info(f"Product created: {product_id}")\n\n# WARNING: Situaciones anormales pero manejables\nlogger.warning(f"Cache miss for product: {product_id}")\n\n# ERROR: Errores que requieren atenci\xf3n\nlogger.error(f"Failed to create product: {e}", exc_info=True)\n\n# CRITICAL: Errores cr\xedticos del sistema\nlogger.critical("Database connection lost")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"structured-logging",children:"Structured Logging"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# \u2705 BIEN: Usar extra para structured logs\nlogger.info(\n    "Product created",\n    extra={\n        "product_id": product_id,\n        "organization_id": org_id,\n        "user_id": user_id\n    }\n)\n\n# \u274c MAL: Concatenar strings\nlogger.info(f"Product {product_id} created by user {user_id}")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://pep8.org/",children:"PEP 8 - Style Guide for Python Code"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://google.github.io/styleguide/pyguide.html",children:"Google Python Style Guide"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://fastapi.tiangolo.com/tutorial/",children:"FastAPI Best Practices"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://docs.sqlalchemy.org/en/20/orm/queryguide/index.html",children:"SQLAlchemy Best Practices"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var r=s(6540);const a={},i=r.createContext(a);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);