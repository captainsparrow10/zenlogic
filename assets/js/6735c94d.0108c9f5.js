"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[6498],{4137:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"microservicios/inventory-service/overview","title":"Inventory Service - Overview","description":"Servicio de gesti\xf3n de inventario multilocal con tracking de stock, movimientos, transferencias y ubicaciones f\xedsicas.","source":"@site/docs/02-microservicios/inventory-service/01-overview.md","sourceDirName":"02-microservicios/inventory-service","slug":"/microservicios/inventory-service/overview","permalink":"/zenlogic/microservicios/inventory-service/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/inventory-service/01-overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Migraciones de Base de Datos","permalink":"/zenlogic/microservicios/catalog-service/migraciones"},"next":{"title":"Arquitectura","permalink":"/zenlogic/microservicios/inventory-service/arquitectura"}}');var r=i(4848),d=i(8453);const a={sidebar_position:1},c="Inventory Service - Overview",l={},t=[{value:"Descripci\xf3n",id:"descripci\xf3n",level:2},{value:"Responsabilidades Principales",id:"responsabilidades-principales",level:3},{value:"Caracter\xedsticas Principales",id:"caracter\xedsticas-principales",level:2},{value:"Stock Tracking Multi-Nivel",id:"stock-tracking-multi-nivel",level:3},{value:"Estrategias de Inventario",id:"estrategias-de-inventario",level:3},{value:"Control de Calidad",id:"control-de-calidad",level:3},{value:"Arquitectura T\xe9cnica",id:"arquitectura-t\xe9cnica",level:2},{value:"Stack Tecnol\xf3gico",id:"stack-tecnol\xf3gico",level:3},{value:"Puertos",id:"puertos",level:3},{value:"Variables de Entorno",id:"variables-de-entorno",level:3},{value:"Integraciones",id:"integraciones",level:2},{value:"Con Catalog Service",id:"con-catalog-service",level:3},{value:"Con Order Service",id:"con-order-service",level:3},{value:"Modelo de Datos Resumen",id:"modelo-de-datos-resumen",level:2},{value:"Entidades Principales",id:"entidades-principales",level:3},{value:"Relaciones Clave",id:"relaciones-clave",level:3},{value:"Eventos Publicados",id:"eventos-publicados",level:2},{value:"Stock Events",id:"stock-events",level:3},{value:"Movement Events",id:"movement-events",level:3},{value:"Transfer Events",id:"transfer-events",level:3},{value:"Adjustment Events",id:"adjustment-events",level:3},{value:"Eventos Consumidos",id:"eventos-consumidos",level:2},{value:"Casos de Uso Principales",id:"casos-de-uso-principales",level:2},{value:"1. Consulta de Stock Disponible",id:"1-consulta-de-stock-disponible",level:3},{value:"2. Registrar Entrada de Mercanc\xeda",id:"2-registrar-entrada-de-mercanc\xeda",level:3},{value:"3. Crear Transferencia entre Bodegas",id:"3-crear-transferencia-entre-bodegas",level:3},{value:"4. Ajuste de Inventario",id:"4-ajuste-de-inventario",level:3},{value:"Seguridad y Permisos",id:"seguridad-y-permisos",level:2},{value:"Roles y Permisos",id:"roles-y-permisos",level:3},{value:"Validaciones de Seguridad",id:"validaciones-de-seguridad",level:3},{value:"M\xe9tricas y Monitoring",id:"m\xe9tricas-y-monitoring",level:2},{value:"KPIs Principales",id:"kpis-principales",level:3},{value:"Health Checks",id:"health-checks",level:3},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"inventory-service---overview",children:"Inventory Service - Overview"})}),"\n",(0,r.jsx)(n.p,{children:"Servicio de gesti\xf3n de inventario multilocal con tracking de stock, movimientos, transferencias y ubicaciones f\xedsicas."}),"\n",(0,r.jsx)(n.h2,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,r.jsxs)(n.p,{children:["El ",(0,r.jsx)(n.strong,{children:"Inventory Service"})," es el microservicio responsable de gestionar todo el inventario f\xedsico del sistema ERP. Proporciona control en tiempo real sobre el stock disponible, movimientos de mercanc\xeda, transferencias entre bodegas, ajustes de inventario y ubicaciones f\xedsicas dentro de los almacenes."]}),"\n",(0,r.jsx)(n.h3,{id:"responsabilidades-principales",children:"Responsabilidades Principales"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Gesti\xf3n de Stock"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Control de stock por variante, bodega y local"}),"\n",(0,r.jsx)(n.li,{children:"Tracking de estados: disponible, reservado, da\xf1ado, en tr\xe1nsito"}),"\n",(0,r.jsx)(n.li,{children:"Alertas autom\xe1ticas por stock m\xednimo/m\xe1ximo"}),"\n",(0,r.jsx)(n.li,{children:"Soporte para lotes (lot tracking) con fechas de vencimiento"}),"\n",(0,r.jsx)(n.li,{children:"Soporte para n\xfameros de serie (serial tracking)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Movimientos de Inventario"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Registro de todas las transacciones (entrada, salida, transferencia, ajuste)"}),"\n",(0,r.jsx)(n.li,{children:"Historial completo de movimientos con trazabilidad"}),"\n",(0,r.jsx)(n.li,{children:"Motivos y notas en cada movimiento"}),"\n",(0,r.jsx)(n.li,{children:"Integraci\xf3n con Order Service para reservas autom\xe1ticas"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Bodegas y Ubicaciones"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CRUD de bodegas con capacidad y configuraci\xf3n"}),"\n",(0,r.jsx)(n.li,{children:"Ubicaciones f\xedsicas jer\xe1rquicas (pasillo \u2192 estante \u2192 bin)"}),"\n",(0,r.jsx)(n.li,{children:"Asignaci\xf3n de bodegas a locales espec\xedficos"}),"\n",(0,r.jsx)(n.li,{children:"Control de capacidad y ocupaci\xf3n"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Transferencias"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Transferencias entre bodegas con estados (pending, in_transit, received, cancelled)"}),"\n",(0,r.jsx)(n.li,{children:"Tracking de mercanc\xeda en tr\xe1nsito"}),"\n",(0,r.jsx)(n.li,{children:"Aprobaciones y validaciones de transferencias"}),"\n",(0,r.jsx)(n.li,{children:"Notificaciones autom\xe1ticas"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Ajustes de Inventario"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ajustes positivos y negativos con motivos"}),"\n",(0,r.jsx)(n.li,{children:"Auditor\xeda completa de ajustes"}),"\n",(0,r.jsx)(n.li,{children:"Conciliaci\xf3n de inventario f\xedsico vs sistema"}),"\n",(0,r.jsx)(n.li,{children:"Aprobaciones para ajustes significativos"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"caracter\xedsticas-principales",children:"Caracter\xedsticas Principales"}),"\n",(0,r.jsx)(n.h3,{id:"stock-tracking-multi-nivel",children:"Stock Tracking Multi-Nivel"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[Stock Total] --\x3e B[Disponible]\n    A --\x3e C[Reservado]\n    A --\x3e D[Da\xf1ado]\n    A --\x3e E[En Tr\xe1nsito]\n\n    B --\x3e F[Pedidos Online]\n    C --\x3e G[Orden Confirmada]\n    D --\x3e H[Para Devoluci\xf3n]\n    E --\x3e I[Transferencia]"}),"\n",(0,r.jsx)(n.h3,{id:"estrategias-de-inventario",children:"Estrategias de Inventario"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"FIFO"})," (First In, First Out) - Por defecto para productos perecederos"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"LIFO"})," (Last In, First Out) - Para productos no perecederos"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"FEFO"})," (First Expired, First Out) - Autom\xe1tico para productos con fecha de vencimiento"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Serial Tracking"})," - Para productos individualizables (electr\xf3nicos, veh\xedculos)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"control-de-calidad",children:"Control de Calidad"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Estados de stock: good, damaged, expired, quarantine, returned"}),"\n",(0,r.jsx)(n.li,{children:"Flujos de inspecci\xf3n y aprobaci\xf3n"}),"\n",(0,r.jsx)(n.li,{children:"Registro de motivos de da\xf1os y p\xe9rdidas"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"arquitectura-t\xe9cnica",children:"Arquitectura T\xe9cnica"}),"\n",(0,r.jsx)(n.h3,{id:"stack-tecnol\xf3gico",children:"Stack Tecnol\xf3gico"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Componente"}),(0,r.jsx)(n.th,{children:"Tecnolog\xeda"}),(0,r.jsx)(n.th,{children:"Versi\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Runtime"}),(0,r.jsx)(n.td,{children:"Python"}),(0,r.jsx)(n.td,{children:"3.11+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Framework"}),(0,r.jsx)(n.td,{children:"FastAPI"}),(0,r.jsx)(n.td,{children:"0.104+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ORM"}),(0,r.jsx)(n.td,{children:"SQLAlchemy"}),(0,r.jsx)(n.td,{children:"2.0+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Database"}),(0,r.jsx)(n.td,{children:"PostgreSQL"}),(0,r.jsx)(n.td,{children:"15+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cache"}),(0,r.jsx)(n.td,{children:"Redis"}),(0,r.jsx)(n.td,{children:"7.2+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Message Broker"}),(0,r.jsx)(n.td,{children:"RabbitMQ"}),(0,r.jsx)(n.td,{children:"3.12+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"gRPC"}),(0,r.jsx)(n.td,{children:"grpcio"}),(0,r.jsx)(n.td,{children:"1.59+"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"puertos",children:"Puertos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTTP REST API"}),": ",(0,r.jsx)(n.code,{children:"8003"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"gRPC"}),": ",(0,r.jsx)(n.code,{children:"50053"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Health Check"}),": ",(0,r.jsx)(n.code,{children:"8003/health"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Metrics"}),": ",(0,r.jsx)(n.code,{children:"8003/metrics"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"variables-de-entorno",children:"Variables de Entorno"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Database\nDATABASE_URL=postgresql://user:pass@localhost:5432/inventory_db\nDATABASE_POOL_SIZE=20\nDATABASE_MAX_OVERFLOW=40\n\n# Redis Cache\nREDIS_URL=redis://localhost:6379/2\nCACHE_TTL_STOCK=60          # Stock cache: 1 minuto\nCACHE_TTL_WAREHOUSE=3600    # Warehouse cache: 1 hora\n\n# RabbitMQ\nRABBITMQ_URL=amqp://guest:guest@localhost:5672/\nRABBITMQ_EXCHANGE=inventory_events\nRABBITMQ_QUEUE_STOCK=inventory_stock_updates\nRABBITMQ_QUEUE_MOVEMENTS=inventory_movements\n\n# gRPC Clients\nCATALOG_GRPC_HOST=localhost\nCATALOG_GRPC_PORT=50051\nORDER_GRPC_HOST=localhost\nORDER_GRPC_PORT=50054\n\n# Business Logic\nMIN_STOCK_ALERT_THRESHOLD=10\nLOW_STOCK_PERCENTAGE=0.2    # 20% del stock m\xe1ximo\nTRANSFER_AUTO_APPROVE=false\nADJUSTMENT_REQUIRE_APPROVAL=true\nMAX_ADJUSTMENT_PERCENTAGE=0.1  # 10% del stock actual\n"})}),"\n",(0,r.jsx)(n.h2,{id:"integraciones",children:"Integraciones"}),"\n",(0,r.jsx)(n.h3,{id:"con-catalog-service",children:"Con Catalog Service"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant IS as Inventory Service\n    participant CS as Catalog Service\n    participant RMQ as RabbitMQ\n\n    CS->>RMQ: variant.created\n    RMQ->>IS: Consume event\n    IS->>IS: Initialize stock record<br/>for all warehouses\n    IS->>RMQ: stock.initialized\n\n    CS->>RMQ: variant.deleted\n    RMQ->>IS: Consume event\n    IS->>IS: Validate stock = 0\n    IS->>IS: Archive stock records"}),"\n",(0,r.jsx)(n.h3,{id:"con-order-service",children:"Con Order Service"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant OS as Order Service\n    participant IS as Inventory Service\n    participant RMQ as RabbitMQ\n\n    OS->>IS: gRPC: ReserveStock(order_id, items)\n    IS->>IS: Validate availability\n    IS->>IS: Create reservation\n    IS->>OS: Reservation confirmed\n\n    OS->>RMQ: order.cancelled\n    RMQ->>IS: Consume event\n    IS->>IS: Release reservation\n    IS->>RMQ: stock.released"}),"\n",(0,r.jsx)(n.h2,{id:"modelo-de-datos-resumen",children:"Modelo de Datos Resumen"}),"\n",(0,r.jsx)(n.h3,{id:"entidades-principales",children:"Entidades Principales"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stock"})," - Stock por variante, bodega y local"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"StockMovement"})," - Historial de movimientos"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Warehouse"})," - Bodegas f\xedsicas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WarehouseLocation"})," - Ubicaciones dentro de bodegas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"StockTransfer"})," - Transferencias entre bodegas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"StockAdjustment"})," - Ajustes de inventario"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"relaciones-clave",children:"Relaciones Clave"}),"\n",(0,r.jsx)(n.mermaid,{value:"erDiagram\n    STOCK ||--o{ STOCK_MOVEMENT : has\n    STOCK }o--|| WAREHOUSE : stored_in\n    STOCK }o--|| VARIANT : tracks\n    WAREHOUSE ||--o{ WAREHOUSE_LOCATION : contains\n    STOCK_TRANSFER }o--|| WAREHOUSE : from_warehouse\n    STOCK_TRANSFER }o--|| WAREHOUSE : to_warehouse\n    STOCK_ADJUSTMENT }o--|| STOCK : adjusts"}),"\n",(0,r.jsx)(n.h2,{id:"eventos-publicados",children:"Eventos Publicados"}),"\n",(0,r.jsx)(n.h3,{id:"stock-events",children:"Stock Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.stock.updated"})," - Stock modificado"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.stock.reserved"})," - Stock reservado"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.stock.released"})," - Reserva liberada"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.stock.low_level"})," - Stock bajo m\xednimo"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.stock.depleted"})," - Stock agotado"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"movement-events",children:"Movement Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.movement.created"})," - Movimiento registrado"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.movement.in"})," - Entrada de mercanc\xeda"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.movement.out"})," - Salida de mercanc\xeda"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"transfer-events",children:"Transfer Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.transfer.created"})," - Transferencia iniciada"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.transfer.approved"})," - Transferencia aprobada"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.transfer.in_transit"})," - En tr\xe1nsito"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.transfer.received"})," - Recibida en destino"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.transfer.cancelled"})," - Transferencia cancelada"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"adjustment-events",children:"Adjustment Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.adjustment.created"})," - Ajuste creado"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.adjustment.approved"})," - Ajuste aprobado"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inventory.adjustment.applied"})," - Ajuste aplicado"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"eventos-consumidos",children:"Eventos Consumidos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"catalog.variant.created"})," - Inicializar stock para nueva variante"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"catalog.variant.deleted"})," - Archivar stock de variante eliminada"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"order.placed"})," - Reservar stock para orden"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"order.confirmed"})," - Confirmar reserva"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"order.cancelled"})," - Liberar stock reservado"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"order.shipped"})," - Descontar stock de bodega"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"casos-de-uso-principales",children:"Casos de Uso Principales"}),"\n",(0,r.jsx)(n.h3,{id:"1-consulta-de-stock-disponible",children:"1. Consulta de Stock Disponible"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"GET /api/v1/stock?variant_id=var_123&warehouse_id=wh_1&local_id=local_456\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Respuesta:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "data": {\n    "variant_id": "var_123",\n    "warehouse_id": "wh_1",\n    "total": 100,\n    "available": 85,\n    "reserved": 10,\n    "damaged": 3,\n    "in_transit": 2,\n    "min_stock": 20,\n    "max_stock": 200,\n    "alert_level": "normal"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-registrar-entrada-de-mercanc\xeda",children:"2. Registrar Entrada de Mercanc\xeda"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST /api/v1/movements\n{\n  "type": "in",\n  "variant_id": "var_123",\n  "warehouse_id": "wh_1",\n  "quantity": 50,\n  "lot_number": "LOT-2025-001",\n  "expiry_date": "2026-12-31",\n  "reason": "purchase_order",\n  "reference_id": "po_789",\n  "notes": "Proveedor XYZ - Factura 12345"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-crear-transferencia-entre-bodegas",children:"3. Crear Transferencia entre Bodegas"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST /api/v1/transfers\n{\n  "from_warehouse_id": "wh_1",\n  "to_warehouse_id": "wh_2",\n  "items": [\n    {\n      "variant_id": "var_123",\n      "quantity": 25,\n      "lot_number": "LOT-2025-001"\n    }\n  ],\n  "reason": "restock",\n  "notes": "Reabastecimiento Local 2"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-ajuste-de-inventario",children:"4. Ajuste de Inventario"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST /api/v1/adjustments\n{\n  "variant_id": "var_123",\n  "warehouse_id": "wh_1",\n  "quantity_change": -5,\n  "reason": "damaged",\n  "notes": "Productos da\xf1ados durante transporte interno",\n  "requires_approval": true\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"seguridad-y-permisos",children:"Seguridad y Permisos"}),"\n",(0,r.jsx)(n.h3,{id:"roles-y-permisos",children:"Roles y Permisos"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Rol"}),(0,r.jsx)(n.th,{children:"Stock"}),(0,r.jsx)(n.th,{children:"Movements"}),(0,r.jsx)(n.th,{children:"Transfers"}),(0,r.jsx)(n.th,{children:"Adjustments"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"inventory.viewer"})}),(0,r.jsx)(n.td,{children:"Read"}),(0,r.jsx)(n.td,{children:"Read"}),(0,r.jsx)(n.td,{children:"Read"}),(0,r.jsx)(n.td,{children:"Read"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"inventory.operator"})}),(0,r.jsx)(n.td,{children:"Read"}),(0,r.jsx)(n.td,{children:"Create, Read"}),(0,r.jsx)(n.td,{children:"Create, Read"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"inventory.manager"})}),(0,r.jsx)(n.td,{children:"All"}),(0,r.jsx)(n.td,{children:"All"}),(0,r.jsx)(n.td,{children:"All"}),(0,r.jsx)(n.td,{children:"Create, Read"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"inventory.admin"})}),(0,r.jsx)(n.td,{children:"All"}),(0,r.jsx)(n.td,{children:"All"}),(0,r.jsx)(n.td,{children:"All"}),(0,r.jsx)(n.td,{children:"All"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"validaciones-de-seguridad",children:"Validaciones de Seguridad"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Multi-tenancy estricto por ",(0,r.jsx)(n.code,{children:"organization_id"})]}),"\n",(0,r.jsx)(n.li,{children:"Validaci\xf3n de acceso a bodegas por local"}),"\n",(0,r.jsx)(n.li,{children:"Usuarios solo ven stock de sus locales asignados"}),"\n",(0,r.jsx)(n.li,{children:"Auditor\xeda completa de todos los movimientos"}),"\n",(0,r.jsx)(n.li,{children:"Aprobaciones requeridas para ajustes significativos"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"m\xe9tricas-y-monitoring",children:"M\xe9tricas y Monitoring"}),"\n",(0,r.jsx)(n.h3,{id:"kpis-principales",children:"KPIs Principales"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stock Accuracy Rate"})," - Precisi\xf3n del inventario"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stock Turnover"})," - Rotaci\xf3n de inventario"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fill Rate"})," - Tasa de cumplimiento de \xf3rdenes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Carrying Cost"})," - Costo de mantenimiento"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stockout Frequency"})," - Frecuencia de agotamiento"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Basic health\nGET /health\n\n# Detailed readiness\nGET /health/ready\n\n# Database connectivity\nGET /health/db\n\n# Cache connectivity\nGET /health/cache\n"})}),"\n",(0,r.jsx)(n.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"./modelo-datos",children:"Modelo de Datos"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"./arquitectura",children:"Arquitectura"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"./api-stock",children:"API: Stock"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"./api-movements",children:"API: Movements"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"./api-warehouses",children:"API: Warehouses"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var s=i(6540);const r={},d=s.createContext(r);function a(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);