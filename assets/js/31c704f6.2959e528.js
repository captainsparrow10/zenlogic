"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[9509],{7147:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"microservicios/catalog-service/overview","title":"Catalog Service - Overview","description":"El Catalog Service es el microservicio encargado de la gesti\xf3n completa del cat\xe1logo de productos en el ERP multi-tenant.","source":"@site/docs/02-microservicios/catalog-service/00-overview.md","sourceDirName":"02-microservicios/catalog-service","slug":"/microservicios/catalog-service/overview","permalink":"/zenlogic/microservicios/catalog-service/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/catalog-service/00-overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Flujos de Negocio","permalink":"/zenlogic/microservicios/auth-service/flujos-negocio"},"next":{"title":"Alcance del Catalog Service","permalink":"/zenlogic/microservicios/catalog-service/alcance"}}');var r=n(4848),d=n(8453);const c={sidebar_position:1},t="Catalog Service - Overview",l={},a=[{value:"Responsabilidades Principales",id:"responsabilidades-principales",level:2},{value:"1. Gesti\xf3n de Productos",id:"1-gesti\xf3n-de-productos",level:3},{value:"2. Gesti\xf3n de Variantes",id:"2-gesti\xf3n-de-variantes",level:3},{value:"3. Validaci\xf3n de Locales",id:"3-validaci\xf3n-de-locales",level:3},{value:"4. Event-Driven",id:"4-event-driven",level:3},{value:"Stack Tecnol\xf3gico",id:"stack-tecnol\xf3gico",level:2},{value:"Arquitectura General",id:"arquitectura-general",level:2},{value:"Entidades Principales",id:"entidades-principales",level:2},{value:"Products",id:"products",level:3},{value:"ProductVariants",id:"productvariants",level:3},{value:"Options",id:"options",level:3},{value:"OptionValues",id:"optionvalues",level:3},{value:"APIs Expuestas",id:"apis-expuestas",level:2},{value:"REST APIs",id:"rest-apis",level:3},{value:"Eventos Publicados",id:"eventos-publicados",level:2},{value:"Eventos Consumidos",id:"eventos-consumidos",level:2},{value:"Flujo Principal: Crear Producto con Variantes",id:"flujo-principal-crear-producto-con-variantes",level:2},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function o(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"catalog-service---overview",children:"Catalog Service - Overview"})}),"\n",(0,r.jsxs)(i.p,{children:["El ",(0,r.jsx)(i.strong,{children:"Catalog Service"})," es el microservicio encargado de la gesti\xf3n completa del cat\xe1logo de productos en el ERP multi-tenant."]}),"\n",(0,r.jsx)(i.h2,{id:"responsabilidades-principales",children:"Responsabilidades Principales"}),"\n",(0,r.jsx)(i.h3,{id:"1-gesti\xf3n-de-productos",children:"1. Gesti\xf3n de Productos"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u2705 CRUD de productos (title, description, SKU, etc.)"}),"\n",(0,r.jsxs)(i.li,{children:["\u2705 Multi-tenancy (aislamiento por ",(0,r.jsx)(i.code,{children:"organization_id"}),")"]}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Categorizaci\xf3n de productos"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Gesti\xf3n de im\xe1genes"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Estados (active, archived)"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"2-gesti\xf3n-de-variantes",children:"2. Gesti\xf3n de Variantes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u2705 M\xfaltiples variantes por producto"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Opciones configurables (Color, Talla, etc.)"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 SKU \xfanico por variante"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Precios por variante"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Stock por variante y local"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"3-validaci\xf3n-de-locales",children:"3. Validaci\xf3n de Locales"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u2705 Verificar que locales existen en Auth Service"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Validar acceso del usuario al local"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Sincronizaci\xf3n con Auth Service via eventos"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"4-event-driven",children:"4. Event-Driven"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u2705 Publicar eventos de cambios en el cat\xe1logo"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Consumir eventos de Auth Service"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Invalidaci\xf3n de cache autom\xe1tica"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"stack-tecnol\xf3gico",children:"Stack Tecnol\xf3gico"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Componente"}),(0,r.jsx)(i.th,{children:"Tecnolog\xeda"}),(0,r.jsx)(i.th,{children:"Versi\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Runtime"})}),(0,r.jsx)(i.td,{children:"Python"}),(0,r.jsx)(i.td,{children:"3.11+"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Framework"})}),(0,r.jsx)(i.td,{children:"FastAPI"}),(0,r.jsx)(i.td,{children:"0.104+"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"ORM"})}),(0,r.jsx)(i.td,{children:"SQLAlchemy"}),(0,r.jsx)(i.td,{children:"2.0+"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Validaci\xf3n"})}),(0,r.jsx)(i.td,{children:"Pydantic"}),(0,r.jsx)(i.td,{children:"2.0+"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Base de Datos"})}),(0,r.jsx)(i.td,{children:"PostgreSQL"}),(0,r.jsx)(i.td,{children:"15+"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Cache"})}),(0,r.jsx)(i.td,{children:"Redis"}),(0,r.jsx)(i.td,{children:"7.2+"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Message Broker"})}),(0,r.jsx)(i.td,{children:"RabbitMQ"}),(0,r.jsx)(i.td,{children:"3.12+"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"gRPC"})}),(0,r.jsx)(i.td,{children:"grpcio"}),(0,r.jsx)(i.td,{children:"1.59+"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"arquitectura-general",children:"Arquitectura General"}),"\n",(0,r.jsx)(i.mermaid,{value:'graph TB\n    subgraph "Clients"\n        WebApp[Web Application]\n        MobileApp[Mobile App]\n    end\n\n    subgraph "Catalog Service"\n        REST[REST API]\n        BL[Business Logic]\n        Repo[Repository]\n        EventPub[Event Publisher]\n        EventCons[Event Consumer]\n        AuthClient[Auth gRPC Client]\n    end\n\n    subgraph "Infrastructure"\n        PG[(PostgreSQL)]\n        Redis[(Redis)]\n        RMQ[RabbitMQ]\n    end\n\n    subgraph "Other Services"\n        Auth[Auth Service]\n    end\n\n    WebApp --\x3e|REST| REST\n    MobileApp --\x3e|REST| REST\n\n    REST --\x3e BL\n    BL --\x3e Repo\n    BL --\x3e EventPub\n    BL --\x3e AuthClient\n\n    Repo --\x3e PG\n    BL --\x3e Redis\n\n    EventPub --\x3e RMQ\n    EventCons --\x3e RMQ\n\n    AuthClient --\x3e|gRPC| Auth'}),"\n",(0,r.jsx)(i.h2,{id:"entidades-principales",children:"Entidades Principales"}),"\n",(0,r.jsx)(i.h3,{id:"products",children:"Products"}),"\n",(0,r.jsx)(i.p,{children:"Productos del cat\xe1logo."}),"\n",(0,r.jsx)(i.h3,{id:"productvariants",children:"ProductVariants"}),"\n",(0,r.jsx)(i.p,{children:"Variantes espec\xedficas de un producto (combinaci\xf3n de opciones)."}),"\n",(0,r.jsx)(i.h3,{id:"options",children:"Options"}),"\n",(0,r.jsx)(i.p,{children:"Tipos de opciones (Color, Talla, Material)."}),"\n",(0,r.jsx)(i.h3,{id:"optionvalues",children:"OptionValues"}),"\n",(0,r.jsx)(i.p,{children:"Valores espec\xedficos de opciones (Rojo, M, Algod\xf3n)."}),"\n",(0,r.jsx)(i.h2,{id:"apis-expuestas",children:"APIs Expuestas"}),"\n",(0,r.jsx)(i.h3,{id:"rest-apis",children:"REST APIs"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Endpoint"}),(0,r.jsx)(i.th,{children:"M\xe9todo"}),(0,r.jsx)(i.th,{children:"Descripci\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"/api/v1/products"})}),(0,r.jsx)(i.td,{children:"GET, POST"}),(0,r.jsx)(i.td,{children:"Listar/crear productos"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"/api/v1/products/:id"})}),(0,r.jsx)(i.td,{children:"GET, PUT, DELETE"}),(0,r.jsx)(i.td,{children:"Gestionar producto espec\xedfico"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"/api/v1/products/:id/variants"})}),(0,r.jsx)(i.td,{children:"GET, POST"}),(0,r.jsx)(i.td,{children:"Gestionar variantes"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"/api/v1/variants/:id"})}),(0,r.jsx)(i.td,{children:"GET, PUT, DELETE"}),(0,r.jsx)(i.td,{children:"Gestionar variante espec\xedfica"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"/api/v1/options"})}),(0,r.jsx)(i.td,{children:"GET, POST"}),(0,r.jsx)(i.td,{children:"Gestionar opciones"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"eventos-publicados",children:"Eventos Publicados"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Evento"}),(0,r.jsx)(i.th,{children:"Cu\xe1ndo"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"catalog.product.created"})}),(0,r.jsx)(i.td,{children:"Producto creado"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"catalog.product.updated"})}),(0,r.jsx)(i.td,{children:"Producto actualizado"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"catalog.product.deleted"})}),(0,r.jsx)(i.td,{children:"Producto eliminado"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"catalog.variant.created"})}),(0,r.jsx)(i.td,{children:"Variante creada"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"catalog.variant.updated"})}),(0,r.jsx)(i.td,{children:"Variante actualizada"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"catalog.variant.stock_updated"})}),(0,r.jsx)(i.td,{children:"Stock de variante actualizado"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"eventos-consumidos",children:"Eventos Consumidos"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Evento"}),(0,r.jsx)(i.th,{children:"Acci\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"auth.user.deactivated"})}),(0,r.jsx)(i.td,{children:"Invalidar cache de usuario"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"auth.local.created"})}),(0,r.jsx)(i.td,{children:"Registrar nuevo local"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"auth.local.deleted"})}),(0,r.jsx)(i.td,{children:"Validar que no haya variantes con ese local"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"auth.organization.suspended"})}),(0,r.jsx)(i.td,{children:"Marcar productos como inaccesibles"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"flujo-principal-crear-producto-con-variantes",children:"Flujo Principal: Crear Producto con Variantes"}),"\n",(0,r.jsx)(i.mermaid,{value:'sequenceDiagram\n    participant Client\n    participant Catalog\n    participant Auth\n    participant DB\n    participant RabbitMQ\n\n    Client->>Catalog: POST /products<br/>{title, variants: [...]}\n    Catalog->>Auth: VerifyToken(token) [gRPC]\n    Auth--\x3e>Catalog: {user_id, org_id, permissions, locals}\n\n    Catalog->>Catalog: Validar permiso "catalog:create"\n\n    loop Para cada variante\n        Catalog->>Auth: Validar local existe\n        Catalog->>Catalog: Validar SKU \xfanico\n    end\n\n    Catalog->>DB: BEGIN TRANSACTION\n    Catalog->>DB: INSERT product\n    Catalog->>DB: INSERT variants\n    Catalog->>DB: COMMIT\n\n    Catalog->>RabbitMQ: Publicar "catalog.product.created"\n\n    Catalog--\x3e>Client: 201 Created + Product'}),"\n",(0,r.jsx)(i.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/microservicios/catalog-service/alcance",children:"Alcance"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/microservicios/catalog-service/arquitectura",children:"Arquitectura"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/microservicios/catalog-service/modelo-datos",children:"Modelo de Datos"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>t});var s=n(6540);const r={},d=s.createContext(r);function c(e){const i=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(d.Provider,{value:i},e.children)}}}]);