"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[644],{7191:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"integraciones/overview","title":"Integraciones - Overview","description":"Documentaci\xf3n de las integraciones tecnol\xf3gicas principales de zenLogic.","source":"@site/docs/04-integraciones/00-overview.md","sourceDirName":"04-integraciones","slug":"/integraciones/overview","permalink":"/zenlogic/integraciones/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/04-integraciones/00-overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"ADR-007: Cursor-based Pagination","permalink":"/zenlogic/adrs/adr-007-cursor-pagination"},"next":{"title":"RabbitMQ - Message Broker","permalink":"/zenlogic/integraciones/rabbitmq"}}');var r=i(4848),a=i(8453);const t={sidebar_position:1},c="Integraciones - Overview",o={},d=[{value:"Stack de Integraciones",id:"stack-de-integraciones",level:2},{value:"Integraciones Principales",id:"integraciones-principales",level:2},{value:"1. RabbitMQ - Message Broker",id:"1-rabbitmq---message-broker",level:3},{value:"2. Redis - Cache y Sesiones",id:"2-redis---cache-y-sesiones",level:3},{value:"3. gRPC - Comunicaci\xf3n Interna",id:"3-grpc---comunicaci\xf3n-interna",level:3},{value:"4. PostgreSQL - Base de Datos",id:"4-postgresql---base-de-datos",level:3},{value:"Patrones de Integraci\xf3n",id:"patrones-de-integraci\xf3n",level:2},{value:"Event-Driven Architecture",id:"event-driven-architecture",level:3},{value:"Cache-Aside Pattern",id:"cache-aside-pattern",level:3},{value:"Circuit Breaker Pattern",id:"circuit-breaker-pattern",level:3},{value:"Configuraci\xf3n de Conexiones",id:"configuraci\xf3n-de-conexiones",level:2},{value:"URLs de Conexi\xf3n",id:"urls-de-conexi\xf3n",level:3},{value:"Connection Pooling",id:"connection-pooling",level:3},{value:"Health Checks",id:"health-checks",level:2},{value:"Monitoreo y Observabilidad",id:"monitoreo-y-observabilidad",level:2},{value:"M\xe9tricas de Integraci\xf3n",id:"m\xe9tricas-de-integraci\xf3n",level:3},{value:"Resiliencia",id:"resiliencia",level:2},{value:"Retry Policies",id:"retry-policies",level:3},{value:"Timeouts",id:"timeouts",level:3},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2},{value:"Referencias",id:"referencias",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"integraciones---overview",children:"Integraciones - Overview"})}),"\n",(0,r.jsx)(n.p,{children:"Documentaci\xf3n de las integraciones tecnol\xf3gicas principales de zenLogic."}),"\n",(0,r.jsx)(n.h2,{id:"stack-de-integraciones",children:"Stack de Integraciones"}),"\n",(0,r.jsx)(n.p,{children:"zenLogic integra diversas tecnolog\xedas para construir una arquitectura de microservicios robusta y escalable:"}),"\n",(0,r.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Microservicios"\n        Auth[Auth Service]\n        Catalog[Catalog Service]\n        Audit[Audit Service]\n    end\n\n    subgraph "Message Broker"\n        RabbitMQ[RabbitMQ<br/>Event-Driven]\n    end\n\n    subgraph "Cach\xe9"\n        Redis[Redis<br/>Cache + Sessions]\n    end\n\n    subgraph "Base de Datos"\n        Postgres[(PostgreSQL<br/>RDBMS)]\n    end\n\n    subgraph "Comunicaci\xf3n"\n        gRPC[gRPC<br/>Sync Internal]\n    end\n\n    Auth --\x3e Postgres\n    Catalog --\x3e Postgres\n    Audit --\x3e Postgres\n\n    Auth --\x3e Redis\n    Catalog --\x3e Redis\n\n    Auth --\x3e RabbitMQ\n    Catalog --\x3e RabbitMQ\n    RabbitMQ --\x3e Audit\n\n    Catalog --\x3e gRPC\n    gRPC --\x3e Auth'}),"\n",(0,r.jsx)(n.h2,{id:"integraciones-principales",children:"Integraciones Principales"}),"\n",(0,r.jsx)(n.h3,{id:"1-rabbitmq---message-broker",children:"1. RabbitMQ - Message Broker"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prop\xf3sito"}),": Comunicaci\xf3n as\xedncrona entre microservicios mediante eventos."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Caracter\xedsticas"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Topic exchange para routing flexible"}),"\n",(0,r.jsx)(n.li,{children:"Dead Letter Queues para manejo de errores"}),"\n",(0,r.jsx)(n.li,{children:"Entrega garantizada (at-least-once)"}),"\n",(0,r.jsx)(n.li,{children:"Persistencia de mensajes"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Casos de uso"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Publicar eventos de negocio (user.created, product.updated)"}),"\n",(0,r.jsx)(n.li,{children:"Consumir eventos para mantener datos sincronizados"}),"\n",(0,r.jsx)(n.li,{children:"Auditor\xeda centralizada de todos los eventos del sistema"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.a,{href:"/integraciones/rabbitmq",children:"Ver documentaci\xf3n detallada"})]}),"\n",(0,r.jsx)(n.h3,{id:"2-redis---cache-y-sesiones",children:"2. Redis - Cache y Sesiones"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prop\xf3sito"}),": Cache distribuido y almacenamiento de sesiones."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Caracter\xedsticas"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cache de permisos de usuarios (TTL 5min)"}),"\n",(0,r.jsx)(n.li,{children:"Cache de datos de locales (TTL 1 hora)"}),"\n",(0,r.jsx)(n.li,{children:"Sessions management para tokens JWT"}),"\n",(0,r.jsx)(n.li,{children:"Pub/Sub para invalidaci\xf3n de cache"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Casos de uso"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reducir latencia de queries frecuentes"}),"\n",(0,r.jsx)(n.li,{children:"Evitar N+1 queries a PostgreSQL"}),"\n",(0,r.jsx)(n.li,{children:"Mantener sesiones de usuarios activas"}),"\n",(0,r.jsx)(n.li,{children:"Invalidar cache coordinado entre servicios"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.a,{href:"/integraciones/redis",children:"Ver documentaci\xf3n detallada"})]}),"\n",(0,r.jsx)(n.h3,{id:"3-grpc---comunicaci\xf3n-interna",children:"3. gRPC - Comunicaci\xf3n Interna"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prop\xf3sito"}),": Comunicaci\xf3n s\xedncrona de baja latencia entre microservicios."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Caracter\xedsticas"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Protocol Buffers para serializaci\xf3n binaria"}),"\n",(0,r.jsx)(n.li,{children:"HTTP/2 con multiplexing"}),"\n",(0,r.jsx)(n.li,{children:"Type-safe con schema expl\xedcito"}),"\n",(0,r.jsx)(n.li,{children:"Latencia t\xedpica 2-5ms"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Casos de uso"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validaci\xf3n en tiempo real (Catalog valida locales con Auth)"}),"\n",(0,r.jsx)(n.li,{children:"Verificaci\xf3n de tokens JWT"}),"\n",(0,r.jsx)(n.li,{children:"Consultas entre servicios que requieren respuesta inmediata"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.a,{href:"/integraciones/grpc",children:"Ver documentaci\xf3n detallada"})]}),"\n",(0,r.jsx)(n.h3,{id:"4-postgresql---base-de-datos",children:"4. PostgreSQL - Base de Datos"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prop\xf3sito"}),": Almacenamiento relacional persistente."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Caracter\xedsticas"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PostgreSQL 15+ con extensiones (uuid-ossp, pg_trgm, btree_gist)"}),"\n",(0,r.jsx)(n.li,{children:"Row-Level Security para multi-tenancy"}),"\n",(0,r.jsx)(n.li,{children:"JSONB para datos semi-estructurados"}),"\n",(0,r.jsx)(n.li,{children:"Full-text search nativo"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Casos de uso"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Persistencia de datos transaccionales"}),"\n",(0,r.jsx)(n.li,{children:"Queries complejos con JOINs"}),"\n",(0,r.jsx)(n.li,{children:"B\xfasqueda full-text de productos"}),"\n",(0,r.jsx)(n.li,{children:"Enforcement de integridad referencial"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcd6 ",(0,r.jsx)(n.a,{href:"/integraciones/postgresql",children:"Ver documentaci\xf3n detallada"})]}),"\n",(0,r.jsx)(n.h2,{id:"patrones-de-integraci\xf3n",children:"Patrones de Integraci\xf3n"}),"\n",(0,r.jsx)(n.h3,{id:"event-driven-architecture",children:"Event-Driven Architecture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Publicar evento\nawait event_publisher.publish(\n    event_type="catalog.product.created",\n    payload={\n        "product_id": product.id,\n        "organization_id": product.organization_id,\n        "name": product.name\n    }\n)\n\n# Consumir evento\n@event_handler("catalog.product.created")\nasync def on_product_created(event: dict):\n    # Audit Service registra el evento\n    await audit_service.store_event(event)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"cache-aside-pattern",children:"Cache-Aside Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Intentar obtener de cache\ncached = await redis.get(f"product:{product_id}")\nif cached:\n    return json.loads(cached)\n\n# Cache miss \u2192 obtener de DB\nproduct = await db.query(Product).filter_by(id=product_id).first()\n\n# Guardar en cache\nawait redis.setex(\n    f"product:{product_id}",\n    ttl=300,  # 5 minutos\n    value=json.dumps(product.dict())\n)\n\nreturn product\n'})}),"\n",(0,r.jsx)(n.h3,{id:"circuit-breaker-pattern",children:"Circuit Breaker Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# gRPC con fallback a REST\nclass AuthClientWithCircuitBreaker:\n    async def validate_local(self, user_id, org_id, local_id):\n        try:\n            # Intentar gRPC\n            return await self._validate_grpc(user_id, org_id, local_id)\n        except CircuitBreakerError:\n            # Fallback a REST\n            logger.warning("gRPC circuit open, using REST")\n            return await self._validate_rest(user_id, org_id, local_id)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"configuraci\xf3n-de-conexiones",children:"Configuraci\xf3n de Conexiones"}),"\n",(0,r.jsx)(n.h3,{id:"urls-de-conexi\xf3n",children:"URLs de Conexi\xf3n"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# .env\nDATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/catalog_db\nREDIS_URL=redis://localhost:6379/0\nRABBITMQ_URL=amqp://guest:guest@localhost:5672/\nAUTH_GRPC_URL=auth-service:50051\n"})}),"\n",(0,r.jsx)(n.h3,{id:"connection-pooling",children:"Connection Pooling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# PostgreSQL\nengine = create_async_engine(\n    DATABASE_URL,\n    pool_size=20,           # 20 conexiones permanentes\n    max_overflow=10,        # +10 conexiones temporales\n    pool_pre_ping=True,     # Verificar conexi\xf3n antes de usar\n    pool_recycle=3600       # Reciclar conexiones cada hora\n)\n\n# Redis\nredis_client = aioredis.from_url(\n    REDIS_URL,\n    max_connections=50,\n    decode_responses=True\n)\n\n# RabbitMQ (aio-pika)\nconnection = await aio_pika.connect_robust(\n    RABBITMQ_URL,\n    heartbeat=60\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"health-checks",children:"Health Checks"}),"\n",(0,r.jsx)(n.p,{children:"Cada servicio expone endpoints de health check para verificar conectividad:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'@router.get("/health")\nasync def health_check():\n    """Health check con verificaci\xf3n de dependencias."""\n\n    health_status = {\n        "status": "healthy",\n        "timestamp": datetime.utcnow().isoformat(),\n        "dependencies": {}\n    }\n\n    # Check PostgreSQL\n    try:\n        await db.execute(text("SELECT 1"))\n        health_status["dependencies"]["postgres"] = "healthy"\n    except Exception as e:\n        health_status["dependencies"]["postgres"] = f"unhealthy: {e}"\n        health_status["status"] = "unhealthy"\n\n    # Check Redis\n    try:\n        await redis.ping()\n        health_status["dependencies"]["redis"] = "healthy"\n    except Exception as e:\n        health_status["dependencies"]["redis"] = f"unhealthy: {e}"\n        health_status["status"] = "degraded"\n\n    # Check RabbitMQ\n    try:\n        if rabbitmq_connection.is_closed:\n            raise Exception("Connection closed")\n        health_status["dependencies"]["rabbitmq"] = "healthy"\n    except Exception as e:\n        health_status["dependencies"]["rabbitmq"] = f"unhealthy: {e}"\n        health_status["status"] = "degraded"\n\n    status_code = 200 if health_status["status"] == "healthy" else 503\n    return JSONResponse(health_status, status_code=status_code)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"monitoreo-y-observabilidad",children:"Monitoreo y Observabilidad"}),"\n",(0,r.jsx)(n.h3,{id:"m\xe9tricas-de-integraci\xf3n",children:"M\xe9tricas de Integraci\xf3n"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from prometheus_client import Counter, Histogram\n\n# PostgreSQL\ndb_query_duration = Histogram(\n    "db_query_duration_seconds",\n    "Database query duration",\n    ["query_type"]\n)\n\ndb_connection_pool_size = Gauge(\n    "db_connection_pool_size",\n    "Current connection pool size"\n)\n\n# Redis\ncache_hits = Counter("cache_hits_total", "Cache hits")\ncache_misses = Counter("cache_misses_total", "Cache misses")\n\n# RabbitMQ\nevents_published = Counter(\n    "events_published_total",\n    "Events published",\n    ["event_type"]\n)\n\nevents_consumed = Counter(\n    "events_consumed_total",\n    "Events consumed",\n    ["event_type", "status"]\n)\n\n# gRPC\ngrpc_request_duration = Histogram(\n    "grpc_request_duration_seconds",\n    "gRPC request duration",\n    ["service", "method"]\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"resiliencia",children:"Resiliencia"}),"\n",(0,r.jsx)(n.h3,{id:"retry-policies",children:"Retry Policies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from tenacity import retry, stop_after_attempt, wait_exponential\n\n@retry(\n    stop=stop_after_attempt(3),\n    wait=wait_exponential(multiplier=1, min=2, max=10)\n)\nasync def publish_event_with_retry(event_type: str, payload: dict):\n    """Publicar evento con retries exponenciales."""\n    await event_publisher.publish(event_type, payload)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"timeouts",children:"Timeouts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# PostgreSQL query timeout\nawait db.execute(\n    text(\"SET statement_timeout = '30s'\")\n)\n\n# Redis timeout\nawait redis.get(key, timeout=5.0)\n\n# gRPC timeout\nresponse = await grpc_stub.ValidateLocal(\n    request,\n    timeout=5.0  # 5 segundos\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,r.jsx)(n.p,{children:"Explorar cada integraci\xf3n en detalle:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/integraciones/rabbitmq",children:"RabbitMQ - Message Broker"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/integraciones/redis",children:"Redis - Cache y Sesiones"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/integraciones/grpc",children:"gRPC - Comunicaci\xf3n Interna"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/integraciones/postgresql",children:"PostgreSQL - Base de Datos"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/adrs/adr-003-event-driven",children:"ADR-003: Arquitectura Event-Driven"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/adrs/adr-002-postgresql",children:"ADR-002: PostgreSQL"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/adrs/adr-004-grpc-internal",children:"ADR-004: gRPC"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/arquitectura/vision-general",children:"Arquitectura General"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var s=i(6540);const r={},a=s.createContext(r);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);