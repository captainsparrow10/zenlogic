"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[2147],{2736:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"microservicios/catalog-service/api-variants","title":"Variants API","description":"API REST para la gesti\xf3n completa de variantes de productos en el Catalog Service.","source":"@site/docs/02-microservicios/catalog-service/10-api-variants.md","sourceDirName":"02-microservicios/catalog-service","slug":"/microservicios/catalog-service/api-variants","permalink":"/zenlogic/microservicios/catalog-service/api-variants","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/catalog-service/10-api-variants.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{},"sidebar":"docs","previous":{"title":"Products API","permalink":"/zenlogic/microservicios/catalog-service/api-products"},"next":{"title":"API Options","permalink":"/zenlogic/microservicios/catalog-service/api-options"}}');var a=i(4848),s=i(8453);const c={},t="Variants API",d={},l=[{value:"Endpoints",id:"endpoints",level:2},{value:"Listar Variantes de un Producto",id:"listar-variantes-de-un-producto",level:3},{value:"Obtener Variante por ID",id:"obtener-variante-por-id",level:3},{value:"Crear Variante",id:"crear-variante",level:3},{value:"Actualizar Variante",id:"actualizar-variante",level:3},{value:"Eliminar Variante",id:"eliminar-variante",level:3},{value:"Activar/Desactivar Variante",id:"activardesactivar-variante",level:3},{value:"Calcular Precio con Price Tier",id:"calcular-precio-con-price-tier",level:3},{value:"Obtener Stock de Variante",id:"obtener-stock-de-variante",level:3},{value:"Eventos Publicados",id:"eventos-publicados",level:2},{value:"variant.created",id:"variantcreated",level:3},{value:"variant.updated",id:"variantupdated",level:3},{value:"variant.deleted",id:"variantdeleted",level:3},{value:"variant.price.changed",id:"variantpricechanged",level:3},{value:"Permisos Requeridos",id:"permisos-requeridos",level:2},{value:"Cach\xe9",id:"cach\xe9",level:2},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Ejemplos de Uso",id:"ejemplos-de-uso",level:2},{value:"Listar variantes activas con stock",id:"listar-variantes-activas-con-stock",level:3},{value:"Crear variante completa",id:"crear-variante-completa",level:3},{value:"Actualizar precio y costo",id:"actualizar-precio-y-costo",level:3},{value:"Calcular precio con cantidad",id:"calcular-precio-con-cantidad",level:3},{value:"Obtener stock detallado",id:"obtener-stock-detallado",level:3},{value:"Integraci\xf3n con Otros Servicios",id:"integraci\xf3n-con-otros-servicios",level:2},{value:"Inventory Service",id:"inventory-service",level:3},{value:"Order Service",id:"order-service",level:3},{value:"Price Tier Integration",id:"price-tier-integration",level:3},{value:"Validaciones de Negocio",id:"validaciones-de-negocio",level:2},{value:"SKU \xdanico",id:"sku-\xfanico",level:3},{value:"Barcode \xdanico",id:"barcode-\xfanico",level:3},{value:"Option Consistency",id:"option-consistency",level:3},{value:"Price Validations",id:"price-validations",level:3},{value:"Stock Management",id:"stock-management",level:3},{value:"Dimensions",id:"dimensions",level:3},{value:"Campos de Variante",id:"campos-de-variante",level:2},{value:"Campos de Identificaci\xf3n",id:"campos-de-identificaci\xf3n",level:3},{value:"Campos de Opciones",id:"campos-de-opciones",level:3},{value:"Campos de Precio",id:"campos-de-precio",level:3},{value:"Campos F\xedsicos",id:"campos-f\xedsicos",level:3},{value:"Campos de Inventario (readonly)",id:"campos-de-inventario-readonly",level:3},{value:"Campos Comerciales",id:"campos-comerciales",level:3},{value:"Relaciones",id:"relaciones",level:3},{value:"Metadata",id:"metadata",level:3},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"variants-api",children:"Variants API"})}),"\n",(0,a.jsx)(n.p,{children:"API REST para la gesti\xf3n completa de variantes de productos en el Catalog Service."}),"\n",(0,a.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,a.jsx)(n.h3,{id:"listar-variantes-de-un-producto",children:"Listar Variantes de un Producto"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"GET /api/v1/products/{productId}/variants\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"productId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico del producto"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"is_active"})}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"Filtrar por estado activo/inactivo"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"option_value"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"Filtrar por valor de opci\xf3n"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"min_price"})}),(0,a.jsx)(n.td,{children:"decimal"}),(0,a.jsx)(n.td,{children:"Precio m\xednimo"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"max_price"})}),(0,a.jsx)(n.td,{children:"decimal"}),(0,a.jsx)(n.td,{children:"Precio m\xe1ximo"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"in_stock"})}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"Filtrar solo con stock disponible"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "product": {\n      "product_id": "prod_123",\n      "name": "Premium Wireless Headphones",\n      "sku": "HEADPHONE-001"\n    },\n    "variants": [\n      {\n        "variant_id": "var_456",\n        "product_id": "prod_123",\n        "sku": "HEADPHONE-001-BLACK",\n        "barcode": "8801234567892",\n        "option_name": "Color",\n        "option_value": "Black",\n        "price": 299.99,\n        "cost_price": 180.00,\n        "compare_at_price": 349.99,\n        "tax": 15.00,\n        "weight": 0.25,\n        "dimensions": {\n          "length": 20.5,\n          "width": 18.0,\n          "height": 8.5,\n          "unit": "cm"\n        },\n        "lot_number": "LOT-2025-001",\n        "stock": {\n          "total": 45,\n          "available": 40,\n          "reserved": 5,\n          "damaged": 0\n        },\n        "vendor": "Sony Corporation",\n        "is_active": true,\n        "images": [\n          {\n            "image_id": "img_var_001",\n            "url": "https://cdn.zenlogic.com/variants/var_456/black-main.jpg",\n            "alt_text": "Black Wireless Headphones",\n            "position": 0,\n            "is_primary": true\n          }\n        ],\n        "price_tiers": [\n          {\n            "price_tier_id": "pt_123",\n            "tier_name": "Wholesale",\n            "min_qty": 10,\n            "price": 270.00\n          },\n          {\n            "price_tier_id": "pt_123",\n            "tier_name": "Wholesale",\n            "min_qty": 50,\n            "price": 255.00\n          }\n        ],\n        "metadata": {\n          "color_hex": "#000000",\n          "material": "Plastic + Leather"\n        },\n        "created_at": "2025-01-15T10:10:00Z",\n        "updated_at": "2025-11-20T14:40:00Z"\n      },\n      {\n        "variant_id": "var_457",\n        "product_id": "prod_123",\n        "sku": "HEADPHONE-001-WHITE",\n        "barcode": "8801234567893",\n        "option_name": "Color",\n        "option_value": "White",\n        "price": 299.99,\n        "cost_price": 180.00,\n        "compare_at_price": 349.99,\n        "tax": 15.00,\n        "weight": 0.25,\n        "dimensions": {\n          "length": 20.5,\n          "width": 18.0,\n          "height": 8.5,\n          "unit": "cm"\n        },\n        "lot_number": "LOT-2025-002",\n        "stock": {\n          "total": 50,\n          "available": 45,\n          "reserved": 3,\n          "damaged": 2\n        },\n        "vendor": "Sony Corporation",\n        "is_active": true,\n        "images": [\n          {\n            "image_id": "img_var_002",\n            "url": "https://cdn.zenlogic.com/variants/var_457/white-main.jpg",\n            "alt_text": "White Wireless Headphones",\n            "position": 0,\n            "is_primary": true\n          }\n        ],\n        "price_tiers": [\n          {\n            "price_tier_id": "pt_123",\n            "tier_name": "Wholesale",\n            "min_qty": 10,\n            "price": 270.00\n          }\n        ],\n        "metadata": {\n          "color_hex": "#FFFFFF",\n          "material": "Plastic + Leather"\n        },\n        "created_at": "2025-01-15T10:15:00Z",\n        "updated_at": "2025-11-20T14:45:00Z"\n      }\n    ],\n    "total_variants": 2\n  },\n  "timestamp": "2025-11-23T14:00:00Z",\n  "path": "/api/v1/products/prod_123/variants",\n  "requestId": "req_variants_list_abc123"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"obtener-variante-por-id",children:"Obtener Variante por ID"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"GET /api/v1/variants/{variantId}\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"variantId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico de la variante"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"include_product"})}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"Incluir informaci\xf3n del producto (default: false)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"include_stock"})}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"Incluir detalles de stock (default: true)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"include_price_tiers"})}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"Incluir price tiers (default: false)"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "variant_id": "var_456",\n    "product_id": "prod_123",\n    "product": {\n      "product_id": "prod_123",\n      "name": "Premium Wireless Headphones",\n      "sku": "HEADPHONE-001",\n      "brand": {\n        "brand_id": "brand_789",\n        "name": "Sony",\n        "slug": "sony"\n      }\n    },\n    "sku": "HEADPHONE-001-BLACK",\n    "barcode": "8801234567892",\n    "option_name": "Color",\n    "option_value": "Black",\n    "price": 299.99,\n    "cost_price": 180.00,\n    "compare_at_price": 349.99,\n    "tax": 15.00,\n    "weight": 0.25,\n    "dimensions": {\n      "length": 20.5,\n      "width": 18.0,\n      "height": 8.5,\n      "unit": "cm"\n    },\n    "lot_number": "LOT-2025-001",\n    "stock": {\n      "total": 45,\n      "available": 40,\n      "reserved": 5,\n      "damaged": 0,\n      "below_alert": false,\n      "alert_threshold": 10\n    },\n    "vendor": "Sony Corporation",\n    "is_active": true,\n    "images": [\n      {\n        "image_id": "img_var_001",\n        "url": "https://cdn.zenlogic.com/variants/var_456/black-main.jpg",\n        "alt_text": "Black Wireless Headphones",\n        "position": 0,\n        "is_primary": true\n      }\n    ],\n    "price_tiers": [\n      {\n        "price_tier_id": "pt_123",\n        "tier_name": "Wholesale",\n        "slug": "wholesale",\n        "min_qty": 10,\n        "price": 270.00,\n        "discount_percentage": 10\n      },\n      {\n        "price_tier_id": "pt_123",\n        "tier_name": "Wholesale",\n        "slug": "wholesale",\n        "min_qty": 50,\n        "price": 255.00,\n        "discount_percentage": 15\n      }\n    ],\n    "metadata": {\n      "color_hex": "#000000",\n      "material": "Plastic + Leather",\n      "warranty_months": 24\n    },\n    "created_at": "2025-01-15T10:10:00Z",\n    "updated_at": "2025-11-20T14:40:00Z"\n  },\n  "timestamp": "2025-11-23T14:01:00Z",\n  "path": "/api/v1/variants/var_456",\n  "requestId": "req_variant_get_xyz789"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Error (404 Not Found):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 404,\n  "error": {\n    "code": "VARIANT_NOT_FOUND",\n    "message": "Variant with ID \'var_456\' not found",\n    "details": {\n      "variant_id": "var_456"\n    }\n  },\n  "timestamp": "2025-11-23T14:01:00Z",\n  "path": "/api/v1/variants/var_456",\n  "requestId": "req_variant_get_xyz789"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"crear-variante",children:"Crear Variante"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"POST /api/v1/products/{productId}/variants\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"productId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico del producto"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "sku": "HEADPHONE-001-BLUE",\n  "barcode": "8801234567894",\n  "option_id": "opt_color_123",\n  "option_value": "Blue",\n  "price": 299.99,\n  "cost_price": 180.00,\n  "compare_at_price": 349.99,\n  "tax": 15.00,\n  "weight": 0.25,\n  "dimensions": {\n    "length": 20.5,\n    "width": 18.0,\n    "height": 8.5,\n    "unit": "cm"\n  },\n  "lot_number": "LOT-2025-003",\n  "vendor": "Sony Corporation",\n  "is_active": true,\n  "metadata": {\n    "color_hex": "#0000FF",\n    "material": "Plastic + Leather"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"sku"}),": Requerido, string (1-50 caracteres), \xfanico por organizaci\xf3n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"barcode"}),": Opcional, string (max 50 caracteres), \xfanico si se proporciona"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"option_id"}),": Requerido, debe existir y pertenecer al producto"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"option_value"}),": Requerido, string (1-100 caracteres)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"price"}),": Requerido, decimal > 0"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"cost_price"}),": Opcional, decimal >= 0"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"compare_at_price"}),": Opcional, decimal >= 0"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"tax"}),": Opcional, decimal >= 0 (porcentaje)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"weight"}),": Opcional, decimal >= 0 (en kg)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"dimensions"}),": Opcional, objeto con length, width, height (decimales >= 0) y unit"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"lot_number"}),": Opcional, string (max 50 caracteres)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"vendor"}),": Opcional, string (max 200 caracteres)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"is_active"}),": Opcional, boolean (default: true)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"metadata"}),": Opcional, objeto JSON"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (201 Created):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 201,\n  "data": {\n    "variant_id": "var_789",\n    "product_id": "prod_123",\n    "sku": "HEADPHONE-001-BLUE",\n    "barcode": "8801234567894",\n    "option_name": "Color",\n    "option_value": "Blue",\n    "price": 299.99,\n    "cost_price": 180.00,\n    "compare_at_price": 349.99,\n    "tax": 15.00,\n    "weight": 0.25,\n    "dimensions": {\n      "length": 20.5,\n      "width": 18.0,\n      "height": 8.5,\n      "unit": "cm"\n    },\n    "lot_number": "LOT-2025-003",\n    "stock": {\n      "total": 0,\n      "available": 0,\n      "reserved": 0,\n      "damaged": 0\n    },\n    "vendor": "Sony Corporation",\n    "is_active": true,\n    "images": [],\n    "price_tiers": [],\n    "metadata": {\n      "color_hex": "#0000FF",\n      "material": "Plastic + Leather"\n    },\n    "created_at": "2025-11-23T14:02:00Z",\n    "updated_at": "2025-11-23T14:02:00Z"\n  },\n  "timestamp": "2025-11-23T14:02:00Z",\n  "path": "/api/v1/products/prod_123/variants",\n  "requestId": "req_variant_create_def456"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Error (409 Conflict - SKU Duplicado):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "VARIANT_SKU_EXISTS",\n    "message": "Variant with SKU \'HEADPHONE-001-BLUE\' already exists in this organization",\n    "details": {\n      "sku": "HEADPHONE-001-BLUE",\n      "existing_variant_id": "var_111"\n    }\n  },\n  "timestamp": "2025-11-23T14:02:00Z",\n  "path": "/api/v1/products/prod_123/variants",\n  "requestId": "req_variant_create_def456"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Error (400 Bad Request):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 400,\n  "error": {\n    "code": "INVALID_VARIANT_DATA",\n    "message": "Invalid variant data provided",\n    "details": {\n      "validation_errors": [\n        {\n          "field": "price",\n          "message": "Price must be greater than 0"\n        },\n        {\n          "field": "option_id",\n          "message": "Option does not belong to this product"\n        }\n      ]\n    }\n  },\n  "timestamp": "2025-11-23T14:02:00Z",\n  "path": "/api/v1/products/prod_123/variants",\n  "requestId": "req_variant_create_def456"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"actualizar-variante",children:"Actualizar Variante"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"PUT /api/v1/variants/{variantId}\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"variantId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico de la variante"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "price": 279.99,\n  "cost_price": 170.00,\n  "compare_at_price": 329.99,\n  "tax": 18.00,\n  "weight": 0.23,\n  "lot_number": "LOT-2025-004",\n  "vendor": "Sony Corporation - Updated",\n  "metadata": {\n    "color_hex": "#0000FF",\n    "material": "Recycled Plastic + Leather",\n    "eco_friendly": true\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Todos los campos son opcionales"}),"\n",(0,a.jsxs)(n.li,{children:["Si se env\xeda ",(0,a.jsx)(n.code,{children:"sku"})," o ",(0,a.jsx)(n.code,{children:"barcode"}),", debe ser \xfanico"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"option_id"})," no se puede cambiar despu\xe9s de crear la variante"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"price"}),", ",(0,a.jsx)(n.code,{children:"cost_price"}),", ",(0,a.jsx)(n.code,{children:"tax"}),", ",(0,a.jsx)(n.code,{children:"weight"})," deben ser >= 0"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "variant_id": "var_789",\n    "product_id": "prod_123",\n    "sku": "HEADPHONE-001-BLUE",\n    "barcode": "8801234567894",\n    "option_name": "Color",\n    "option_value": "Blue",\n    "price": 279.99,\n    "cost_price": 170.00,\n    "compare_at_price": 329.99,\n    "tax": 18.00,\n    "weight": 0.23,\n    "dimensions": {\n      "length": 20.5,\n      "width": 18.0,\n      "height": 8.5,\n      "unit": "cm"\n    },\n    "lot_number": "LOT-2025-004",\n    "stock": {\n      "total": 0,\n      "available": 0,\n      "reserved": 0,\n      "damaged": 0\n    },\n    "vendor": "Sony Corporation - Updated",\n    "is_active": true,\n    "images": [],\n    "price_tiers": [],\n    "metadata": {\n      "color_hex": "#0000FF",\n      "material": "Recycled Plastic + Leather",\n      "eco_friendly": true\n    },\n    "created_at": "2025-11-23T14:02:00Z",\n    "updated_at": "2025-11-23T14:05:00Z"\n  },\n  "timestamp": "2025-11-23T14:05:00Z",\n  "path": "/api/v1/variants/var_789",\n  "requestId": "req_variant_update_ghi789"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"eliminar-variante",children:"Eliminar Variante"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"DELETE /api/v1/variants/{variantId}\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"variantId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico de la variante"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"force"})}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"Forzar eliminaci\xf3n aunque tenga stock (soft delete)"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (204 No Content):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"HTTP/1.1 204 No Content\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Error (409 Conflict):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "VARIANT_HAS_STOCK",\n    "message": "Cannot delete variant with existing stock",\n    "details": {\n      "variant_id": "var_789",\n      "stock_total": 45,\n      "stock_available": 40,\n      "suggestion": "Use force=true parameter to soft-delete the variant"\n    }\n  },\n  "timestamp": "2025-11-23T14:06:00Z",\n  "path": "/api/v1/variants/var_789",\n  "requestId": "req_variant_delete_jkl012"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"activardesactivar-variante",children:"Activar/Desactivar Variante"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"PATCH /api/v1/variants/{variantId}/activate\nPATCH /api/v1/variants/{variantId}/deactivate\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"variantId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico de la variante"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "variant_id": "var_789",\n    "is_active": true,\n    "updated_at": "2025-11-23T14:07:00Z"\n  },\n  "timestamp": "2025-11-23T14:07:00Z",\n  "path": "/api/v1/variants/var_789/activate",\n  "requestId": "req_variant_activate_mno345"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"calcular-precio-con-price-tier",children:"Calcular Precio con Price Tier"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"GET /api/v1/variants/{variantId}/calculate-price\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"variantId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico de la variante"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Requerido"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"quantity"})}),(0,a.jsx)(n.td,{children:"integer"}),(0,a.jsx)(n.td,{children:"S\xed"}),(0,a.jsx)(n.td,{children:"Cantidad para calcular precio"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"price_tier_id"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"No"}),(0,a.jsx)(n.td,{children:"Price tier espec\xedfico a aplicar"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "variant_id": "var_456",\n    "sku": "HEADPHONE-001-BLACK",\n    "base_price": 299.99,\n    "quantity": 75,\n    "applied_price_tier": {\n      "price_tier_id": "pt_123",\n      "tier_name": "Wholesale",\n      "slug": "wholesale"\n    },\n    "applied_rule": {\n      "rule_id": "ptr_002",\n      "min_qty": 50,\n      "price": 270.00\n    },\n    "unit_price": 270.00,\n    "subtotal": 20250.00,\n    "tax_amount": 3037.50,\n    "total": 23287.50,\n    "savings": {\n      "amount_saved": 2249.25,\n      "percentage_saved": 10\n    },\n    "next_tier": {\n      "min_qty": 100,\n      "price": 255.00,\n      "additional_qty_needed": 25,\n      "additional_savings": 1125.00\n    }\n  },\n  "timestamp": "2025-11-23T14:08:00Z",\n  "path": "/api/v1/variants/var_456/calculate-price",\n  "requestId": "req_variant_price_calc_pqr678"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"obtener-stock-de-variante",children:"Obtener Stock de Variante"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"GET /api/v1/variants/{variantId}/stock\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"variantId"})}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"ID \xfanico de la variante"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Response Success (200 OK):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "variant_id": "var_456",\n    "sku": "HEADPHONE-001-BLACK",\n    "product_name": "Premium Wireless Headphones",\n    "option_value": "Black",\n    "stock": {\n      "total": 45,\n      "available": 40,\n      "reserved": 5,\n      "damaged": 0,\n      "in_transit": 20\n    },\n    "alert_threshold": 10,\n    "below_alert": false,\n    "lot_number": "LOT-2025-001",\n    "last_stock_update": "2025-11-23T10:30:00Z",\n    "stock_movements_today": 3\n  },\n  "timestamp": "2025-11-23T14:09:00Z",\n  "path": "/api/v1/variants/var_456/stock",\n  "requestId": "req_variant_stock_stu901"\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"eventos-publicados",children:"Eventos Publicados"}),"\n",(0,a.jsx)(n.h3,{id:"variantcreated",children:"variant.created"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_variant_created_abc123",\n  "event_type": "variant.created",\n  "timestamp": "2025-11-23T14:02:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "variant_id": "var_789",\n    "product_id": "prod_123",\n    "organization_id": "org_456",\n    "sku": "HEADPHONE-001-BLUE",\n    "option_value": "Blue",\n    "price": 299.99,\n    "is_active": true\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_variant_create_def456"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"variantupdated",children:"variant.updated"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_variant_updated_def456",\n  "event_type": "variant.updated",\n  "timestamp": "2025-11-23T14:05:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "variant_id": "var_789",\n    "product_id": "prod_123",\n    "organization_id": "org_456",\n    "changes": {\n      "price": {\n        "old": 299.99,\n        "new": 279.99\n      },\n      "cost_price": {\n        "old": 180.00,\n        "new": 170.00\n      }\n    }\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_variant_update_ghi789"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"variantdeleted",children:"variant.deleted"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_variant_deleted_ghi789",\n  "event_type": "variant.deleted",\n  "timestamp": "2025-11-23T14:06:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "variant_id": "var_789",\n    "product_id": "prod_123",\n    "organization_id": "org_456",\n    "soft_delete": true\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_variant_delete_jkl012"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"variantpricechanged",children:"variant.price.changed"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "evt_variant_price_changed_jkl012",\n  "event_type": "variant.price.changed",\n  "timestamp": "2025-11-23T14:05:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "variant_id": "var_789",\n    "product_id": "prod_123",\n    "organization_id": "org_456",\n    "old_price": 299.99,\n    "new_price": 279.99,\n    "change_percentage": -6.67\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_variant_update_ghi789"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"permisos-requeridos",children:"Permisos Requeridos"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Endpoint"}),(0,a.jsx)(n.th,{children:"Permiso"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"GET /api/v1/products/{id}/variants"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.read"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"GET /api/v1/variants/{id}"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.read"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"GET /api/v1/variants/{id}/stock"})}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"catalog.variants.read"}),", ",(0,a.jsx)(n.code,{children:"inventory.stock.read"})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"GET /api/v1/variants/{id}/calculate-price"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.read"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"POST /api/v1/products/{id}/variants"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.create"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"PUT /api/v1/variants/{id}"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.update"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"DELETE /api/v1/variants/{id}"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.delete"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"PATCH /api/v1/variants/{id}/activate"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.update"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"PATCH /api/v1/variants/{id}/deactivate"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"catalog.variants.update"})})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"cach\xe9",children:"Cach\xe9"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Lista de variantes por producto"}),": TTL 5 minutos"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Variante individual"}),": TTL 15 minutos"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Stock de variante"}),": TTL 1 minuto"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"C\xe1lculo de precio"}),": TTL 5 minutos"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Invalidaci\xf3n"}),": Al crear, actualizar o eliminar variantes"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Cache Keys:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"variants:list:{product_id}:{hash(query_params)}\nvariants:detail:{variant_id}\nvariants:by_sku:{organization_id}:{sku}\nvariants:stock:{variant_id}\nvariants:price:{variant_id}:{price_tier_id}:{quantity}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Lectura"}),": 100 requests/minuto por usuario"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Escritura"}),": 20 requests/minuto por usuario"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"ejemplos-de-uso",children:"Ejemplos de Uso"}),"\n",(0,a.jsx)(n.h3,{id:"listar-variantes-activas-con-stock",children:"Listar variantes activas con stock"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.zenlogic.com/api/v1/products/prod_123/variants?is_active=true&in_stock=true" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"crear-variante-completa",children:"Crear variante completa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.zenlogic.com/api/v1/products/prod_123/variants" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "sku": "HEADPHONE-001-RED",\n    "barcode": "8801234567895",\n    "option_id": "opt_color_123",\n    "option_value": "Red",\n    "price": 299.99,\n    "cost_price": 180.00,\n    "weight": 0.25,\n    "vendor": "Sony Corporation",\n    "metadata": {\n      "color_hex": "#FF0000"\n    }\n  }\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"actualizar-precio-y-costo",children:"Actualizar precio y costo"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X PUT "https://api.zenlogic.com/api/v1/variants/var_789" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "price": 279.99,\n    "cost_price": 170.00\n  }\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"calcular-precio-con-cantidad",children:"Calcular precio con cantidad"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.zenlogic.com/api/v1/variants/var_456/calculate-price?quantity=75&price_tier_id=pt_123" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"obtener-stock-detallado",children:"Obtener stock detallado"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://api.zenlogic.com/api/v1/variants/var_456/stock" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"integraci\xf3n-con-otros-servicios",children:"Integraci\xf3n con Otros Servicios"}),"\n",(0,a.jsx)(n.h3,{id:"inventory-service",children:"Inventory Service"}),"\n",(0,a.jsxs)(n.p,{children:["Al crear una variante, el Catalog Service publica el evento ",(0,a.jsx)(n.code,{children:"variant.created"})," que es consumido por el Inventory Service para:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Inicializar registros de stock con valores en 0"}),"\n",(0,a.jsxs)(n.li,{children:["Configurar alertas de inventario seg\xfan el ",(0,a.jsx)(n.code,{children:"alert_stock"})," del producto"]}),"\n",(0,a.jsx)(n.li,{children:"Crear ubicaciones de almacenamiento para la variante"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"order-service",children:"Order Service"}),"\n",(0,a.jsx)(n.p,{children:"El Order Service consulta variantes v\xeda:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"gRPC para validaciones s\xedncronas (verificar variante existe, est\xe1 activa, tiene stock)"}),"\n",(0,a.jsx)(n.li,{children:"API REST para mostrar detalles de variantes en \xf3rdenes"}),"\n",(0,a.jsx)(n.li,{children:"Endpoint de c\xe1lculo de precio para aplicar price tiers autom\xe1ticamente"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"price-tier-integration",children:"Price Tier Integration"}),"\n",(0,a.jsx)(n.p,{children:"Cuando se consulta el precio de una variante:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Se verifica si hay price tiers activos para la variante"}),"\n",(0,a.jsxs)(n.li,{children:["Se ordena por ",(0,a.jsx)(n.code,{children:"min_qty"})," descendente"]}),"\n",(0,a.jsxs)(n.li,{children:["Se selecciona el primer tier donde ",(0,a.jsx)(n.code,{children:"quantity >= min_qty"})]}),"\n",(0,a.jsx)(n.li,{children:"Se retorna informaci\xf3n del siguiente tier disponible para incentivar compras mayores"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"validaciones-de-negocio",children:"Validaciones de Negocio"}),"\n",(0,a.jsx)(n.h3,{id:"sku-\xfanico",children:"SKU \xdanico"}),"\n",(0,a.jsx)(n.p,{children:"El SKU debe ser \xfanico a nivel de organizaci\xf3n, incluso entre diferentes productos."}),"\n",(0,a.jsx)(n.h3,{id:"barcode-\xfanico",children:"Barcode \xdanico"}),"\n",(0,a.jsx)(n.p,{children:"Si se proporciona un barcode, debe ser \xfanico a nivel de organizaci\xf3n."}),"\n",(0,a.jsx)(n.h3,{id:"option-consistency",children:"Option Consistency"}),"\n",(0,a.jsx)(n.p,{children:"La opci\xf3n (option_id) debe pertenecer al producto. No se pueden crear variantes con opciones de otros productos."}),"\n",(0,a.jsx)(n.h3,{id:"price-validations",children:"Price Validations"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"price"})," debe ser mayor que 0"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"cost_price"})," debe ser menor o igual a ",(0,a.jsx)(n.code,{children:"price"})," (warning, no error)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"compare_at_price"})," debe ser mayor a ",(0,a.jsx)(n.code,{children:"price"})," (sugerencia, no error)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"stock-management",children:"Stock Management"}),"\n",(0,a.jsx)(n.p,{children:"Las variantes no manejan stock directamente en el Catalog Service. El stock es responsabilidad del Inventory Service, pero se consulta v\xeda gRPC para mostrar informaci\xf3n actualizada."}),"\n",(0,a.jsx)(n.h3,{id:"dimensions",children:"Dimensions"}),"\n",(0,a.jsx)(n.p,{children:"Si se proporcionan dimensiones, todas (length, width, height) deben ser mayores a 0."}),"\n",(0,a.jsx)(n.h2,{id:"campos-de-variante",children:"Campos de Variante"}),"\n",(0,a.jsx)(n.h3,{id:"campos-de-identificaci\xf3n",children:"Campos de Identificaci\xf3n"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"variant_id"}),": UUID \xfanico"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"product_id"}),": Referencia al producto padre"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"sku"}),": C\xf3digo \xfanico de la variante"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"barcode"}),": C\xf3digo de barras (EAN, UPC, etc.)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"campos-de-opciones",children:"Campos de Opciones"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"option_id"}),': ID de la opci\xf3n del producto (ej: "Color")']}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"option_name"}),": Nombre de la opci\xf3n (denormalizado)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"option_value"}),': Valor espec\xedfico (ej: "Red", "Large")']}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"campos-de-precio",children:"Campos de Precio"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"price"}),": Precio de venta al p\xfablico"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"cost_price"}),": Costo de adquisici\xf3n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"compare_at_price"}),": Precio de comparaci\xf3n (precio tachado)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"tax"}),": Porcentaje de impuesto"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"campos-f\xedsicos",children:"Campos F\xedsicos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"weight"}),": Peso en kg"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"dimensions"}),": Objeto con length, width, height, unit"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"lot_number"}),": N\xfamero de lote o batch"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"campos-de-inventario-readonly",children:"Campos de Inventario (readonly)"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"stock"}),": Objeto con total, available, reserved, damaged (desde Inventory Service)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"campos-comerciales",children:"Campos Comerciales"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"vendor"}),": Proveedor o fabricante"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"is_active"}),": Estado activo/inactivo"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"relaciones",children:"Relaciones"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"images"}),": Array de im\xe1genes de la variante"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"price_tiers"}),": Array de price tiers aplicables"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"metadata",children:"Metadata"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"metadata"}),": JSON libre para campos personalizados"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"./api-products",children:"API Products"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"./api-options",children:"API Options"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"./api-price-tiers",children:"API Price Tiers"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"./api-images",children:"API Images"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"./modelo-datos",children:"Modelo de Datos"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"./cache-strategy",children:"Cache Strategy"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>t});var r=i(6540);const a={},s=r.createContext(a);function c(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);