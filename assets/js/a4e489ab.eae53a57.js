"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[9559],{4840:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"microservicios/catalog-service/errores-comunes","title":"Errores Comunes","description":"Cat\xe1logo completo de c\xf3digos de error del Catalog Service con soluciones y ejemplos.","source":"@site/docs/02-microservicios/catalog-service/16-errores-comunes.md","sourceDirName":"02-microservicios/catalog-service","slug":"/microservicios/catalog-service/errores-comunes","permalink":"/zenlogic/microservicios/catalog-service/errores-comunes","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/catalog-service/16-errores-comunes.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{},"sidebar":"docs","previous":{"title":"Testing","permalink":"/zenlogic/microservicios/catalog-service/testing"},"next":{"title":"Migraciones de Base de Datos","permalink":"/zenlogic/microservicios/catalog-service/migraciones"}}');var s=n(4848),i=n(8453);const c={},l="Errores Comunes",t={},o=[{value:"Tabla de C\xf3digos de Error",id:"tabla-de-c\xf3digos-de-error",level:2},{value:"Errores de Validaci\xf3n (400)",id:"errores-de-validaci\xf3n-400",level:2},{value:"CAT-1001: INVALID_PRODUCT_DATA",id:"cat-1001-invalid_product_data",level:3},{value:"CIRCULAR_COLLECTION_REFERENCE",id:"circular_collection_reference",level:3},{value:"Errores de Conflicto (409)",id:"errores-de-conflicto-409",level:2},{value:"PRODUCT_SKU_EXISTS",id:"product_sku_exists",level:3},{value:"PRODUCT_HAS_VARIANTS",id:"product_has_variants",level:3},{value:"VARIANT_HAS_STOCK",id:"variant_has_stock",level:3},{value:"IMAGE_TOO_LARGE",id:"image_too_large",level:3},{value:"Errores de gRPC",id:"errores-de-grpc",level:2},{value:"Circuit Breaker Abierto",id:"circuit-breaker-abierto",level:3},{value:"Timeout de gRPC",id:"timeout-de-grpc",level:3},{value:"Errores de Cache",id:"errores-de-cache",level:2},{value:"Cache Desincronizado",id:"cache-desincronizado",level:3},{value:"Errores de RabbitMQ",id:"errores-de-rabbitmq",level:2},{value:"Eventos No Se Publican",id:"eventos-no-se-publican",level:3},{value:"Mejores Pr\xe1cticas",id:"mejores-pr\xe1cticas",level:2},{value:"1. Validaci\xf3n del Cliente",id:"1-validaci\xf3n-del-cliente",level:3},{value:"2. Manejo con Retry",id:"2-manejo-con-retry",level:3},{value:"3. Mensajes de Error Amigables",id:"3-mensajes-de-error-amigables",level:3},{value:"Debugging",id:"debugging",level:2},{value:"Logs \xdatiles",id:"logs-\xfatiles",level:3},{value:"Health Checks",id:"health-checks",level:3},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"errores-comunes",children:"Errores Comunes"})}),"\n",(0,s.jsx)(r.p,{children:"Cat\xe1logo completo de c\xf3digos de error del Catalog Service con soluciones y ejemplos."}),"\n",(0,s.jsx)(r.h2,{id:"tabla-de-c\xf3digos-de-error",children:"Tabla de C\xf3digos de Error"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"C\xf3digo HTTP"}),(0,s.jsx)(r.th,{children:"Error Code"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Entidad"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1001"})}),(0,s.jsx)(r.td,{children:"INVALID_PRODUCT_DATA"}),(0,s.jsx)(r.td,{children:"Product"}),(0,s.jsx)(r.td,{children:"Datos de producto inv\xe1lidos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1002"})}),(0,s.jsx)(r.td,{children:"INVALID_VARIANT_DATA"}),(0,s.jsx)(r.td,{children:"Variant"}),(0,s.jsx)(r.td,{children:"Datos de variante inv\xe1lidos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1003"})}),(0,s.jsx)(r.td,{children:"INVALID_BRAND_DATA"}),(0,s.jsx)(r.td,{children:"Brand"}),(0,s.jsx)(r.td,{children:"Datos de marca inv\xe1lidos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1004"})}),(0,s.jsx)(r.td,{children:"INVALID_COLLECTION_DATA"}),(0,s.jsx)(r.td,{children:"Collection"}),(0,s.jsx)(r.td,{children:"Datos de colecci\xf3n inv\xe1lidos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1005"})}),(0,s.jsx)(r.td,{children:"INVALID_TAG_DATA"}),(0,s.jsx)(r.td,{children:"Tag"}),(0,s.jsx)(r.td,{children:"Datos de tag inv\xe1lidos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1006"})}),(0,s.jsx)(r.td,{children:"INVALID_PRICE_TIER_DATA"}),(0,s.jsx)(r.td,{children:"Price Tier"}),(0,s.jsx)(r.td,{children:"Datos de price tier inv\xe1lidos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1007"})}),(0,s.jsx)(r.td,{children:"INVALID_PRICE_TIER_RULE"}),(0,s.jsx)(r.td,{children:"Price Tier"}),(0,s.jsx)(r.td,{children:"Regla de precio inv\xe1lida"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1008"})}),(0,s.jsx)(r.td,{children:"INVALID_IMAGE_FORMAT"}),(0,s.jsx)(r.td,{children:"Image"}),(0,s.jsx)(r.td,{children:"Formato de imagen no v\xe1lido"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-1009"})}),(0,s.jsx)(r.td,{children:"CIRCULAR_COLLECTION_REFERENCE"}),(0,s.jsx)(r.td,{children:"Collection"}),(0,s.jsx)(r.td,{children:"Referencia circular en colecciones"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"401"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-2001"})}),(0,s.jsx)(r.td,{children:"UNAUTHORIZED"}),(0,s.jsx)(r.td,{children:"General"}),(0,s.jsx)(r.td,{children:"Token inv\xe1lido o expirado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"403"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-2002"})}),(0,s.jsx)(r.td,{children:"FORBIDDEN"}),(0,s.jsx)(r.td,{children:"General"}),(0,s.jsx)(r.td,{children:"Sin permisos para esta operaci\xf3n"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"403"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-2003"})}),(0,s.jsx)(r.td,{children:"LOCAL_ACCESS_DENIED"}),(0,s.jsx)(r.td,{children:"General"}),(0,s.jsx)(r.td,{children:"Sin acceso a este local"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-3001"})}),(0,s.jsx)(r.td,{children:"PRODUCT_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"Product"}),(0,s.jsx)(r.td,{children:"Producto no encontrado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-3002"})}),(0,s.jsx)(r.td,{children:"VARIANT_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"Variant"}),(0,s.jsx)(r.td,{children:"Variante no encontrada"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-3003"})}),(0,s.jsx)(r.td,{children:"BRAND_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"Brand"}),(0,s.jsx)(r.td,{children:"Marca no encontrada"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-3004"})}),(0,s.jsx)(r.td,{children:"COLLECTION_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"Collection"}),(0,s.jsx)(r.td,{children:"Colecci\xf3n no encontrada"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-3005"})}),(0,s.jsx)(r.td,{children:"TAG_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"Tag"}),(0,s.jsx)(r.td,{children:"Tag no encontrado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-3006"})}),(0,s.jsx)(r.td,{children:"PRICE_TIER_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"Price Tier"}),(0,s.jsx)(r.td,{children:"Price tier no encontrado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-3007"})}),(0,s.jsx)(r.td,{children:"IMAGE_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"Image"}),(0,s.jsx)(r.td,{children:"Imagen no encontrada"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4001"})}),(0,s.jsx)(r.td,{children:"PRODUCT_SKU_EXISTS"}),(0,s.jsx)(r.td,{children:"Product"}),(0,s.jsx)(r.td,{children:"SKU de producto duplicado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4002"})}),(0,s.jsx)(r.td,{children:"VARIANT_SKU_EXISTS`"}),(0,s.jsx)(r.td,{children:"Variant"}),(0,s.jsx)(r.td,{children:"SKU de variante duplicado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4003"})}),(0,s.jsx)(r.td,{children:"PRODUCT_SLUG_EXISTS"}),(0,s.jsx)(r.td,{children:"Product"}),(0,s.jsx)(r.td,{children:"Slug de producto duplicado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4004"})}),(0,s.jsx)(r.td,{children:"BRAND_SLUG_EXISTS"}),(0,s.jsx)(r.td,{children:"Brand"}),(0,s.jsx)(r.td,{children:"Slug de marca duplicado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4005"})}),(0,s.jsx)(r.td,{children:"COLLECTION_SLUG_EXISTS"}),(0,s.jsx)(r.td,{children:"Collection"}),(0,s.jsx)(r.td,{children:"Slug de colecci\xf3n duplicado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4006"})}),(0,s.jsx)(r.td,{children:"TAG_SLUG_EXISTS"}),(0,s.jsx)(r.td,{children:"Tag"}),(0,s.jsx)(r.td,{children:"Slug de tag duplicado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4007"})}),(0,s.jsx)(r.td,{children:"PRICE_TIER_SLUG_EXISTS"}),(0,s.jsx)(r.td,{children:"Price Tier"}),(0,s.jsx)(r.td,{children:"Slug de price tier duplicado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4008"})}),(0,s.jsx)(r.td,{children:"PRODUCT_HAS_VARIANTS"}),(0,s.jsx)(r.td,{children:"Product"}),(0,s.jsx)(r.td,{children:"No se puede eliminar producto con variantes"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4009"})}),(0,s.jsx)(r.td,{children:"VARIANT_HAS_STOCK"}),(0,s.jsx)(r.td,{children:"Variant"}),(0,s.jsx)(r.td,{children:"No se puede eliminar variante con stock"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4010"})}),(0,s.jsx)(r.td,{children:"BRAND_HAS_PRODUCTS"}),(0,s.jsx)(r.td,{children:"Brand"}),(0,s.jsx)(r.td,{children:"No se puede eliminar marca con productos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4011"})}),(0,s.jsx)(r.td,{children:"COLLECTION_HAS_PRODUCTS"}),(0,s.jsx)(r.td,{children:"Collection"}),(0,s.jsx)(r.td,{children:"No se puede eliminar colecci\xf3n con productos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4012"})}),(0,s.jsx)(r.td,{children:"COLLECTION_HAS_CHILDREN"}),(0,s.jsx)(r.td,{children:"Collection"}),(0,s.jsx)(r.td,{children:"No se puede eliminar colecci\xf3n con sub-colecciones"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4013"})}),(0,s.jsx)(r.td,{children:"TAG_HAS_PRODUCTS"}),(0,s.jsx)(r.td,{children:"Tag"}),(0,s.jsx)(r.td,{children:"No se puede eliminar tag con productos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4014"})}),(0,s.jsx)(r.td,{children:"PRICE_TIER_HAS_RULES"}),(0,s.jsx)(r.td,{children:"Price Tier"}),(0,s.jsx)(r.td,{children:"No se puede eliminar price tier con reglas"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-4015"})}),(0,s.jsx)(r.td,{children:"PRICE_TIER_RULE_EXISTS"}),(0,s.jsx)(r.td,{children:"Price Tier"}),(0,s.jsx)(r.td,{children:"Ya existe regla para esta variante y cantidad"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"413"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-5001"})}),(0,s.jsx)(r.td,{children:"IMAGE_TOO_LARGE"}),(0,s.jsx)(r.td,{children:"Image"}),(0,s.jsx)(r.td,{children:"Imagen excede tama\xf1o m\xe1ximo (5MB)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"422"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-5002"})}),(0,s.jsx)(r.td,{children:"IMAGE_TOO_SMALL"}),(0,s.jsx)(r.td,{children:"Image"}),(0,s.jsx)(r.td,{children:"Dimensiones de imagen muy peque\xf1as"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"422"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-5003"})}),(0,s.jsx)(r.td,{children:"MAX_IMAGES_EXCEEDED"}),(0,s.jsx)(r.td,{children:"Image"}),(0,s.jsx)(r.td,{children:"M\xe1ximo de im\xe1genes alcanzado"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"422"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-5004"})}),(0,s.jsx)(r.td,{children:"IMAGE_UPLOAD_FAILED"}),(0,s.jsx)(r.td,{children:"Image"}),(0,s.jsx)(r.td,{children:"Error al subir imagen"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"422"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-5005"})}),(0,s.jsx)(r.td,{children:"PRIMARY_IMAGE_REQUIRED"}),(0,s.jsx)(r.td,{children:"Image"}),(0,s.jsx)(r.td,{children:"Producto debe tener imagen principal"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"500"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-9001"})}),(0,s.jsx)(r.td,{children:"INTERNAL_SERVER_ERROR"}),(0,s.jsx)(r.td,{children:"General"}),(0,s.jsx)(r.td,{children:"Error interno del servidor"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"503"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAT-9002"})}),(0,s.jsx)(r.td,{children:"SERVICE_UNAVAILABLE"}),(0,s.jsx)(r.td,{children:"General"}),(0,s.jsx)(r.td,{children:"Servicio temporalmente no disponible"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"errores-de-validaci\xf3n-400",children:"Errores de Validaci\xf3n (400)"}),"\n",(0,s.jsx)(r.h3,{id:"cat-1001-invalid_product_data",children:"CAT-1001: INVALID_PRODUCT_DATA"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"HTTP Status:"})," ",(0,s.jsx)(r.code,{children:"400 Bad Request"})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Descripci\xf3n:"})," Datos de producto no v\xe1lidos durante creaci\xf3n o actualizaci\xf3n."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Ejemplo de Error:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 400,\n  "error": {\n    "code": "CAT-1001",\n    "type": "INVALID_PRODUCT_DATA",\n    "message": "Invalid product data provided",\n    "details": {\n      "validation_errors": [\n        {\n          "field": "base_price",\n          "message": "Base price must be greater than 0"\n        },\n        {\n          "field": "slug",\n          "message": "Slug must contain only lowercase letters, numbers, and hyphens"\n        }\n      ]\n    }\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/products",\n  "requestId": "req_abc123"\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Causas Comunes:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"base_price"})," menor o igual a 0"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"slug"})," con caracteres no permitidos"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"sku"})," vac\xedo o excede 50 caracteres"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"brand_id"})," no existe"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"const validateProductData = (data) => {\n  const errors = [];\n  if (!data.sku || data.sku.length > 50) {\n    errors.push({ field: 'sku', message: 'SKU required, max 50 chars' });\n  }\n  if (!data.base_price || data.base_price <= 0) {\n    errors.push({ field: 'base_price', message: 'Price must be > 0' });\n  }\n  if (data.slug && !/^[a-z0-9-]+$/.test(data.slug)) {\n    errors.push({ field: 'slug', message: 'Invalid slug format' });\n  }\n  return errors;\n};\n"})}),"\n",(0,s.jsx)(r.h3,{id:"circular_collection_reference",children:"CIRCULAR_COLLECTION_REFERENCE"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Ejemplo:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 400,\n  "error": {\n    "code": "CIRCULAR_COLLECTION_REFERENCE",\n    "message": "Cannot set parent_id that would create a circular reference",\n    "details": {\n      "collection_id": "coll_123",\n      "parent_id": "coll_126"\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})," No establecer como padre a una colecci\xf3n descendiente."]}),"\n",(0,s.jsx)(r.h2,{id:"errores-de-conflicto-409",children:"Errores de Conflicto (409)"}),"\n",(0,s.jsx)(r.h3,{id:"product_sku_exists",children:"PRODUCT_SKU_EXISTS"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Ejemplo:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "PRODUCT_SKU_EXISTS",\n    "message": "Product with SKU \'PROD-001\' already exists",\n    "details": {\n      "sku": "PROD-001",\n      "existing_product_id": "prod_456"\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// Generar SKU \xfanico\nconst generateSKU = (prefix, seq) => `${prefix}-${String(seq).padStart(6, '0')}`;\nconst sku = generateSKU('PROD', 123); // PROD-000123\n"})}),"\n",(0,s.jsx)(r.h3,{id:"product_has_variants",children:"PRODUCT_HAS_VARIANTS"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Ejemplo:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "PRODUCT_HAS_VARIANTS",\n    "message": "Cannot delete product with existing variants",\n    "details": {\n      "product_id": "prod_123",\n      "variants_count": 5,\n      "suggestion": "Use force=true parameter to soft-delete"\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Soft delete forzado\nDELETE /api/v1/products/prod_123?force=true\n"})}),"\n",(0,s.jsx)(r.h3,{id:"variant_has_stock",children:"VARIANT_HAS_STOCK"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Ejemplo:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "VARIANT_HAS_STOCK",\n    "message": "Cannot delete variant with existing stock",\n    "details": {\n      "variant_id": "var_456",\n      "stock_total": 45\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"image_too_large",children:"IMAGE_TOO_LARGE"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Ejemplo:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 413,\n  "error": {\n    "code": "IMAGE_TOO_LARGE",\n    "message": "Image file exceeds maximum size limit",\n    "details": {\n      "file_size_bytes": 6291456,\n      "max_size_mb": 5\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"const resizeImage = async (file, maxSizeMB = 5) => {\n  if (file.size > maxSizeMB * 1024 * 1024) {\n    return await compressImage(file, { quality: 0.8, maxWidth: 2000 });\n  }\n  return file;\n};\n"})}),"\n",(0,s.jsx)(r.h2,{id:"errores-de-grpc",children:"Errores de gRPC"}),"\n",(0,s.jsx)(r.h3,{id:"circuit-breaker-abierto",children:"Circuit Breaker Abierto"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Error:"})," ",(0,s.jsx)(r.code,{children:"Circuit Breaker is OPEN"})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Causa:"})," M\xfaltiples fallos consecutivos en llamadas gRPC"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Verificar que Auth Service est\xe9 corriendo"}),"\n",(0,s.jsx)(r.li,{children:"Revisar logs de Auth Service"}),"\n",(0,s.jsx)(r.li,{children:"El sistema autom\xe1ticamente usa fallback a REST"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"timeout-de-grpc",children:"Timeout de gRPC"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Error:"})," ",(0,s.jsx)(r.code,{children:"grpc.StatusCode.DEADLINE_EXCEEDED"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Incrementar timeout: ",(0,s.jsx)(r.code,{children:"AUTH_GRPC_TIMEOUT=10"})]}),"\n",(0,s.jsx)(r.li,{children:"Verificar latencia de red"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"errores-de-cache",children:"Errores de Cache"}),"\n",(0,s.jsx)(r.h3,{id:"cache-desincronizado",children:"Cache Desincronizado"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"S\xedntoma:"})," Datos viejos despu\xe9s de actualizar"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'# Limpiar cache espec\xedfico\nredis-cli DEL "product:org-123:product-456"\n\n# Limpiar cache de organizaci\xf3n\nredis-cli KEYS "*:org-123:*" | xargs redis-cli DEL\n'})}),"\n",(0,s.jsx)(r.h2,{id:"errores-de-rabbitmq",children:"Errores de RabbitMQ"}),"\n",(0,s.jsx)(r.h3,{id:"eventos-no-se-publican",children:"Eventos No Se Publican"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Debugging:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"rabbitmqadmin list exchanges\nrabbitmqadmin list bindings\nrabbitmqadmin get queue=catalog_events_queue\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Soluci\xf3n:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Verificar conexi\xf3n a RabbitMQ"}),"\n",(0,s.jsxs)(r.li,{children:["Verificar que exchange ",(0,s.jsx)(r.code,{children:"catalog_events"})," exista"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"mejores-pr\xe1cticas",children:"Mejores Pr\xe1cticas"}),"\n",(0,s.jsx)(r.h3,{id:"1-validaci\xf3n-del-cliente",children:"1. Validaci\xf3n del Cliente"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"const validateBeforeSubmit = (data) => {\n  const errors = validateProductData(data);\n  if (errors.length > 0) {\n    showErrors(errors);\n    return false;\n  }\n  return true;\n};\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-manejo-con-retry",children:"2. Manejo con Retry"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"const apiCall = async (url, options, maxRetries = 3) => {\n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) {\n        const error = await response.json();\n        // No reintentar errores 4xx (excepto 429)\n        if (response.status >= 400 && response.status < 500 && response.status !== 429) {\n          throw error;\n        }\n        // Reintentar 5xx y 429\n        if (i < maxRetries - 1) {\n          await new Promise(r => setTimeout(r, Math.pow(2, i) * 1000));\n          continue;\n        }\n        throw error;\n      }\n      return await response.json();\n    } catch (error) {\n      if (i === maxRetries - 1) throw error;\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-mensajes-de-error-amigables",children:"3. Mensajes de Error Amigables"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"const errorMessages = {\n  'PRODUCT_SKU_EXISTS': 'Este SKU ya est\xe1 en uso',\n  'INVALID_PRODUCT_DATA': 'Datos inv\xe1lidos, revisa el formulario',\n  'PRODUCT_NOT_FOUND': 'Producto no encontrado',\n  'UNAUTHORIZED': 'Sesi\xf3n expirada, inicia sesi\xf3n nuevamente'\n};\n\nconst handleError = (error) => {\n  const message = errorMessages[error.error?.code] || 'Error inesperado';\n  showNotification({ type: 'error', message });\n};\n"})}),"\n",(0,s.jsx)(r.h2,{id:"debugging",children:"Debugging"}),"\n",(0,s.jsx)(r.h3,{id:"logs-\xfatiles",children:"Logs \xdatiles"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'# Habilitar logs DEBUG\nLOG_LEVEL=DEBUG\n\n# Logs estructurados\nlogger.info("product_created", product_id=product.id, org_id=org_id)\n'})}),"\n",(0,s.jsx)(r.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"curl http://localhost:8002/health\ncurl http://localhost:8002/health/ready\n"})}),"\n",(0,s.jsx)(r.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"./testing",children:"Testing"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"./configuracion",children:"Configuraci\xf3n"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"./api-products",children:"API Products"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"./api-variants",children:"API Variants"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>l});var d=n(6540);const s={},i=d.createContext(s);function c(e){const r=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),d.createElement(i.Provider,{value:r},e.children)}}}]);