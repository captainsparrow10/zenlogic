"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[42],{8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>o});var t=a(6540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},8632:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"anexos/diagramas","title":"Diagramas de Arquitectura","description":"Colecci\xf3n completa de diagramas de arquitectura de zenLogic ERP.","source":"@site/docs/06-anexos/03-diagramas.md","sourceDirName":"06-anexos","slug":"/anexos/diagramas","permalink":"/zenlogic/anexos/diagramas","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/06-anexos/03-diagramas.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docs","previous":{"title":"Referencias Externas","permalink":"/zenlogic/anexos/referencias"}}');var i=a(4848),r=a(8453);const s={sidebar_position:4},o="Diagramas de Arquitectura",c={},l=[{value:"Arquitectura General",id:"arquitectura-general",level:2},{value:"Vista de Alto Nivel",id:"vista-de-alto-nivel",level:3},{value:"Stack Tecnol\xf3gico",id:"stack-tecnol\xf3gico",level:3},{value:"Arquitectura Event-Driven",id:"arquitectura-event-driven",level:2},{value:"Flujo de Eventos",id:"flujo-de-eventos",level:3},{value:"Exchange y Queues",id:"exchange-y-queues",level:3},{value:"Comunicaci\xf3n entre Microservicios",id:"comunicaci\xf3n-entre-microservicios",level:2},{value:"gRPC - Validaci\xf3n de Local",id:"grpc---validaci\xf3n-de-local",level:3},{value:"Circuit Breaker Pattern",id:"circuit-breaker-pattern",level:3},{value:"Multi-tenancy",id:"multi-tenancy",level:2},{value:"Row-Level Security",id:"row-level-security",level:3},{value:"Jerarqu\xeda Multi-tenant",id:"jerarqu\xeda-multi-tenant",level:3},{value:"RBAC - Control de Acceso",id:"rbac---control-de-acceso",level:2},{value:"Flujo de Autorizaci\xf3n",id:"flujo-de-autorizaci\xf3n",level:3},{value:"Modelo de Permisos",id:"modelo-de-permisos",level:3},{value:"Cache Strategy",id:"cache-strategy",level:2},{value:"Cache-Aside Pattern",id:"cache-aside-pattern",level:3},{value:"Cache Invalidation",id:"cache-invalidation",level:3},{value:"Paginaci\xf3n Cursor-based",id:"paginaci\xf3n-cursor-based",level:2},{value:"Flujo de Paginaci\xf3n",id:"flujo-de-paginaci\xf3n",level:3},{value:"Deployment",id:"deployment",level:2},{value:"Docker Compose - Local",id:"docker-compose---local",level:3},{value:"Kubernetes - Production",id:"kubernetes---production",level:3},{value:"CI/CD Pipeline",id:"cicd-pipeline",level:2},{value:"Monitoring y Observabilidad",id:"monitoring-y-observabilidad",level:2},{value:"M\xe9tricas y Logs",id:"m\xe9tricas-y-logs",level:3},{value:"Health Checks",id:"health-checks",level:3},{value:"Resiliencia",id:"resiliencia",level:2},{value:"Retry Pattern",id:"retry-pattern",level:3},{value:"Fallback Strategy",id:"fallback-strategy",level:3},{value:"Referencias",id:"referencias",level:2}];function u(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"diagramas-de-arquitectura",children:"Diagramas de Arquitectura"})}),"\n",(0,i.jsx)(n.p,{children:"Colecci\xf3n completa de diagramas de arquitectura de zenLogic ERP."}),"\n",(0,i.jsx)(n.h2,{id:"arquitectura-general",children:"Arquitectura General"}),"\n",(0,i.jsx)(n.h3,{id:"vista-de-alto-nivel",children:"Vista de Alto Nivel"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Cliente"\n        Web[Web App]\n        Mobile[Mobile App]\n    end\n\n    subgraph "API Gateway"\n        Gateway[API Gateway / Load Balancer]\n    end\n\n    subgraph "Microservicios"\n        Auth[Auth Service<br/>:8001]\n        Catalog[Catalog Service<br/>:8002]\n        Audit[Audit Service<br/>:8003]\n    end\n\n    subgraph "Message Broker"\n        RabbitMQ[(RabbitMQ<br/>Event Bus)]\n    end\n\n    subgraph "Databases"\n        AuthDB[(Auth DB<br/>PostgreSQL)]\n        CatalogDB[(Catalog DB<br/>PostgreSQL)]\n        AuditDB[(Audit DB<br/>PostgreSQL)]\n    end\n\n    subgraph "Cache & Sessions"\n        Redis[(Redis)]\n    end\n\n    Web --\x3e Gateway\n    Mobile --\x3e Gateway\n\n    Gateway --\x3e Auth\n    Gateway --\x3e Catalog\n    Gateway --\x3e Audit\n\n    Auth --\x3e RabbitMQ\n    Catalog --\x3e RabbitMQ\n    Audit --\x3e RabbitMQ\n\n    Auth --\x3e AuthDB\n    Catalog --\x3e CatalogDB\n    Audit --\x3e AuditDB\n\n    Auth --\x3e Redis\n    Catalog --\x3e Redis\n\n    RabbitMQ --\x3e Catalog\n    RabbitMQ --\x3e Audit'}),"\n",(0,i.jsx)(n.h3,{id:"stack-tecnol\xf3gico",children:"Stack Tecnol\xf3gico"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\n    subgraph "Frontend"\n        React[React/Vue.js]\n    end\n\n    subgraph "Backend"\n        FastAPI[FastAPI<br/>Python 3.11+]\n        Uvicorn[Uvicorn<br/>ASGI Server]\n    end\n\n    subgraph "Databases"\n        PostgreSQL[PostgreSQL 15+<br/>Row-Level Security]\n        Redis[Redis 7<br/>Cache & Sessions]\n    end\n\n    subgraph "Message Broker"\n        RabbitMQ[RabbitMQ 3.12<br/>AMQP]\n    end\n\n    subgraph "Communication"\n        REST[REST APIs]\n        gRPC[gRPC<br/>Internal]\n    end\n\n    subgraph "Infrastructure"\n        Docker[Docker]\n        Kubernetes[Kubernetes]\n    end\n\n    React --\x3e REST\n    REST --\x3e FastAPI\n    FastAPI --\x3e Uvicorn\n    FastAPI --\x3e PostgreSQL\n    FastAPI --\x3e Redis\n    FastAPI --\x3e RabbitMQ\n    FastAPI --\x3e gRPC\n    Docker --\x3e Kubernetes'}),"\n",(0,i.jsx)(n.h2,{id:"arquitectura-event-driven",children:"Arquitectura Event-Driven"}),"\n",(0,i.jsx)(n.h3,{id:"flujo-de-eventos",children:"Flujo de Eventos"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Auth as Auth Service\n    participant RabbitMQ as RabbitMQ<br/>(erp.events)\n    participant Catalog as Catalog Service\n    participant Audit as Audit Service\n\n    Auth->>Auth: Create User\n    Auth->>RabbitMQ: Publish event<br/>auth.user.created\n    RabbitMQ->>Catalog: Route to catalog.events queue\n    RabbitMQ->>Audit: Route to audit.events queue\n    Catalog->>Catalog: Handle event<br/>(cache invalidation)\n    Audit->>Audit: Store audit log\n    Catalog--\x3e>RabbitMQ: ACK\n    Audit--\x3e>RabbitMQ: ACK"}),"\n",(0,i.jsx)(n.h3,{id:"exchange-y-queues",children:"Exchange y Queues"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\n    subgraph "Publishers"\n        Auth[Auth Service]\n        Catalog[Catalog Service]\n    end\n\n    subgraph "RabbitMQ"\n        Exchange[erp.events<br/>Topic Exchange]\n        Q1[catalog.events]\n        Q2[audit.events]\n        DLX[dlx.events<br/>Dead Letter Exchange]\n        DLQ[dlq.events<br/>Dead Letter Queue]\n    end\n\n    subgraph "Consumers"\n        CatalogConsumer[Catalog Consumer]\n        AuditConsumer[Audit Consumer]\n    end\n\n    Auth --\x3e|auth.user.*| Exchange\n    Auth --\x3e|auth.local.*| Exchange\n    Catalog --\x3e|catalog.product.*| Exchange\n\n    Exchange --\x3e|routing| Q1\n    Exchange --\x3e|routing| Q2\n\n    Q1 --\x3e|failed messages| DLX\n    Q2 --\x3e|failed messages| DLX\n    DLX --\x3e DLQ\n\n    Q1 --\x3e CatalogConsumer\n    Q2 --\x3e AuditConsumer'}),"\n",(0,i.jsx)(n.h2,{id:"comunicaci\xf3n-entre-microservicios",children:"Comunicaci\xf3n entre Microservicios"}),"\n",(0,i.jsx)(n.h3,{id:"grpc---validaci\xf3n-de-local",children:"gRPC - Validaci\xf3n de Local"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client as Client\n    participant Catalog as Catalog Service\n    participant gRPC as gRPC Client\n    participant Auth as Auth Service<br/>gRPC Server\n\n    Client->>Catalog: POST /products<br/>(with local_id)\n    Catalog->>gRPC: ValidateLocal(user_id, org_id, local_id)\n    gRPC->>Auth: gRPC Request :50051\n    Auth->>Auth: Query database\n    Auth--\x3e>gRPC: ValidateLocalResponse(is_valid=true)\n    gRPC--\x3e>Catalog: Return validation\n    Catalog->>Catalog: Create product\n    Catalog--\x3e>Client: 201 Created"}),"\n",(0,i.jsx)(n.h3,{id:"circuit-breaker-pattern",children:"Circuit Breaker Pattern"}),"\n",(0,i.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Closed\n    Closed --\x3e Open: Threshold failures reached\n    Open --\x3e HalfOpen: After timeout\n    HalfOpen --\x3e Closed: Success\n    HalfOpen --\x3e Open: Failure\n\n    Closed: Normal operation<br/>Requests pass through\n    Open: Failing fast<br/>Use fallback (REST)\n    HalfOpen: Testing recovery<br/>Limited requests"}),"\n",(0,i.jsx)(n.h2,{id:"multi-tenancy",children:"Multi-tenancy"}),"\n",(0,i.jsx)(n.h3,{id:"row-level-security",children:"Row-Level Security"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client\n    participant API as FastAPI Endpoint\n    participant Middleware as Tenant Middleware\n    participant DB as PostgreSQL<br/>with RLS\n\n    Client->>API: Request + JWT\n    API->>Middleware: Extract organization_id\n    Middleware->>DB: SET app.current_tenant = 'org-123'\n    DB->>DB: Enable RLS policies\n    API->>DB: SELECT * FROM products\n    DB->>DB: Apply RLS filter:<br/>WHERE organization_id = 'org-123'\n    DB--\x3e>API: Filtered results\n    API--\x3e>Client: Response"}),"\n",(0,i.jsx)(n.h3,{id:"jerarqu\xeda-multi-tenant",children:"Jerarqu\xeda Multi-tenant"}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TD\n    Org[Organization<br/>Acme Corp]\n\n    Org --\x3e Local1[Local 1<br/>Sucursal Centro]\n    Org --\x3e Local2[Local 2<br/>Sucursal Norte]\n\n    Local1 --\x3e Role1A[Role: Admin]\n    Local1 --\x3e Role1B[Role: Vendedor]\n\n    Local2 --\x3e Role2A[Role: Admin]\n    Local2 --\x3e Role2B[Role: Cajero]\n\n    Role1A --\x3e User1[Usuario: Juan<br/>Permisos: *]\n    Role1B --\x3e User2[Usuario: Mar\xeda<br/>Permisos: products.read]\n\n    Role2A --\x3e User3[Usuario: Pedro<br/>Permisos: *]\n    Role2B --\x3e User4[Usuario: Ana<br/>Permisos: sales.create]"}),"\n",(0,i.jsx)(n.h2,{id:"rbac---control-de-acceso",children:"RBAC - Control de Acceso"}),"\n",(0,i.jsx)(n.h3,{id:"flujo-de-autorizaci\xf3n",children:"Flujo de Autorizaci\xf3n"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client\n    participant API as API Endpoint\n    participant Auth as Auth Dependency\n    participant Cache as Redis Cache\n    participant DB as Database\n\n    Client->>API: Request + JWT\n    API->>Auth: Verify & Authorize\n    Auth->>Auth: Decode JWT\n    Auth->>Cache: Get permissions<br/>permissions:user-123\n\n    alt Cache Hit\n        Cache--\x3e>Auth: Return permissions\n    else Cache Miss\n        Auth->>DB: Query user permissions\n        DB--\x3e>Auth: Return permissions\n        Auth->>Cache: Cache permissions (TTL 5min)\n    end\n\n    Auth->>Auth: Check permission<br/>products.create\n\n    alt Authorized\n        Auth--\x3e>API: Continue\n        API->>API: Execute logic\n        API--\x3e>Client: 200 OK\n    else Unauthorized\n        Auth--\x3e>Client: 403 Forbidden\n    end"}),"\n",(0,i.jsx)(n.h3,{id:"modelo-de-permisos",children:"Modelo de Permisos"}),"\n",(0,i.jsx)(n.mermaid,{value:"erDiagram\n    ORGANIZATION ||--o{ LOCAL : has\n    ORGANIZATION ||--o{ USER : has\n    LOCAL ||--o{ USER_LOCAL : has\n    USER ||--o{ USER_LOCAL : belongs\n    USER_LOCAL ||--|| ROLE : has\n    ROLE ||--o{ ROLE_PERMISSION : has\n    PERMISSION ||--o{ ROLE_PERMISSION : belongs\n\n    ORGANIZATION {\n        uuid id\n        string name\n        boolean is_active\n    }\n\n    LOCAL {\n        uuid id\n        uuid organization_id\n        string name\n        string code\n    }\n\n    USER {\n        uuid id\n        uuid organization_id\n        string email\n        string username\n        boolean is_active\n    }\n\n    USER_LOCAL {\n        uuid id\n        uuid user_id\n        uuid local_id\n        uuid role_id\n    }\n\n    ROLE {\n        uuid id\n        uuid organization_id\n        string name\n        string scope\n    }\n\n    PERMISSION {\n        uuid id\n        string name\n        string description\n    }\n\n    ROLE_PERMISSION {\n        uuid role_id\n        uuid permission_id\n    }"}),"\n",(0,i.jsx)(n.h2,{id:"cache-strategy",children:"Cache Strategy"}),"\n",(0,i.jsx)(n.h3,{id:"cache-aside-pattern",children:"Cache-Aside Pattern"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant App as Application\n    participant Cache as Redis Cache\n    participant DB as PostgreSQL\n\n    App->>Cache: GET product:123\n\n    alt Cache Hit\n        Cache--\x3e>App: Return cached data\n    else Cache Miss\n        Cache--\x3e>App: null\n        App->>DB: SELECT * FROM products<br/>WHERE id = '123'\n        DB--\x3e>App: Product data\n        App->>Cache: SET product:123<br/>TTL 300s\n        App->>App: Return data\n    end"}),"\n",(0,i.jsx)(n.h3,{id:"cache-invalidation",children:"Cache Invalidation"}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\n    participant Service1 as Catalog Service\n    participant DB as Database\n    participant RabbitMQ as RabbitMQ\n    participant PubSub as Redis Pub/Sub\n    participant Service2 as Other Service\n    participant Cache as Cache\n\n    Service1->>DB: UPDATE product\n    Service1->>Cache: DELETE product:123\n    Service1->>RabbitMQ: Publish event<br/>catalog.product.updated\n    Service1->>PubSub: PUBLISH cache_invalidation<br/>{pattern: "product:123"}\n\n    PubSub->>Service2: Receive invalidation\n    Service2->>Cache: DELETE product:123'}),"\n",(0,i.jsx)(n.h2,{id:"paginaci\xf3n-cursor-based",children:"Paginaci\xf3n Cursor-based"}),"\n",(0,i.jsx)(n.h3,{id:"flujo-de-paginaci\xf3n",children:"Flujo de Paginaci\xf3n"}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\n    participant Client\n    participant API as Catalog API\n    participant DB as Database\n\n    Client->>API: GET /products?limit=10\n    API->>DB: SELECT * FROM products<br/>ORDER BY created_at, id<br/>LIMIT 11\n    DB--\x3e>API: 11 products\n    API->>API: Take first 10<br/>has_next = true<br/>cursor = encode(last)\n    API--\x3e>Client: {<br/>  items: [10 products],<br/>  has_next: true,<br/>  cursor: "eyJ..."<br/>}\n\n    Client->>API: GET /products?cursor=eyJ...&limit=10\n    API->>API: Decode cursor<br/>(created_at, id)\n    API->>DB: SELECT * FROM products<br/>WHERE (created_at, id) > (cursor)<br/>ORDER BY created_at, id<br/>LIMIT 11\n    DB--\x3e>API: Next 11 products\n    API->>API: Take first 10<br/>has_next = true\n    API--\x3e>Client: {<br/>  items: [10 products],<br/>  has_next: true,<br/>  cursor: "eyJ..."<br/>}'}),"\n",(0,i.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,i.jsx)(n.h3,{id:"docker-compose---local",children:"Docker Compose - Local"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Docker Compose"\n        subgraph "Services"\n            Auth[auth-service:8001]\n            Catalog[catalog-service:8002]\n            Audit[audit-service:8003]\n        end\n\n        subgraph "Infrastructure"\n            PostgreSQL[postgres:5432]\n            Redis[redis:6379]\n            RabbitMQ[rabbitmq:5672<br/>management:15672]\n        end\n\n        subgraph "Networks"\n            Network[erp-network]\n        end\n\n        Auth --\x3e Network\n        Catalog --\x3e Network\n        Audit --\x3e Network\n        PostgreSQL --\x3e Network\n        Redis --\x3e Network\n        RabbitMQ --\x3e Network\n    end'}),"\n",(0,i.jsx)(n.h3,{id:"kubernetes---production",children:"Kubernetes - Production"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Kubernetes Cluster"\n        subgraph "Ingress Layer"\n            Ingress[Ingress Controller<br/>NGINX]\n        end\n\n        subgraph "Deployments"\n            AuthDeploy[Auth Deployment<br/>3 replicas]\n            CatalogDeploy[Catalog Deployment<br/>3 replicas]\n            AuditDeploy[Audit Deployment<br/>2 replicas]\n        end\n\n        subgraph "Services"\n            AuthSvc[auth-service]\n            CatalogSvc[catalog-service]\n            AuditSvc[audit-service]\n        end\n\n        subgraph "StatefulSets"\n            PostgreSQL[PostgreSQL<br/>StatefulSet]\n            Redis[Redis<br/>StatefulSet]\n            RabbitMQ[RabbitMQ<br/>StatefulSet]\n        end\n\n        subgraph "ConfigMaps & Secrets"\n            ConfigMap[ConfigMaps]\n            Secrets[Secrets]\n        end\n\n        Ingress --\x3e AuthSvc\n        Ingress --\x3e CatalogSvc\n        Ingress --\x3e AuditSvc\n\n        AuthSvc --\x3e AuthDeploy\n        CatalogSvc --\x3e CatalogDeploy\n        AuditSvc --\x3e AuditDeploy\n\n        AuthDeploy --\x3e PostgreSQL\n        AuthDeploy --\x3e Redis\n        AuthDeploy --\x3e RabbitMQ\n\n        CatalogDeploy --\x3e PostgreSQL\n        CatalogDeploy --\x3e Redis\n        CatalogDeploy --\x3e RabbitMQ\n\n        AuditDeploy --\x3e PostgreSQL\n        AuditDeploy --\x3e RabbitMQ\n\n        AuthDeploy --\x3e ConfigMap\n        AuthDeploy --\x3e Secrets\n        CatalogDeploy --\x3e ConfigMap\n        CatalogDeploy --\x3e Secrets\n    end'}),"\n",(0,i.jsx)(n.h2,{id:"cicd-pipeline",children:"CI/CD Pipeline"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\n    subgraph "Developer"\n        Dev[Git Push]\n    end\n\n    subgraph "GitHub Actions"\n        Checkout[Checkout Code]\n        Lint[Lint & Format<br/>black, flake8]\n        Test[Run Tests<br/>pytest]\n        Build[Build Docker Image]\n        Push[Push to Registry]\n        Deploy[Deploy to K8s]\n    end\n\n    subgraph "Registry"\n        DockerHub[Docker Registry]\n    end\n\n    subgraph "Kubernetes"\n        K8s[Kubernetes Cluster]\n    end\n\n    Dev --\x3e Checkout\n    Checkout --\x3e Lint\n    Lint --\x3e Test\n    Test --\x3e Build\n    Build --\x3e Push\n    Push --\x3e DockerHub\n    DockerHub --\x3e Deploy\n    Deploy --\x3e K8s'}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-y-observabilidad",children:"Monitoring y Observabilidad"}),"\n",(0,i.jsx)(n.h3,{id:"m\xe9tricas-y-logs",children:"M\xe9tricas y Logs"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Microservicios"\n        Auth[Auth Service]\n        Catalog[Catalog Service]\n        Audit[Audit Service]\n    end\n\n    subgraph "Observability Stack"\n        Prometheus[Prometheus<br/>Metrics Collection]\n        Grafana[Grafana<br/>Dashboards]\n        Loki[Loki<br/>Log Aggregation]\n        Jaeger[Jaeger<br/>Distributed Tracing]\n    end\n\n    Auth --\x3e Prometheus\n    Catalog --\x3e Prometheus\n    Audit --\x3e Prometheus\n\n    Auth --\x3e Loki\n    Catalog --\x3e Loki\n    Audit --\x3e Loki\n\n    Auth --\x3e Jaeger\n    Catalog --\x3e Jaeger\n    Audit --\x3e Jaeger\n\n    Prometheus --\x3e Grafana\n    Loki --\x3e Grafana\n    Jaeger --\x3e Grafana'}),"\n",(0,i.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant K8s as Kubernetes\n    participant Service as Microservice\n    participant DB as PostgreSQL\n    participant Redis\n    participant RabbitMQ\n\n    loop Every 10s\n        K8s->>Service: GET /health\n        Service->>DB: SELECT 1\n        Service->>Redis: PING\n        Service->>RabbitMQ: Check connection\n\n        alt All Healthy\n            DB--\x3e>Service: OK\n            Redis--\x3e>Service: PONG\n            RabbitMQ--\x3e>Service: Connected\n            Service--\x3e>K8s: 200 OK\n        else Unhealthy\n            Service--\x3e>K8s: 503 Service Unavailable\n            K8s->>K8s: Restart pod\n        end\n    end"}),"\n",(0,i.jsx)(n.h2,{id:"resiliencia",children:"Resiliencia"}),"\n",(0,i.jsx)(n.h3,{id:"retry-pattern",children:"Retry Pattern"}),"\n",(0,i.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Attempt1: Initial Request\n    Attempt1 --\x3e Success: Response OK\n    Attempt1 --\x3e Wait1: Error (5xx)\n    Wait1 --\x3e Attempt2: Wait 1s\n    Attempt2 --\x3e Success: Response OK\n    Attempt2 --\x3e Wait2: Error (5xx)\n    Wait2 --\x3e Attempt3: Wait 2s\n    Attempt3 --\x3e Success: Response OK\n    Attempt3 --\x3e Failed: Error (5xx)\n    Success --\x3e [*]\n    Failed --\x3e [*]: Max retries reached"}),"\n",(0,i.jsx)(n.h3,{id:"fallback-strategy",children:"Fallback Strategy"}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TD\n    Request[Incoming Request]\n\n    Request --\x3e Primary{Primary:<br/>gRPC}\n\n    Primary --\x3e|Success| Response[Return Response]\n    Primary --\x3e|Failure| CB{Circuit<br/>Breaker<br/>Open?}\n\n    CB --\x3e|Yes| Fallback[Fallback:<br/>REST API]\n    CB --\x3e|No| Retry[Retry gRPC]\n\n    Retry --\x3e|Success| Response\n    Retry --\x3e|Failure| Fallback\n\n    Fallback --\x3e|Success| Response\n    Fallback --\x3e|Failure| Error[Return Error]\n\n    Response --\x3e End[End]\n    Error --\x3e End"}),"\n",(0,i.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,i.jsx)(n.p,{children:"Estos diagramas est\xe1n integrados a lo largo de toda la documentaci\xf3n. Para m\xe1s detalles:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/arquitectura/vision-general",children:"Arquitectura General - Visi\xf3n General"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/arquitectura/arquitectura-event-driven",children:"Event-Driven Architecture"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/arquitectura/multi-tenancy",children:"Multi-tenancy"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/arquitectura/seguridad-rbac",children:"RBAC"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/microservicios/catalog-service/cache-strategy",children:"Catalog Service - Cache Strategy"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/microservicios/catalog-service/paginacion-cursor",children:"Catalog Service - Cursor Pagination"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);