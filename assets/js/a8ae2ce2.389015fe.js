"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[1674],{8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>a});var s=r(6540);const d={},i=s.createContext(d);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),s.createElement(i.Provider,{value:n},e.children)}},8674:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"microservicios/inventory-service/api-transfers","title":"Transfers API","description":"API REST para gesti\xf3n de transferencias de inventario entre bodegas con estados, aprobaciones y tracking.","source":"@site/docs/02-microservicios/inventory-service/11-api-transfers.md","sourceDirName":"02-microservicios/inventory-service","slug":"/microservicios/inventory-service/api-transfers","permalink":"/zenlogic/microservicios/inventory-service/api-transfers","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/inventory-service/11-api-transfers.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"docs","previous":{"title":"Warehouses API","permalink":"/zenlogic/microservicios/inventory-service/api-warehouses"},"next":{"title":"Adjustments API","permalink":"/zenlogic/microservicios/inventory-service/api-adjustments"}}');var d=r(4848),i=r(8453);const c={sidebar_position:11},a="Transfers API",t={},l=[{value:"Endpoints",id:"endpoints",level:2},{value:"Listar Transferencias",id:"listar-transferencias",level:3},{value:"Obtener Transferencia por ID",id:"obtener-transferencia-por-id",level:3},{value:"Crear Transferencia",id:"crear-transferencia",level:3},{value:"Aprobar Transferencia",id:"aprobar-transferencia",level:3},{value:"Marcar como Enviada",id:"marcar-como-enviada",level:3},{value:"Recibir Transferencia",id:"recibir-transferencia",level:3},{value:"Cancelar Transferencia",id:"cancelar-transferencia",level:3},{value:"Estados de Transferencia",id:"estados-de-transferencia",level:2},{value:"Permisos Requeridos",id:"permisos-requeridos",level:2},{value:"Eventos Publicados",id:"eventos-publicados",level:2},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"transfers-api",children:"Transfers API"})}),"\n",(0,d.jsx)(n.p,{children:"API REST para gesti\xf3n de transferencias de inventario entre bodegas con estados, aprobaciones y tracking."}),"\n",(0,d.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,d.jsx)(n.h3,{id:"listar-transferencias",children:"Listar Transferencias"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"GET /api/v1/transfers\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Par\xe1metro"}),(0,d.jsx)(n.th,{children:"Tipo"}),(0,d.jsx)(n.th,{children:"Requerido"}),(0,d.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"from_warehouse_id"})}),(0,d.jsx)(n.td,{children:"UUID"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Bodega origen"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"to_warehouse_id"})}),(0,d.jsx)(n.td,{children:"UUID"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Bodega destino"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"status"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"pending, approved, in_transit, received, cancelled"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"transfer_type"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"regular, emergency, return"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"requested_by"})}),(0,d.jsx)(n.td,{children:"UUID"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Usuario solicitante"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"date_from"})}),(0,d.jsx)(n.td,{children:"date"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Fecha desde"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"date_to"})}),(0,d.jsx)(n.td,{children:"date"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Fecha hasta"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cursor"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Cursor de paginaci\xf3n"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"limit"})}),(0,d.jsx)(n.td,{children:"integer"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Resultados por p\xe1gina (max: 100)"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "edges": [\n      {\n        "cursor": "dHJhbnNfMTIz",\n        "node": {\n          "transfer_id": "trans_123",\n          "from_warehouse": {\n            "warehouse_id": "wh_001",\n            "name": "Bodega Principal",\n            "code": "WH-001"\n          },\n          "to_warehouse": {\n            "warehouse_id": "wh_002",\n            "name": "Bodega Sucursal",\n            "code": "WH-002"\n          },\n          "status": "in_transit",\n          "transfer_type": "regular",\n          "items_count": 5,\n          "total_quantity": 150,\n          "dates": {\n            "scheduled_date": "2025-11-25",\n            "shipped_date": "2025-11-24T08:00:00Z",\n            "received_date": null,\n            "created_at": "2025-11-23T10:00:00Z"\n          },\n          "requested_by": {\n            "user_id": "user_456",\n            "name": "Juan P\xe9rez"\n          },\n          "approved_by": {\n            "user_id": "user_789",\n            "name": "Mar\xeda Garc\xeda"\n          },\n          "notes": "Reabastecimiento semanal"\n        }\n      }\n    ],\n    "pageInfo": {\n      "hasNextPage": true,\n      "totalCount": 45\n    }\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/transfers",\n  "requestId": "req_trans123"\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"obtener-transferencia-por-id",children:"Obtener Transferencia por ID"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"GET /api/v1/transfers/{transferId}\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "transfer_id": "trans_123",\n    "from_warehouse": {\n      "warehouse_id": "wh_001",\n      "name": "Bodega Principal",\n      "code": "WH-001"\n    },\n    "to_warehouse": {\n      "warehouse_id": "wh_002",\n      "name": "Bodega Sucursal",\n      "code": "WH-002"\n    },\n    "status": "in_transit",\n    "transfer_type": "regular",\n    "items": [\n      {\n        "transfer_item_id": "item_001",\n        "variant_id": "var_456",\n        "variant": {\n          "sku": "PROD-001",\n          "name": "Producto Ejemplo"\n        },\n        "quantities": {\n          "requested": 50,\n          "sent": 50,\n          "received": 0\n        },\n        "lot_number": "LOT-2025-001",\n        "condition": "good"\n      },\n      {\n        "transfer_item_id": "item_002",\n        "variant_id": "var_457",\n        "variant": {\n          "sku": "PROD-002",\n          "name": "Producto Ejemplo 2"\n        },\n        "quantities": {\n          "requested": 100,\n          "sent": 100,\n          "received": 0\n        },\n        "lot_number": "LOT-2025-002",\n        "condition": "good"\n      }\n    ],\n    "dates": {\n      "scheduled_date": "2025-11-25",\n      "shipped_date": "2025-11-24T08:00:00Z",\n      "received_date": null,\n      "created_at": "2025-11-23T10:00:00Z"\n    },\n    "people": {\n      "requested_by": {\n        "user_id": "user_456",\n        "name": "Juan P\xe9rez"\n      },\n      "approved_by": {\n        "user_id": "user_789",\n        "name": "Mar\xeda Garc\xeda",\n        "approved_at": "2025-11-23T14:00:00Z"\n      },\n      "received_by": null\n    },\n    "notes": "Reabastecimiento semanal programado",\n    "tracking_history": [\n      {\n        "status": "pending",\n        "timestamp": "2025-11-23T10:00:00Z",\n        "user": "Juan P\xe9rez"\n      },\n      {\n        "status": "approved",\n        "timestamp": "2025-11-23T14:00:00Z",\n        "user": "Mar\xeda Garc\xeda"\n      },\n      {\n        "status": "in_transit",\n        "timestamp": "2025-11-24T08:00:00Z",\n        "user": "Sistema"\n      }\n    ]\n  },\n  "timestamp": "2025-11-23T15:00:00Z",\n  "path": "/api/v1/transfers/trans_123",\n  "requestId": "req_gettrans123"\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"crear-transferencia",children:"Crear Transferencia"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"POST /api/v1/transfers\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "from_warehouse_id": "wh_001",\n  "to_warehouse_id": "wh_002",\n  "transfer_type": "regular",\n  "scheduled_date": "2025-11-30",\n  "items": [\n    {\n      "variant_id": "var_456",\n      "quantity": 50,\n      "lot_number": "LOT-2025-001"\n    },\n    {\n      "variant_id": "var_457",\n      "quantity": 100,\n      "lot_number": "LOT-2025-002"\n    }\n  ],\n  "notes": "Transferencia de reabastecimiento mensual",\n  "auto_approve": false\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Campos:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Campo"}),(0,d.jsx)(n.th,{children:"Tipo"}),(0,d.jsx)(n.th,{children:"Requerido"}),(0,d.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"from_warehouse_id"})}),(0,d.jsx)(n.td,{children:"UUID"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"Bodega origen"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"to_warehouse_id"})}),(0,d.jsx)(n.td,{children:"UUID"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"Bodega destino"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"transfer_type"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"regular, emergency, return (default: regular)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"scheduled_date"})}),(0,d.jsx)(n.td,{children:"date"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Fecha programada de env\xedo"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items"})}),(0,d.jsx)(n.td,{children:"array"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"Items a transferir (m\xednimo 1)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].variant_id"})}),(0,d.jsx)(n.td,{children:"UUID"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"ID de variante"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].quantity"})}),(0,d.jsx)(n.td,{children:"integer"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"Cantidad a transferir"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].lot_number"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"N\xfamero de lote"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].serial_number"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"N\xfamero de serie"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"notes"})}),(0,d.jsx)(n.td,{children:"text"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Notas adicionales"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"auto_approve"})}),(0,d.jsx)(n.td,{children:"boolean"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Auto-aprobar si es permitido (default: false)"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Bodegas deben ser diferentes"}),"\n",(0,d.jsx)(n.li,{children:"Stock disponible en bodega origen"}),"\n",(0,d.jsx)(n.li,{children:"Cantidad mayor a 0"}),"\n",(0,d.jsx)(n.li,{children:"Si lot_number, debe existir en bodega origen"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Respuesta Exitosa (201 Created):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 201,\n  "data": {\n    "transfer_id": "trans_new456",\n    "status": "pending",\n    "from_warehouse_id": "wh_001",\n    "to_warehouse_id": "wh_002",\n    "items_count": 2,\n    "total_quantity_requested": 150,\n    "requires_approval": true,\n    "created_at": "2025-11-23T16:00:00Z"\n  },\n  "timestamp": "2025-11-23T16:00:00Z",\n  "path": "/api/v1/transfers",\n  "requestId": "req_createtrans456"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"400"})," - ",(0,d.jsx)(n.code,{children:"INVALID_TRANSFER_DATA"}),": Datos inv\xe1lidos"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"400"})," - ",(0,d.jsx)(n.code,{children:"SAME_WAREHOUSE"}),": Bodegas deben ser diferentes"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"400"})," - ",(0,d.jsx)(n.code,{children:"INSUFFICIENT_STOCK"}),": Stock insuficiente en origen"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"404"})," - ",(0,d.jsx)(n.code,{children:"WAREHOUSE_NOT_FOUND"}),": Bodega no existe"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"404"})," - ",(0,d.jsx)(n.code,{children:"VARIANT_NOT_FOUND"}),": Variante no existe"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"404"})," - ",(0,d.jsx)(n.code,{children:"LOT_NOT_FOUND"}),": Lote no existe en bodega origen"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Evento Publicado:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.created",\n  "data": {\n    "transfer_id": "trans_new456",\n    "from_warehouse_id": "wh_001",\n    "to_warehouse_id": "wh_002",\n    "items_count": 2,\n    "status": "pending"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"aprobar-transferencia",children:"Aprobar Transferencia"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"POST /api/v1/transfers/{transferId}/approve\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "notes": "Aprobado - Stock verificado"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "transfer_id": "trans_123",\n    "status": "approved",\n    "approved_by": {\n      "user_id": "user_789",\n      "name": "Mar\xeda Garc\xeda"\n    },\n    "approved_at": "2025-11-23T16:30:00Z"\n  },\n  "timestamp": "2025-11-23T16:30:00Z",\n  "path": "/api/v1/transfers/trans_123/approve",\n  "requestId": "req_approve123"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"404"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_NOT_FOUND"}),": Transferencia no existe"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_ALREADY_APPROVED"}),": Ya fue aprobada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_ALREADY_SHIPPED"}),": Ya fue enviada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"403"})," - ",(0,d.jsx)(n.code,{children:"INSUFFICIENT_PERMISSIONS"}),": Sin permisos para aprobar"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Evento Publicado:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.approved",\n  "data": {\n    "transfer_id": "trans_123",\n    "approved_by": "user_789"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"marcar-como-enviada",children:"Marcar como Enviada"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"POST /api/v1/transfers/{transferId}/ship\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "items": [\n    {\n      "transfer_item_id": "item_001",\n      "quantity_sent": 50\n    },\n    {\n      "transfer_item_id": "item_002",\n      "quantity_sent": 95\n    }\n  ],\n  "shipped_date": "2025-11-24T08:00:00Z",\n  "notes": "Enviado en cami\xf3n TR-123"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "transfer_id": "trans_123",\n    "status": "in_transit",\n    "shipped_date": "2025-11-24T08:00:00Z",\n    "items_shipped": 2,\n    "total_quantity_sent": 145,\n    "stock_movements_created": [\n      {\n        "movement_id": "mov_out001",\n        "warehouse_id": "wh_001",\n        "type": "out",\n        "quantity": -50\n      },\n      {\n        "movement_id": "mov_out002",\n        "warehouse_id": "wh_001",\n        "type": "out",\n        "quantity": -95\n      }\n    ]\n  },\n  "timestamp": "2025-11-24T08:00:00Z",\n  "path": "/api/v1/transfers/trans_123/ship",\n  "requestId": "req_ship123"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_NOT_APPROVED"}),": Transferencia no aprobada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_ALREADY_SHIPPED"}),": Ya fue enviada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"400"})," - ",(0,d.jsx)(n.code,{children:"QUANTITY_EXCEEDS_REQUESTED"}),": Cantidad enviada mayor a solicitada"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Evento Publicado:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.in_transit",\n  "data": {\n    "transfer_id": "trans_123",\n    "shipped_date": "2025-11-24T08:00:00Z"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"recibir-transferencia",children:"Recibir Transferencia"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"POST /api/v1/transfers/{transferId}/receive\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "items": [\n    {\n      "transfer_item_id": "item_001",\n      "quantity_received": 50,\n      "condition": "good"\n    },\n    {\n      "transfer_item_id": "item_002",\n      "quantity_received": 90,\n      "condition": "good",\n      "notes": "5 unidades da\xf1adas en tr\xe1nsito"\n    }\n  ],\n  "received_date": "2025-11-25T10:00:00Z",\n  "notes": "Recibido completo - 5 unidades con da\xf1os menores"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Campos:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Campo"}),(0,d.jsx)(n.th,{children:"Tipo"}),(0,d.jsx)(n.th,{children:"Requerido"}),(0,d.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items"})}),(0,d.jsx)(n.td,{children:"array"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"Items recibidos"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].transfer_item_id"})}),(0,d.jsx)(n.td,{children:"UUID"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"ID del item de transferencia"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].quantity_received"})}),(0,d.jsx)(n.td,{children:"integer"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"Cantidad recibida"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].condition"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"S\xed"}),(0,d.jsx)(n.td,{children:"good, damaged"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items[].notes"})}),(0,d.jsx)(n.td,{children:"text"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Notas del item"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"received_date"})}),(0,d.jsx)(n.td,{children:"datetime"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Fecha/hora de recepci\xf3n (default: now)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"notes"})}),(0,d.jsx)(n.td,{children:"text"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Notas generales"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "transfer_id": "trans_123",\n    "status": "received",\n    "received_date": "2025-11-25T10:00:00Z",\n    "items_received": 2,\n    "total_quantity_received": 140,\n    "discrepancies": [\n      {\n        "transfer_item_id": "item_002",\n        "variant_id": "var_457",\n        "sent": 95,\n        "received": 90,\n        "difference": -5,\n        "reason": "damaged"\n      }\n    ],\n    "stock_movements_created": [\n      {\n        "movement_id": "mov_in001",\n        "warehouse_id": "wh_002",\n        "type": "in",\n        "quantity": 50\n      },\n      {\n        "movement_id": "mov_in002",\n        "warehouse_id": "wh_002",\n        "type": "in",\n        "quantity": 90\n      }\n    ],\n    "received_by": {\n      "user_id": "user_999",\n      "name": "Pedro L\xf3pez"\n    }\n  },\n  "timestamp": "2025-11-25T10:00:00Z",\n  "path": "/api/v1/transfers/trans_123/receive",\n  "requestId": "req_receive123"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_NOT_IN_TRANSIT"}),": Transferencia no est\xe1 en tr\xe1nsito"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_ALREADY_RECEIVED"}),": Ya fue recibida"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"400"})," - ",(0,d.jsx)(n.code,{children:"QUANTITY_EXCEEDS_SENT"}),": Cantidad recibida mayor a enviada"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Evento Publicado:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.received",\n  "data": {\n    "transfer_id": "trans_123",\n    "received_date": "2025-11-25T10:00:00Z",\n    "discrepancies": true,\n    "discrepancies_count": 1\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"cancelar-transferencia",children:"Cancelar Transferencia"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"POST /api/v1/transfers/{transferId}/cancel\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "reason": "Stock insuficiente en origen",\n  "notes": "Cliente cancel\xf3 orden relacionada"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Respuesta Exitosa (200 OK):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "transfer_id": "trans_123",\n    "status": "cancelled",\n    "cancellation_reason": "Stock insuficiente en origen",\n    "cancelled_at": "2025-11-23T17:00:00Z"\n  },\n  "timestamp": "2025-11-23T17:00:00Z",\n  "path": "/api/v1/transfers/trans_123/cancel",\n  "requestId": "req_cancel123"\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Solo se puede cancelar si status = pending o approved"}),"\n",(0,d.jsx)(n.li,{children:"No se puede cancelar si ya fue enviada o recibida"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"C\xf3digos de Error:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_ALREADY_SHIPPED"}),": No se puede cancelar una vez enviada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"409"})," - ",(0,d.jsx)(n.code,{children:"TRANSFER_ALREADY_RECEIVED"}),": No se puede cancelar una vez recibida"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Evento Publicado:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "event": "inventory.transfer.cancelled",\n  "data": {\n    "transfer_id": "trans_123",\n    "reason": "Stock insuficiente en origen"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"estados-de-transferencia",children:"Estados de Transferencia"}),"\n",(0,d.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e pending: Crear\n    pending --\x3e approved: Aprobar\n    pending --\x3e cancelled: Cancelar\n    approved --\x3e in_transit: Enviar\n    approved --\x3e cancelled: Cancelar\n    in_transit --\x3e received: Recibir\n    in_transit --\x3e cancelled: Cancelar (excepci\xf3n)\n    received --\x3e [*]\n    cancelled --\x3e [*]"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Flujo Normal:"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"pending"})," - Creada, esperando aprobaci\xf3n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"approved"})," - Aprobada por manager"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"in_transit"})," - Mercanc\xeda enviada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"received"})," - Recibida en destino"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Transiciones Permitidas:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"pending"})," \u2192 ",(0,d.jsx)(n.code,{children:"approved"})," (Aprobar)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"pending"})," \u2192 ",(0,d.jsx)(n.code,{children:"cancelled"})," (Cancelar)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"approved"})," \u2192 ",(0,d.jsx)(n.code,{children:"in_transit"})," (Enviar)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"approved"})," \u2192 ",(0,d.jsx)(n.code,{children:"cancelled"})," (Cancelar)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"in_transit"})," \u2192 ",(0,d.jsx)(n.code,{children:"received"})," (Recibir)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"in_transit"})," \u2192 ",(0,d.jsx)(n.code,{children:"cancelled"})," (Cancelar por excepci\xf3n - requiere permiso especial)"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"permisos-requeridos",children:"Permisos Requeridos"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Endpoint"}),(0,d.jsx)(n.th,{children:"Permiso Requerido"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GET /transfers"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inventory.transfers.read"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GET /transfers/{id}"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inventory.transfers.read"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POST /transfers"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inventory.transfers.create"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POST /transfers/{id}/approve"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inventory.transfers.approve"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POST /transfers/{id}/ship"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inventory.transfers.ship"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POST /transfers/{id}/receive"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inventory.transfers.receive"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POST /transfers/{id}/cancel"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inventory.transfers.cancel"})})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"eventos-publicados",children:"Eventos Publicados"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"inventory.transfer.created"})," - Transferencia creada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"inventory.transfer.approved"})," - Transferencia aprobada"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"inventory.transfer.in_transit"})," - En tr\xe1nsito"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"inventory.transfer.received"})," - Recibida"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"inventory.transfer.cancelled"})," - Cancelada"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"./api-adjustments",children:"API: Adjustments"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"./api-locations",children:"API: Locations"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"./flujos-negocio",children:"Flujos de Negocio"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}}}]);