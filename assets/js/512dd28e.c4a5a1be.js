"use strict";(globalThis.webpackChunkerp_docs=globalThis.webpackChunkerp_docs||[]).push([[8308],{3832:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"microservicios/catalog-service/api-price-tiers","title":"Price Tiers API","description":"API REST para la gesti\xf3n de niveles de precios (price tiers) por volumen en el Catalog Service.","source":"@site/docs/02-microservicios/catalog-service/21-api-price-tiers.md","sourceDirName":"02-microservicios/catalog-service","slug":"/microservicios/catalog-service/api-price-tiers","permalink":"/zenlogic/microservicios/catalog-service/api-price-tiers","draft":false,"unlisted":false,"editUrl":"https://github.com/your-repo/edit/main/docs/02-microservicios/catalog-service/21-api-price-tiers.md","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{},"sidebar":"docs","previous":{"title":"Tags API","permalink":"/zenlogic/microservicios/catalog-service/api-tags"},"next":{"title":"Images API","permalink":"/zenlogic/microservicios/catalog-service/api-images"}}');var s=i(4848),c=i(8453);const t={},d="Price Tiers API",a={},l=[{value:"Endpoints",id:"endpoints",level:2},{value:"Listar Price Tiers",id:"listar-price-tiers",level:3},{value:"Obtener Price Tier por ID",id:"obtener-price-tier-por-id",level:3},{value:"Crear Price Tier",id:"crear-price-tier",level:3},{value:"Actualizar Price Tier",id:"actualizar-price-tier",level:3},{value:"Eliminar Price Tier",id:"eliminar-price-tier",level:3},{value:"Price Tier Rules",id:"price-tier-rules",level:2},{value:"Listar Reglas de un Price Tier",id:"listar-reglas-de-un-price-tier",level:3},{value:"Crear Regla de Precio",id:"crear-regla-de-precio",level:3},{value:"Actualizar Regla de Precio",id:"actualizar-regla-de-precio",level:3},{value:"Eliminar Regla de Precio",id:"eliminar-regla-de-precio",level:3},{value:"Obtener Precio por Variante y Cantidad",id:"obtener-precio-por-variante-y-cantidad",level:3},{value:"Eventos Publicados",id:"eventos-publicados",level:2},{value:"price_tier.created",id:"price_tiercreated",level:3},{value:"price_tier.updated",id:"price_tierupdated",level:3},{value:"price_tier.rule.created",id:"price_tierrulecreated",level:3},{value:"Permisos Requeridos",id:"permisos-requeridos",level:2},{value:"Cach\xe9",id:"cach\xe9",level:2},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Ejemplos de Uso",id:"ejemplos-de-uso",level:2},{value:"Crear price tier con m\xfaltiples reglas",id:"crear-price-tier-con-m\xfaltiples-reglas",level:3},{value:"Calcular precio para cantidad espec\xedfica",id:"calcular-precio-para-cantidad-espec\xedfica",level:3},{value:"Listar todas las reglas de un variant",id:"listar-todas-las-reglas-de-un-variant",level:3},{value:"L\xf3gica de Aplicaci\xf3n de Price Tiers",id:"l\xf3gica-de-aplicaci\xf3n-de-price-tiers",level:2},{value:"Prioridad",id:"prioridad",level:3},{value:"Selecci\xf3n de Regla",id:"selecci\xf3n-de-regla",level:3},{value:"Ejemplo",id:"ejemplo",level:3}];function o(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"price-tiers-api",children:"Price Tiers API"})}),"\n",(0,s.jsx)(r.p,{children:"API REST para la gesti\xf3n de niveles de precios (price tiers) por volumen en el Catalog Service."}),"\n",(0,s.jsx)(r.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,s.jsx)(r.h3,{id:"listar-price-tiers",children:"Listar Price Tiers"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"GET /api/v1/price-tiers\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Requerido"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"first"})}),(0,s.jsx)(r.td,{children:"integer"}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:"N\xfamero de elementos a retornar (default: 20, max: 100)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"after"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:"Cursor para paginaci\xf3n hacia adelante"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"last"})}),(0,s.jsx)(r.td,{children:"integer"}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:"N\xfamero de elementos anteriores a retornar"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"before"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:"Cursor para paginaci\xf3n hacia atr\xe1s"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"search"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:"B\xfasqueda por nombre"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"is_active"})}),(0,s.jsx)(r.td,{children:"boolean"}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:"Filtrar por estado activo/inactivo"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "edges": [\n      {\n        "cursor": "cHJpY2VfdGllcl8xMjM=",\n        "node": {\n          "price_tier_id": "pt_123",\n          "organization_id": "org_456",\n          "name": "Wholesale",\n          "slug": "wholesale",\n          "description": "Wholesale pricing for bulk orders",\n          "priority": 1,\n          "is_active": true,\n          "metadata": {\n            "customer_type": "B2B",\n            "min_order_value": 1000\n          },\n          "rules_count": 5,\n          "created_at": "2025-01-15T10:00:00Z",\n          "updated_at": "2025-11-20T14:30:00Z"\n        }\n      },\n      {\n        "cursor": "cHJpY2VfdGllcl8xMjQ=",\n        "node": {\n          "price_tier_id": "pt_124",\n          "organization_id": "org_456",\n          "name": "Retail",\n          "slug": "retail",\n          "description": "Standard retail pricing",\n          "priority": 2,\n          "is_active": true,\n          "metadata": {\n            "customer_type": "B2C"\n          },\n          "rules_count": 3,\n          "created_at": "2025-01-15T11:00:00Z",\n          "updated_at": "2025-11-20T15:00:00Z"\n        }\n      }\n    ],\n    "pageInfo": {\n      "hasNextPage": false,\n      "hasPreviousPage": false,\n      "startCursor": "cHJpY2VfdGllcl8xMjM=",\n      "endCursor": "cHJpY2VfdGllcl8xMjQ=",\n      "totalCount": 2\n    }\n  },\n  "timestamp": "2025-11-23T11:20:00Z",\n  "path": "/api/v1/price-tiers",\n  "requestId": "req_price_tiers_list_abc123"\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"obtener-price-tier-por-id",children:"Obtener Price Tier por ID"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"GET /api/v1/price-tiers/{priceTierId}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"priceTierId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico del price tier"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"include_rules"})}),(0,s.jsx)(r.td,{children:"boolean"}),(0,s.jsx)(r.td,{children:"Incluir reglas de precios (default: true)"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "price_tier_id": "pt_123",\n    "organization_id": "org_456",\n    "name": "Wholesale",\n    "slug": "wholesale",\n    "description": "Wholesale pricing for bulk orders",\n    "priority": 1,\n    "is_active": true,\n    "metadata": {\n      "customer_type": "B2B",\n      "min_order_value": 1000\n    },\n    "rules_count": 5,\n    "rules": [\n      {\n        "rule_id": "ptr_001",\n        "variant_id": "var_456",\n        "min_qty": 10,\n        "price": 45.00,\n        "variant": {\n          "variant_id": "var_456",\n          "sku": "PROD-001-RED",\n          "product_name": "Premium Headphones",\n          "base_price": 50.00\n        }\n      },\n      {\n        "rule_id": "ptr_002",\n        "variant_id": "var_456",\n        "min_qty": 50,\n        "price": 42.00,\n        "variant": {\n          "variant_id": "var_456",\n          "sku": "PROD-001-RED",\n          "product_name": "Premium Headphones",\n          "base_price": 50.00\n        }\n      }\n    ],\n    "created_at": "2025-01-15T10:00:00Z",\n    "updated_at": "2025-11-20T14:30:00Z"\n  },\n  "timestamp": "2025-11-23T11:21:00Z",\n  "path": "/api/v1/price-tiers/pt_123",\n  "requestId": "req_price_tier_get_xyz789"\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Error (404 Not Found):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 404,\n  "error": {\n    "code": "PRICE_TIER_NOT_FOUND",\n    "message": "Price tier with ID \'pt_123\' not found",\n    "details": {\n      "price_tier_id": "pt_123"\n    }\n  },\n  "timestamp": "2025-11-23T11:21:00Z",\n  "path": "/api/v1/price-tiers/pt_123",\n  "requestId": "req_price_tier_get_xyz789"\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"crear-price-tier",children:"Crear Price Tier"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"POST /api/v1/price-tiers\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "name": "VIP",\n  "slug": "vip",\n  "description": "VIP customer pricing with exclusive discounts",\n  "priority": 0,\n  "is_active": true,\n  "metadata": {\n    "customer_type": "VIP",\n    "discount_percentage": 15\n  }\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Validaciones:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"name"}),": Requerido, string (1-100 caracteres), \xfanico por organizaci\xf3n"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"slug"}),": Requerido, string (1-100 caracteres), formato slug, \xfanico por organizaci\xf3n"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"description"}),": Opcional, string (max 500 caracteres)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"priority"}),": Opcional, integer (default: 0) - menor n\xfamero = mayor prioridad"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"is_active"}),": Opcional, boolean (default: true)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"metadata"}),": Opcional, objeto JSON"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (201 Created):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 201,\n  "data": {\n    "price_tier_id": "pt_789",\n    "organization_id": "org_456",\n    "name": "VIP",\n    "slug": "vip",\n    "description": "VIP customer pricing with exclusive discounts",\n    "priority": 0,\n    "is_active": true,\n    "metadata": {\n      "customer_type": "VIP",\n      "discount_percentage": 15\n    },\n    "rules_count": 0,\n    "created_at": "2025-11-23T11:22:00Z",\n    "updated_at": "2025-11-23T11:22:00Z"\n  },\n  "timestamp": "2025-11-23T11:22:00Z",\n  "path": "/api/v1/price-tiers",\n  "requestId": "req_price_tier_create_def456"\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Error (409 Conflict):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "PRICE_TIER_SLUG_EXISTS",\n    "message": "Price tier with slug \'vip\' already exists in this organization",\n    "details": {\n      "slug": "vip",\n      "existing_price_tier_id": "pt_111"\n    }\n  },\n  "timestamp": "2025-11-23T11:22:00Z",\n  "path": "/api/v1/price-tiers",\n  "requestId": "req_price_tier_create_def456"\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"actualizar-price-tier",children:"Actualizar Price Tier"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"PUT /api/v1/price-tiers/{priceTierId}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"priceTierId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico del price tier"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "name": "VIP Gold",\n  "description": "VIP Gold tier with 20% discount",\n  "priority": 0,\n  "is_active": true,\n  "metadata": {\n    "customer_type": "VIP_GOLD",\n    "discount_percentage": 20\n  }\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "price_tier_id": "pt_789",\n    "organization_id": "org_456",\n    "name": "VIP Gold",\n    "slug": "vip",\n    "description": "VIP Gold tier with 20% discount",\n    "priority": 0,\n    "is_active": true,\n    "metadata": {\n      "customer_type": "VIP_GOLD",\n      "discount_percentage": 20\n    },\n    "rules_count": 0,\n    "created_at": "2025-11-23T11:22:00Z",\n    "updated_at": "2025-11-23T11:25:00Z"\n  },\n  "timestamp": "2025-11-23T11:25:00Z",\n  "path": "/api/v1/price-tiers/pt_789",\n  "requestId": "req_price_tier_update_ghi789"\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"eliminar-price-tier",children:"Eliminar Price Tier"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"DELETE /api/v1/price-tiers/{priceTierId}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"priceTierId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico del price tier"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"force"})}),(0,s.jsx)(r.td,{children:"boolean"}),(0,s.jsx)(r.td,{children:"Forzar eliminaci\xf3n aunque tenga reglas asociadas"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (204 No Content):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"HTTP/1.1 204 No Content\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Error (409 Conflict):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "PRICE_TIER_HAS_RULES",\n    "message": "Cannot delete price tier with associated rules",\n    "details": {\n      "price_tier_id": "pt_789",\n      "rules_count": 15,\n      "suggestion": "Use force=true parameter to delete all rules and the price tier"\n    }\n  },\n  "timestamp": "2025-11-23T11:26:00Z",\n  "path": "/api/v1/price-tiers/pt_789",\n  "requestId": "req_price_tier_delete_jkl012"\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"price-tier-rules",children:"Price Tier Rules"}),"\n",(0,s.jsx)(r.h3,{id:"listar-reglas-de-un-price-tier",children:"Listar Reglas de un Price Tier"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"GET /api/v1/price-tiers/{priceTierId}/rules\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"priceTierId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico del price tier"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"first"})}),(0,s.jsx)(r.td,{children:"integer"}),(0,s.jsx)(r.td,{children:"N\xfamero de reglas a retornar (default: 20, max: 100)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"after"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"Cursor para paginaci\xf3n"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"variant_id"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"Filtrar por variante espec\xedfica"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "price_tier": {\n      "price_tier_id": "pt_123",\n      "name": "Wholesale",\n      "slug": "wholesale"\n    },\n    "rules": {\n      "edges": [\n        {\n          "cursor": "cnVsZV8wMDE=",\n          "node": {\n            "rule_id": "ptr_001",\n            "price_tier_id": "pt_123",\n            "variant_id": "var_456",\n            "min_qty": 10,\n            "price": 45.00,\n            "variant": {\n              "variant_id": "var_456",\n              "sku": "PROD-001-RED",\n              "product_name": "Premium Headphones",\n              "base_price": 50.00\n            },\n            "created_at": "2025-01-15T10:00:00Z",\n            "updated_at": "2025-11-20T14:30:00Z"\n          }\n        }\n      ],\n      "pageInfo": {\n        "hasNextPage": true,\n        "hasPreviousPage": false,\n        "startCursor": "cnVsZV8wMDE=",\n        "endCursor": "cnVsZV8wMDU=",\n        "totalCount": 5\n      }\n    }\n  },\n  "timestamp": "2025-11-23T11:27:00Z",\n  "path": "/api/v1/price-tiers/pt_123/rules",\n  "requestId": "req_price_tier_rules_mno345"\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"crear-regla-de-precio",children:"Crear Regla de Precio"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"POST /api/v1/price-tiers/{priceTierId}/rules\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"priceTierId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico del price tier"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "variant_id": "var_456",\n  "min_qty": 100,\n  "price": 40.00\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Validaciones:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"variant_id"}),": Requerido, debe existir en la organizaci\xf3n"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"min_qty"}),": Requerido, integer > 0"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"price"}),": Requerido, decimal > 0"]}),"\n",(0,s.jsx)(r.li,{children:"No puede existir otra regla para el mismo price_tier + variant + min_qty"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (201 Created):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 201,\n  "data": {\n    "rule_id": "ptr_003",\n    "price_tier_id": "pt_123",\n    "variant_id": "var_456",\n    "min_qty": 100,\n    "price": 40.00,\n    "variant": {\n      "variant_id": "var_456",\n      "sku": "PROD-001-RED",\n      "product_name": "Premium Headphones",\n      "base_price": 50.00\n    },\n    "created_at": "2025-11-23T11:28:00Z",\n    "updated_at": "2025-11-23T11:28:00Z"\n  },\n  "timestamp": "2025-11-23T11:28:00Z",\n  "path": "/api/v1/price-tiers/pt_123/rules",\n  "requestId": "req_price_tier_rule_create_pqr678"\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Error (409 Conflict):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 409,\n  "error": {\n    "code": "PRICE_TIER_RULE_EXISTS",\n    "message": "A rule already exists for this variant and quantity",\n    "details": {\n      "price_tier_id": "pt_123",\n      "variant_id": "var_456",\n      "min_qty": 100,\n      "existing_rule_id": "ptr_002"\n    }\n  },\n  "timestamp": "2025-11-23T11:28:00Z",\n  "path": "/api/v1/price-tiers/pt_123/rules",\n  "requestId": "req_price_tier_rule_create_pqr678"\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Error (400 Bad Request):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "error",\n  "statusCode": 400,\n  "error": {\n    "code": "INVALID_PRICE_TIER_RULE",\n    "message": "Invalid price tier rule data",\n    "details": {\n      "validation_errors": [\n        {\n          "field": "min_qty",\n          "message": "Minimum quantity must be greater than 0"\n        },\n        {\n          "field": "price",\n          "message": "Price must be greater than 0"\n        }\n      ]\n    }\n  },\n  "timestamp": "2025-11-23T11:28:00Z",\n  "path": "/api/v1/price-tiers/pt_123/rules",\n  "requestId": "req_price_tier_rule_create_pqr678"\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"actualizar-regla-de-precio",children:"Actualizar Regla de Precio"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"PUT /api/v1/price-tiers/{priceTierId}/rules/{ruleId}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"priceTierId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico del price tier"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ruleId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico de la regla"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Request Body:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "min_qty": 120,\n  "price": 38.50\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "rule_id": "ptr_003",\n    "price_tier_id": "pt_123",\n    "variant_id": "var_456",\n    "min_qty": 120,\n    "price": 38.50,\n    "variant": {\n      "variant_id": "var_456",\n      "sku": "PROD-001-RED",\n      "product_name": "Premium Headphones",\n      "base_price": 50.00\n    },\n    "created_at": "2025-11-23T11:28:00Z",\n    "updated_at": "2025-11-23T11:30:00Z"\n  },\n  "timestamp": "2025-11-23T11:30:00Z",\n  "path": "/api/v1/price-tiers/pt_123/rules/ptr_003",\n  "requestId": "req_price_tier_rule_update_stu901"\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"eliminar-regla-de-precio",children:"Eliminar Regla de Precio"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"DELETE /api/v1/price-tiers/{priceTierId}/rules/{ruleId}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"priceTierId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico del price tier"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ruleId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico de la regla"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (204 No Content):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"HTTP/1.1 204 No Content\n"})}),"\n",(0,s.jsx)(r.h3,{id:"obtener-precio-por-variante-y-cantidad",children:"Obtener Precio por Variante y Cantidad"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-http",children:"GET /api/v1/variants/{variantId}/price\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Path Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"variantId"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"ID \xfanico de la variante"})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Query Parameters:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"quantity"})}),(0,s.jsx)(r.td,{children:"integer"}),(0,s.jsx)(r.td,{children:"Cantidad para calcular precio"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"price_tier_id"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"Price tier a aplicar (opcional)"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response Success (200 OK):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "status": "success",\n  "statusCode": 200,\n  "data": {\n    "variant_id": "var_456",\n    "sku": "PROD-001-RED",\n    "base_price": 50.00,\n    "quantity": 75,\n    "applied_price_tier": {\n      "price_tier_id": "pt_123",\n      "name": "Wholesale",\n      "slug": "wholesale"\n    },\n    "applied_rule": {\n      "rule_id": "ptr_002",\n      "min_qty": 50,\n      "price": 42.00\n    },\n    "final_price": 42.00,\n    "total_amount": 3150.00,\n    "savings": {\n      "amount_saved": 600.00,\n      "percentage_saved": 16\n    },\n    "next_tier": {\n      "min_qty": 100,\n      "price": 40.00,\n      "additional_qty_needed": 25\n    }\n  },\n  "timestamp": "2025-11-23T11:31:00Z",\n  "path": "/api/v1/variants/var_456/price",\n  "requestId": "req_variant_price_calc_vwx234"\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"eventos-publicados",children:"Eventos Publicados"}),"\n",(0,s.jsx)(r.h3,{id:"price_tiercreated",children:"price_tier.created"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "event_id": "evt_price_tier_created_abc123",\n  "event_type": "price_tier.created",\n  "timestamp": "2025-11-23T11:22:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "price_tier_id": "pt_789",\n    "organization_id": "org_456",\n    "name": "VIP",\n    "slug": "vip",\n    "priority": 0\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_price_tier_create_def456"\n  }\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"price_tierupdated",children:"price_tier.updated"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "event_id": "evt_price_tier_updated_def456",\n  "event_type": "price_tier.updated",\n  "timestamp": "2025-11-23T11:25:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "price_tier_id": "pt_789",\n    "organization_id": "org_456",\n    "changes": {\n      "name": {\n        "old": "VIP",\n        "new": "VIP Gold"\n      }\n    }\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_price_tier_update_ghi789"\n  }\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"price_tierrulecreated",children:"price_tier.rule.created"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "event_id": "evt_price_tier_rule_created_ghi789",\n  "event_type": "price_tier.rule.created",\n  "timestamp": "2025-11-23T11:28:00Z",\n  "service": "catalog-service",\n  "version": "1.0",\n  "payload": {\n    "rule_id": "ptr_003",\n    "price_tier_id": "pt_123",\n    "variant_id": "var_456",\n    "min_qty": 100,\n    "price": 40.00\n  },\n  "metadata": {\n    "user_id": "user_123",\n    "local_id": "local_001",\n    "correlation_id": "req_price_tier_rule_create_pqr678"\n  }\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"permisos-requeridos",children:"Permisos Requeridos"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Endpoint"}),(0,s.jsx)(r.th,{children:"Permiso"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET /api/v1/price-tiers"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.read"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET /api/v1/price-tiers/{id}"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.read"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET /api/v1/price-tiers/{id}/rules"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.read"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET /api/v1/variants/{id}/price"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.variants.read"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"POST /api/v1/price-tiers"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.create"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PUT /api/v1/price-tiers/{id}"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.update"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"DELETE /api/v1/price-tiers/{id}"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.delete"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"POST /api/v1/price-tiers/{id}/rules"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.update"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PUT /api/v1/price-tiers/{id}/rules/{ruleId}"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.update"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"DELETE /api/v1/price-tiers/{id}/rules/{ruleId}"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"catalog.price_tiers.update"})})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"cach\xe9",children:"Cach\xe9"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Lista de price tiers"}),": TTL 10 minutos"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Price tier individual"}),": TTL 15 minutos"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Reglas de precios"}),": TTL 15 minutos"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"C\xe1lculo de precios"}),": TTL 5 minutos"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Invalidaci\xf3n"}),": Al crear, actualizar o eliminar price tiers o reglas"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Cache Keys:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"price_tiers:list:{organization_id}:{hash(query_params)}\nprice_tiers:detail:{price_tier_id}\nprice_tiers:rules:{price_tier_id}:{variant_id}\nvariants:price:{variant_id}:{price_tier_id}:{quantity}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Lectura"}),": 100 requests/minuto por usuario"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Escritura"}),": 20 requests/minuto por usuario"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"C\xe1lculo de precios"}),": 200 requests/minuto por usuario"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"ejemplos-de-uso",children:"Ejemplos de Uso"}),"\n",(0,s.jsx)(r.h3,{id:"crear-price-tier-con-m\xfaltiples-reglas",children:"Crear price tier con m\xfaltiples reglas"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'# 1. Crear price tier\ncurl -X POST "https://api.zenlogic.com/api/v1/price-tiers" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Wholesale",\n    "slug": "wholesale",\n    "description": "Bulk pricing for wholesalers",\n    "priority": 1\n  }\'\n\n# 2. A\xf1adir reglas\ncurl -X POST "https://api.zenlogic.com/api/v1/price-tiers/pt_123/rules" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "variant_id": "var_456",\n    "min_qty": 10,\n    "price": 45.00\n  }\'\n'})}),"\n",(0,s.jsx)(r.h3,{id:"calcular-precio-para-cantidad-espec\xedfica",children:"Calcular precio para cantidad espec\xedfica"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'curl -X GET "https://api.zenlogic.com/api/v1/variants/var_456/price?quantity=75&price_tier_id=pt_123" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})}),"\n",(0,s.jsx)(r.h3,{id:"listar-todas-las-reglas-de-un-variant",children:"Listar todas las reglas de un variant"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'curl -X GET "https://api.zenlogic.com/api/v1/price-tiers/pt_123/rules?variant_id=var_456" \\\n  -H "Authorization: Bearer {token}" \\\n  -H "X-Organization-ID: org_456"\n'})}),"\n",(0,s.jsx)(r.h2,{id:"l\xf3gica-de-aplicaci\xf3n-de-price-tiers",children:"L\xf3gica de Aplicaci\xf3n de Price Tiers"}),"\n",(0,s.jsx)(r.h3,{id:"prioridad",children:"Prioridad"}),"\n",(0,s.jsxs)(r.p,{children:["Los price tiers se aplican seg\xfan su campo ",(0,s.jsx)(r.code,{children:"priority"}),":"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"0"}),": Mayor prioridad (VIP, contratos especiales)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"1"}),": Prioridad media (Wholesale)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"2+"}),": Prioridad baja (Retail)"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"selecci\xf3n-de-regla",children:"Selecci\xf3n de Regla"}),"\n",(0,s.jsx)(r.p,{children:"Para una variante y cantidad dada:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Filtrar reglas del price tier para la variante"}),"\n",(0,s.jsxs)(r.li,{children:["Ordenar reglas por ",(0,s.jsx)(r.code,{children:"min_qty"})," descendente"]}),"\n",(0,s.jsxs)(r.li,{children:["Seleccionar la primera regla donde ",(0,s.jsx)(r.code,{children:"quantity >= min_qty"})]}),"\n",(0,s.jsxs)(r.li,{children:["Si no hay match, usar ",(0,s.jsx)(r.code,{children:"base_price"})," de la variante"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:'Reglas para variant_id "var_456" en price tier "Wholesale":'})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"min_qty: 10, price: 45.00"}),"\n",(0,s.jsx)(r.li,{children:"min_qty: 50, price: 42.00"}),"\n",(0,s.jsx)(r.li,{children:"min_qty: 100, price: 40.00"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Aplicaci\xf3n:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Quantity 5 \u2192 base_price (50.00)"}),"\n",(0,s.jsx)(r.li,{children:"Quantity 15 \u2192 45.00"}),"\n",(0,s.jsx)(r.li,{children:"Quantity 75 \u2192 42.00"}),"\n",(0,s.jsx)(r.li,{children:"Quantity 150 \u2192 40.00"}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,r,i)=>{i.d(r,{R:()=>t,x:()=>d});var n=i(6540);const s={},c=n.createContext(s);function t(e){const r=n.useContext(c);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),n.createElement(c.Provider,{value:r},e.children)}}}]);